┌─────────────────────────────────────────────────┐
│           SYSTEM PROMPT (ثابت در هر چت)          │
│   خلاصه معماری + قواعد فارسی + شِمای خروجی     │
│   (~2000 توکن)                                   │
├─────────────────────────────────────────────────┤
│         CONTEXT FILE (ارسال در ابتدای چت)        │
│   مشخصات ماژول فعلی + interface ها               │
│   (~1500 توکن)                                   │
├─────────────────────────────────────────────────┤
│              USER PROMPT (درخواست)                │
│   "کد فایل X را بنویس"                          │
│   (~500 توکن)                                    │
├─────────────────────────────────────────────────┤
│           ASSISTANT RESPONSE (خروجی)             │
│   کد + تست + توضیح                               │
│   (~4000-8000 توکن)                              │
└─────────────────────────────────────────────────┘
مجموع هر تعامل: ~8000-12000 توکن ← امن