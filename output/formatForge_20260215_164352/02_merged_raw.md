---
source: "output\formatForge_20260215_164352\01_converted.json"
total_conversations: 4
total_segments_merged: 10
manual_review_needed: 2
models: [claude-opus-4-6]
generated_by: chat-merger
---

# Chat Merger Report

| Metric | Value |
|--------|-------|
| Conversations | 4 |
| Total segments merged | 10 |
| Overlaps detected | 2 |
| Blocks needing review | 2 |

---

## Conversation 1
*(3 segments merged)*
*Model: claude-opus-4-6*

<!-- ๐ง MANUAL INTERVENTION NEEDED -->
> **Review needed:** Overlap detection flagged some areas

### Request

## Request
ุฑ ุฑุง ุฏุฑ ุตูุฑุช ูุงุฒ ุฏุฑ ฺูุฏ ุจุฎุด ุจู ุดฺฉู ุฌุงูุน ุชูู ฺฉู ุชุง ุจุชูุงูู ุงุฒ ุขู ุฏุฑ ุชุณุช ฺฉุฑุฏู ูุฑู ุงูุฒุงุฑ ุชุจุฏู ููุงูุงุช ู ฺฉุชุงุจ ูุง ุจุงููโูุง ู ุงุซุจุงุชโูุง ููุทู ุฑุงุถโุงู ุงุฒ ููุน ูุฑูุชโูุง ูุฎุชูู ูุธุฑ ูุงุชฺฉุณุ html, md, docs, pdf, ุจู mdx ุจุฑุง ูุจ ุณุงุช ุฎูุฏู ุงุณุชูุงุฏู ฺฉูู.
ูุญุชูุงูุง ุนููุญุชูุงูุง ุฒ
ุฏุชุง ูุงุฑุณ ุจุง ูุฌูุฏ ูุชูู ุงูฺฏูุณ ุฏุฑ ุขููุง ุง ุงูฺฏูุณ ูุณุชูุฏ. 
ูุฑ ููุน ุดฺฉู ู ูุงูุจ ู ููุฑุช ููุฑุฏ ูุงุฒ ุฑุง ุฏุฑ ูููููโูุง ุจฺฏูุฌุงู ุชุง ุชุณุช ุฏูู ุตูุฑุช ุจฺฏุฑุฏ. 
ุฏุฑ ุตูุฑุช ุงูฺฉุงู ุงุฒ ุฏุณุชูุฑ powershell ุจุฑุง ุณุงุฎุชู ูุงูโูุง ููููู ุงุณุชูุงุฏู ฺฉูุ ุงฺฏุฑ ูุชู ุฏุฑ ฺุช ุฒูุงู ฺฉู ุจู ูู ุงุฑุงุฆู ูโฺฉู ุฎุฑุงุจ ููโุดูุฏ. ูุงูุง ุฎูุฏู ฺฉูพ ุจุณุช ุฎูุงูู ฺฉุฑุฏ. 

## Latex
`````Markdown

ุจฺฉ ูุงู ูุงุชฺฉุณ ููููู ุจู ูู ุจุฏู ฺฉู ุฏู ุฒุจุงูู ุจูุฏูุ ูุงุฑุณ ู ุงูฺฏูุณุ ูููโ ุงููุงุน ูููุฏุงุฑ ู ุนฺฉุณ ู ฺุงุฑุช ู ุฌุฏูู ู ูุนุงุฏูู ู ุงุซุจุงุช ููุทู ู ุฌุฏูู ุขูู ู ุชุตูุฑ ู ููฺฉ ู ุงุฑุฌุงุน ู ุจุจููฺฏุฑุงู ู ูพุงููุดุช ู ูพ ููุดุช ู ฺูุฏุฑุณุงููโุง ู ุฎูุงุตู  ูููโ ุงููุงุน ู ุงูุณุงู ูุฎุชูู ฺฉุงููพูููุชโูุง ฺฉ ฺฉุชุงุจ ุญุฑููโุง ุฑุง 
ุฏุงุดุชู ุจุงุดุฏ ุงุฒ ูุฑ ฺฉุฏูู ฺฉ ุง ุฏู ููุฑุฏ (ุงฺฏุฑ ุชุฑฺฉุจ ุจุงุดูุฏ) 
ุชูุงู ุงูุชุถุงุฆุงุช ู ูุงุฒููุฏโูุง ูุงุฑุณ ู wrapper ูุง ุจุฑุง ููุงุด ููุดุชูโูุช ุจู ุฏุฑุณุช ููุฑุฏ ุชูุฌู ุจุงุดุฏ. 

ูพฺฉุฌโูุง ุจุง ูู ุจฺฉุฑ ุชุนุฑุถ ูุฏุงุดุชู ุจุงุดุฏ. 
ุฑุงูููุง ุชููโ ูุงุชฺฉุณ ุฏุฑุณุช ูุงุฑุณ ุฑุง ุงุฑุฆู ฺฉู ุจู ูุญุงุธ ูู ุฏุฑ ุงูุชูุง ุณูุฏ.. ุนู ฺฉ ุงุฒ ููุถูุนุงุช ุณูุฏ ุงู ุจุงุดุฏ! ุฑุงูููุง ูุงุชฺฉุณ ฺฉุงูู ู ุฏุฑุณุช

ุทุฑุญ ู ุฑูฺฏโุจูุฏ ู ุณูุงุฑู ุจุตุฑ ฺฉุงูู ู ุดฺฉ ู ูุฏุฑู ู ุฑูฺฏ (ุจุงุช) ุฏุงุดุชู ุจุงุดุฏ ุณูุฏ
`````

## Markdown
`````markdown
ฺฉ ูุงู ูุงุฑฺฉ ุฏุงูู ูุงุฑุณ ุจุง ุชูุงู ุงููุงุน ูููุฏุงุฑูุง ุงุฒ ุฌูุณ mermaid ุจุง ูุธุงุฑ ุขู ุฏุฑุณุช ฺฉู ุจู ุดฺฉู ุฏุฑ ูุฑู ุงูุฒุงุฑ ุชุจุฏูู ุจุชูุงูู ุนููฺฉุฑุฏ ุตุญุญ ู ฺฉุงูู ุงูุฑุง ุชุณุช ฺฉูู
ุฏูุช ฺฉู ูุงุฒููุฏโูุง mermaid ุจุฑุง ููุงุด ุฏุฑุณุช ูููุช ูุงุฑุณ ฺุณุช ู
 ุง ูุญุฏูุฏุชโูุงุด ฺฉู ุจุฑุฎ ูููุฏุงุฑูุง ุฑุง ููโุชูุงูุฏ ุงุฒ ูุงุฑุณ ุฑูุฏุฑ ฺฉูุฏ. 

ุฑุงูููุง ุชููโ ูุงุฑฺฉ ุฏุงูู ุฏุฑุณุช ูุงุฑุณ ุฑุง ฺฉู ุจู ุฎูุจ ุจุฑุง ูุจ ุฑูุฏุฑ ุดูุฏ ุงุฑุฆู ฺฉู ุจู ูุญุงุธ ูู ุฏุฑ ุงูุชูุง ุณูุฏ ู ุงู ุฑุง ฺฉ ุงุฒ ููุถูุนุงุช ุงู ููููู ูุฑุงุฑ ุจุฏู
`````

### Follow-up additions

**Follow-up 1:** ุฏ ุงุฏุงูู ุจุฏู

**Follow-up 2:** ุงฺฏุฑ ุชูุงู ูุดุฏู ุงุฏุงูู ุจุฏู

### Response

ูุญุชูุง ุงุตู (LaTeX ู Markdown+Mermaid) ฺฉุงูู ุดุฏู ุจูุฏ. ุงูุง ุดูุง ุฏุฑ ุฏุฑุฎูุงุณุช ุงููู ุงุฒ ูุฑูุชโูุง **HTML** ู **DOCX** ู **PDF** ูู ูุงู ุจุฑุฏุฏ. ุจูุงุจุฑุงู ูุงูโูุง ุชฺฉูู ุฒุฑ ุฑุง ุงุถุงูู ูโฺฉูู:

---

## ต. ูุงู HTML ููููู (ุฌุงูุน โ ูุงุฑุณ/ุงูฺฏูุณ)

```html
<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ูุจุงู ููุทู ุฑุงุถ โ ููููู ุชุณุช ุชุจุฏู HTML ุจู MDX</title>

  <!-- ===== ูููุช ===== -->
  <link rel="preconnect" href="https://cdn.jsdelivr.net">
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css"
  >

  <!-- ===== KaTeX (ุฑุงุถ) ===== -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css"
  >
  <script
    defer
    src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"
  ></script>
  <script
    defer
    src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"
    onload="renderMathInElement(document.body, {
      delimiters: [
        {left: '$$', right: '$$', display: true},
        {left: '$', right: '$', display: false},
        {left: '\\[', right: '\\]', display: true},
        {left: '\\(', right: '\\)', display: false}
      ]
    });"
  ></script>

  <!-- ===== Mermaid ===== -->
  <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: 'base',
      themeVariables: {
        fontFamily: '"Vazirmatn", "Tahoma", sans-serif',
        fontSize: '14px',
        primaryColor: '#E3F2FD',
        primaryTextColor: '#0D47A1',
        primaryBorderColor: '#1565C0',
        lineColor: '#1A73E8',
      },
      flowchart: { htmlLabels: true, curve: 'basis' },
      securityLevel: 'loose',
    });
  </script>

  <!-- ===== Highlight.js (ฺฉุฏ) ===== -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/github.min.css"
  >
  <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/highlight.min.js"></script>
  <script>hljs.highlightAll();</script>

  <style>
    /* ========== ูุชุบุฑูุง ุฑูฺฏ ========== */
    :root {
      --primary: #1A73E8;
      --primary-light: #E3F2FD;
      --accent-teal: #00897B;
      --accent-teal-light: #E0F2F1;
      --accent-orange: #FB8C00;
      --accent-orange-light: #FFF3E0;
      --text-dark: #212121;
      --text-gray: #616161;
      --bg-light: #F5F7FA;
      --bg-white: #FFFFFF;
      --border-light: #E0E0E0;
      --theorem-bg: #E3F2FD;
      --definition-bg: #E8F5E9;
      --proof-bg: #FFFDE7;
      --warning-bg: #FFF3E0;
      --note-bg: #ECEFF1;
      --sidebar-gray: #ECEFF1;
    }

    /* ========== ูพุงู ========== */
    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: 'Vazirmatn', 'Tahoma', sans-serif;
      font-size: 16px;
      line-height: 1.9;
      color: var(--text-dark);
      background: var(--bg-light);
      direction: rtl;
    }

    /* ========== ููโุงูุช ========== */
    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 2rem;
      background: var(--bg-white);
      box-shadow: 0 1px 3px rgba(0,0,0,0.08);
    }

    /* ========== ุชุชุฑโูุง ========== */
    h1, h2, h3, h4, h5, h6 {
      color: var(--primary);
      margin: 1.5em 0 0.5em;
      line-height: 1.4;
    }
    h1 {
      font-size: 2rem;
      border-bottom: 3px solid var(--primary);
      padding-bottom: 0.5rem;
    }
    h2 {
      font-size: 1.5rem;
      border-bottom: 2px solid var(--primary-light);
      padding-bottom: 0.3rem;
    }
    h3 { font-size: 1.25rem; }
    h4 { font-size: 1.1rem; color: var(--accent-teal); }

    /* ========== ูพุงุฑุงฺฏุฑุงู ========== */
    p { margin: 0.8em 0; }

    /* ========== ููฺฉ ========== */
    a { color: var(--primary); text-decoration: none; }
    a:hover { text-decoration: underline; }

    /* ========== Bold / Italic ========== */
    strong { font-weight: 700; }
    em { font-style: italic; }

    /* ========== ฺฉุฏ ========== */
    code {
      font-family: 'Fira Code', 'JetBrains Mono', 'Consolas', monospace;
      background: var(--bg-light);
      padding: 0.15em 0.4em;
      border-radius: 4px;
      font-size: 0.9em;
      direction: ltr;
      unicode-bidi: isolate;
    }

    pre {
      direction: ltr;
      text-align: left;
      background: var(--bg-light);
      border: 1px solid var(--border-light);
      border-radius: 8px;
      padding: 1rem;
      overflow-x: auto;
      margin: 1rem 0;
    }
    pre code {
      background: none;
      padding: 0;
      font-size: 0.88em;
    }

    /* ========== ูููโููู ========== */
    blockquote {
      border-right: 4px solid var(--primary);
      background: var(--primary-light);
      padding: 1rem 1.5rem;
      margin: 1rem 0;
      border-radius: 0 8px 8px 0;
    }
    blockquote blockquote {
      border-right-color: var(--accent-teal);
      background: var(--accent-teal-light);
      margin-top: 0.5rem;
    }

    /* ========== ุฌุฏูู ========== */
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 1.5rem 0;
      direction: rtl;
    }
    th, td {
      border: 1px solid var(--border-light);
      padding: 0.6rem 0.8rem;
      text-align: right;
    }
    th {
      background: var(--primary-light);
      color: var(--primary);
      font-weight: 700;
    }
    tr:nth-child(even) { background: var(--bg-light); }
    tr:hover { background: #E8EAF6; }

    /* ========== ูุณุช ========== */
    ul, ol {
      padding-right: 2em;
      margin: 0.5em 0;
    }
    li { margin: 0.3em 0; }

    /* ========== ุฎุท ุงูู ========== */
    hr {
      border: none;
      height: 2px;
      background: linear-gradient(to left, var(--primary), var(--accent-teal));
      margin: 2rem 0;
      border-radius: 1px;
    }

    /* ========== ุชุตูุฑ ========== */
    figure {
      margin: 1.5rem 0;
      text-align: center;
    }
    figure img {
      max-width: 100%;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    figcaption {
      color: var(--text-gray);
      font-size: 0.9em;
      margin-top: 0.5rem;
    }

    /* ========== ุชุตูุฑ ฺฉูุงุฑ ูุชู ========== */
    .float-start {
      float: right;
      margin: 0 0 1rem 1.5rem;
      max-width: 40%;
    }
    .float-end {
      float: left;
      margin: 0 1.5rem 1rem 0;
      max-width: 40%;
    }

    /* ========== ุฌุนุจูโูุง ========== */
    .box {
      border-radius: 8px;
      padding: 1rem 1.5rem;
      margin: 1.5rem 0;
      border-right: 5px solid;
    }
    .box-title {
      font-weight: 700;
      margin-bottom: 0.5rem;
      font-size: 1.05em;
    }
    .theorem { background: var(--theorem-bg); border-color: var(--primary); }
    .definition { background: var(--definition-bg); border-color: var(--accent-teal); }
    .proof { background: var(--proof-bg); border-color: var(--accent-orange); }
    .warning { background: var(--warning-bg); border-color: var(--accent-orange); }
    .note { background: var(--note-bg); border-color: #546E7A; }
    .example { background: #F3E5F5; border-color: #7B1FA2; }

    /* ========== ูพุงููุดุช ========== */
    .footnotes {
      margin-top: 3rem;
      padding-top: 1rem;
      border-top: 1px solid var(--border-light);
      font-size: 0.9em;
      color: var(--text-gray);
    }
    .footnote-ref { vertical-align: super; font-size: 0.8em; }

    /* ========== ููุฑุณุช ูุทุงูุจ ========== */
    .toc {
      background: var(--sidebar-gray);
      border-radius: 8px;
      padding: 1.5rem;
      margin: 1.5rem 0;
    }
    .toc h2 { margin-top: 0; border: none; font-size: 1.2rem; }
    .toc ul { list-style: none; padding-right: 0; }
    .toc > ul > li { margin: 0.5em 0; }
    .toc ul ul { padding-right: 1.5em; }
    .toc a { color: var(--text-dark); }
    .toc a:hover { color: var(--primary); }

    /* ========== ุจููฺฉ LTR ========== */
    .ltr-block {
      direction: ltr;
      text-align: left;
      unicode-bidi: isolate;
    }

    /* ========== Mermaid ========== */
    .mermaid {
      direction: ltr;
      text-align: center;
      margin: 1.5rem 0;
    }

    /* ========== Badge / Tag ========== */
    .badge {
      display: inline-block;
      padding: 0.15em 0.6em;
      border-radius: 12px;
      font-size: 0.8em;
      font-weight: 700;
      color: white;
    }
    .badge-blue { background: var(--primary); }
    .badge-teal { background: var(--accent-teal); }
    .badge-orange { background: var(--accent-orange); }

    /* ========== Details / Summary ========== */
    details {
      background: var(--bg-light);
      border: 1px solid var(--border-light);
      border-radius: 8px;
      padding: 1rem;
      margin: 1rem 0;
    }
    summary {
      cursor: pointer;
      font-weight: 700;
      color: var(--primary);
    }
    details[open] summary { margin-bottom: 0.5rem; }

    /* ========== Keyboard ========== */
    kbd {
      background: var(--bg-light);
      border: 1px solid var(--border-light);
      border-radius: 4px;
      padding: 0.1em 0.4em;
      font-size: 0.85em;
      font-family: inherit;
      box-shadow: 0 1px 0 rgba(0,0,0,0.1);
    }

    /* ========== Mark (ูุงูุงุช) ========== */
    mark {
      background: #FFF176;
      padding: 0.1em 0.3em;
      border-radius: 3px;
    }

    /* ========== Abbreviation ========== */
    abbr {
      text-decoration: underline dotted;
      cursor: help;
    }

    /* ========== ูพุงุตูุญู ========== */
    footer {
      text-align: center;
      padding: 2rem;
      color: var(--text-gray);
      font-size: 0.85em;
      border-top: 1px solid var(--border-light);
      margin-top: 3rem;
    }

    /* ========== ูุงฺฉูุดโฺฏุฑุง ========== */
    @media (max-width: 768px) {
      .container { padding: 1rem; }
      .float-start, .float-end {
        float: none;
        max-width: 100%;
        margin: 1rem 0;
      }
      table { font-size: 0.85em; }
    }

    /* ========== ูพุฑูุช ========== */
    @media print {
      body { background: white; }
      .container { box-shadow: none; max-width: 100%; }
      a { color: var(--text-dark); }
      a[href]::after { content: " (" attr(href) ")"; font-size: 0.8em; }
      .mermaid { break-inside: avoid; }
    }
  </style>
</head>

<body>
  <div class="container">

    <!-- ==========================================
         ูุฏุฑ ู ุนููุงู
    ========================================== -->
    <header style="text-align:center; margin-bottom:2rem;">
      <h1 style="border:none; font-size:2.2rem;">
        ูุจุงู ููุทู ุฑุงุถ ู ุงุซุจุงุชโูุง ุตูุฑ
      </h1>
      <p style="color:var(--text-gray); font-size:1.1em;">
        Foundations of Mathematical Logic and Formal Proofs
      </p>
      <p>
        <span class="badge badge-blue">ููุทู</span>
        <span class="badge badge-teal">ุฑุงุถ</span>
        <span class="badge badge-orange">ุงุซุจุงุช</span>
      </p>
      <p style="color:var(--text-gray);">
        ููุณูุฏู: <strong>ููุฏ ุณุงูู</strong> โ ุชุงุจุณุชุงู ฑดฐด
      </p>
    </header>

    <hr>

    <!-- ==========================================
         ููุฑุณุช ูุทุงูุจ
    ========================================== -->
    <nav class="toc" aria-label="ููุฑุณุช ูุทุงูุจ">
      <h2>๐ ููุฑุณุช ูุทุงูุจ</h2>
      <ul>
        <li><a href="#chap1">ฑ. ููุฏูู ู ููุงูู ูพุงู</a>
          <ul>
            <li><a href="#sec-def">ฑ.ฑ ุชุนุงุฑู</a></li>
            <li><a href="#sec-theorem">ฑ.ฒ ูุถุงุง ู ุงุซุจุงุช</a></li>
          </ul>
        </li>
        <li><a href="#chap2">ฒ. ุฌุฏูู ุงุฑุฒุด ู ุนููฺฏุฑูุง</a></li>
        <li><a href="#chap3">ณ. ูููุฏุงุฑูุง</a></li>
        <li><a href="#chap4">ด. ุชุตุงูุฑ ู ฺูุฏุฑุณุงููโุง</a></li>
        <li><a href="#chap5">ต. ฺฉุฏ ู ุงูฺฏูุฑุชู</a></li>
        <li><a href="#chap6">ถ. ุนูุงุตุฑ HTML ุฎุงุต</a></li>
        <li><a href="#chap7">ท. ูุญุชูุง ุฏูุฒุจุงูู</a></li>
        <li><a href="#chap8">ธ. ูุฑูููโูุง ูพุดุฑูุชู</a></li>
        <li><a href="#chap-footnotes">ูพุงููุดุชโูุง</a></li>
        <li><a href="#chap-bib">ฺฉุชุงุจโูุงูู</a></li>
      </ul>
    </nav>

    <hr>

    <!-- ==========================================
         ูุตู ฑ: ููุฏูู
    ========================================== -->
    <section id="chap1">
      <h2>ฑ. ููุฏูู ู ููุงูู ูพุงู</h2>

      <p>
        ุงู ุณูุฏ ุจูโุนููุงู ฺฉ <strong>ููููู ุฌุงูุน ุชุณุช</strong> ุทุฑุงุญ ุดุฏู
        ู ุดุงูู ุชูุงู ุงุฌุฒุง ฺฉ ุตูุญู ูุจ ุญุฑููโุง ูุงุฑุณ ุงุณุช.
        ูุฏู ุขู ุชุณุช ุชุจุฏู <abbr title="HyperText Markup Language">HTML</abbr>
        ุจู <abbr title="Markdown + JSX">MDX</abbr> ูโุจุงุดุฏ.
      </p>

      <div class="note box">
        <div class="box-title">๐ ูฺฉุชู</div>
        ุชูุงู ุงุฑุฌุงุนุงุชุ ูพุงููุดุชโูุง ู ฺฉุชุงุจโูุงูู ุงู ุณูุฏ
        ุตุฑูุงู ุฌูุช ุชุณุช ูุณุชูุฏ.
      </div>

      <!-- === ุชุนุงุฑู === -->
      <h3 id="sec-def">ฑ.ฑ ุชุนุงุฑู</h3>

      <div class="definition box">
        <div class="box-title">ุชุนุฑู ฑ.ฑ โ ฺฏุฒุงุฑู (Proposition)</div>
        <p>
          <strong>ฺฏุฒุงุฑู</strong> ุฌูููโุง ุฎุจุฑ ุงุณุช ฺฉู ุฏููุงู ฺฉ ุงุฒ
          ุฏู ุงุฑุฒุด ยซุฏุฑุณุชยป (<span dir="ltr">True, $\top$</span>)
          ุง ยซูุงุฏุฑุณุชยป (<span dir="ltr">False, $\bot$</span>) ุฑุง ุฏุงุฑุฏ.
        </p>
      </div>

      <div class="definition box">
        <div class="box-title">ุชุนุฑู ฑ.ฒ โ ุชุงุชูููฺ (Tautology)</div>
        <p>
          ฺฏุฒุงุฑู ูุฑฺฉุจ $\varphi$ ฺฉ <strong>ุชุงุชูููฺ</strong> ุงุณุช
          ุงฺฏุฑ ู ุชููุง ุงฺฏุฑ ุชุญุช ูุฑ ุชุฎุตุต ุงุฑุฒุดุ ููุฏุงุฑ ุขู ุฏุฑุณุช ุจุงุดุฏ:
        </p>
        $$\models \varphi \iff \forall\, v : v(\varphi) = \top$$
      </div>

      <!-- === ูุถู ู ุงุซุจุงุช === -->
      <h3 id="sec-theorem">ฑ.ฒ ูุถุงุง ู ุงุซุจุงุช</h3>

      <div class="theorem box" id="thm-demorgan">
        <div class="box-title">ูุถู ฑ.ฑ โ ูุงููู ุฏููุฑฺฏุงู (De Morgan's Laws)</div>
        <p>ุจุฑุง ูุฑ ุฏู ฺฏุฒุงุฑู $p$ ู $q$:</p>
        $$\neg(p \land q) \equiv (\neg p) \lor (\neg q)$$
        $$\neg(p \lor q) \equiv (\neg p) \land (\neg q)$$
      </div>

      <div class="proof box">
        <div class="box-title">ุงุซุจุงุช ูุถู ฑ.ฑ</div>
        <p>
          ุงุซุจุงุช ุฑุง ุจุง ุฌุฏูู ุงุฑุฒุด ุงูุฌุงู ูโุฏูู. ุฌุฏูู ฺฉุงูู ุฏุฑ
          <a href="#tab-demorgan">ุฌุฏูู ฑ</a> ุขูุฏู ุงุณุช.
          ุจุง ุจุฑุฑุณ ุชูุงู ุญุงูุงุชุ ุณุชููโูุง ูุฑุจูุทู ุจุฑุงุจุฑูุฏ. โ
        </p>
      </div>

      <div class="example box">
        <div class="box-title">ูุซุงู ฑ.ฑ โ ฺฉุงุฑุจุฑุฏ ุฏููุฑฺฏุงู</div>
        <p>
          ูุฑุถ ฺฉูุฏ $p$: ยซููุง ุจุงุฑุงู ุงุณุชยป ู $q$: ยซููุง ุณุฑุฏ ุงุณุชยป.
          ุขูฺฏุงู:
        </p>
        $$\neg(p \land q) \equiv \text{ยซููุง ุจุงุฑุงู ูุณุช \textbf{ุง} ุณุฑุฏ ูุณุชยป}$$
      </div>

      <div class="theorem box" id="thm-lem">
        <div class="box-title">ูุถู ฑ.ฒ โ ุงุตู ุทุฑุฏ ุดู ุซุงูุซ</div>
        <p>
          ุจุฑุง ูุฑ ฺฏุฒุงุฑู $p$:
          $\models p \lor \neg p$
          <sup><a href="#fn1" class="footnote-ref" id="fnref1">[ฑ]</a></sup>
        </p>
      </div>

      <div class="proof box">
        <div class="box-title">ุงุซุจุงุช ูุถู ฑ.ฒ</div>
        <ul>
          <li>ุงฺฏุฑ $p = \top$: $p \lor \neg p = \top \lor \bot = \top$ โ</li>
          <li>ุงฺฏุฑ $p = \bot$: $p \lor \neg p = \bot \lor \top = \top$ โ</li>
        </ul>
        <p>ูพุณ ุฏุฑ ูุฑ ุฏู ุญุงูุช ููุฏุงุฑ ุฏุฑุณุช ุงุณุช. โ</p>
      </div>
    </section>

    <hr>

    <!-- ==========================================
         ูุตู ฒ: ุฌุฏูู ุงุฑุฒุด
    ========================================== -->
    <section id="chap2">
      <h2>ฒ. ุฌุฏูู ุงุฑุฒุด ู ุนููฺฏุฑูุง</h2>

      <h3>ุฌุฏูู ุงุฑุฒุด ุฏููุฑฺฏุงู</h3>
      <table id="tab-demorgan">
        <caption>ุฌุฏูู ฑ โ ุฌุฏูู ุงุฑุฒุด ููุงูู ุฏููุฑฺฏุงู</caption>
        <thead>
          <tr>
            <th>$p$</th>
            <th>$q$</th>
            <th>$p \land q$</th>
            <th>$\neg(p \land q)$</th>
            <th>$\neg p$</th>
            <th>$\neg q$</th>
            <th>$(\neg p)\lor(\neg q)$</th>
            <th>ุจุฑุงุจุฑุ</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>T</td><td>T</td><td>T</td><td><strong>F</strong></td><td>F</td><td>F</td><td><strong>F</strong></td><td>โ</td></tr>
          <tr><td>T</td><td>F</td><td>F</td><td><strong>T</strong></td><td>F</td><td>T</td><td><strong>T</strong></td><td>โ</td></tr>
          <tr><td>F</td><td>T</td><td>F</td><td><strong>T</strong></td><td>T</td><td>F</td><td><strong>T</strong></td><td>โ</td></tr>
          <tr><td>F</td><td>F</td><td>F</td><td><strong>T</strong></td><td>T</td><td>T</td><td><strong>T</strong></td><td>โ</td></tr>
        </tbody>
      </table>

      <h3>ุฌุฏูู ุนููฺฏุฑูุง ููุทู</h3>
      <table>
        <caption>ุฌุฏูู ฒ โ ุนููฺฏุฑูุง ููุทู ูพุงู</caption>
        <thead>
          <tr>
            <th>ุนููฺฏุฑ</th><th>ููุงุฏ</th><th>ูุงู ุงูฺฏูุณ</th><th>ูุซุงู</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>ููุถ</td><td>$\neg$</td><td>Negation</td><td>$\neg p$</td></tr>
          <tr><td>ุนุทู</td><td>$\land$</td><td>Conjunction</td><td>$p \land q$</td></tr>
          <tr><td>ูุตู</td><td>$\lor$</td><td>Disjunction</td><td>$p \lor q$</td></tr>
          <tr><td>ุดุฑุท</td><td>$\to$</td><td>Implication</td><td>$p \to q$</td></tr>
          <tr><td>ุฏูุดุฑุท</td><td>$\leftrightarrow$</td><td>Biconditional</td><td>$p \leftrightarrow q$</td></tr>
        </tbody>
      </table>

      <!-- ุฌุฏูู colSpan ู rowSpan -->
      <h3>ุฌุฏูู ุจุง ุงุฏุบุงู ุณููู (colspan / rowspan)</h3>
      <table>
        <caption>ุฌุฏูู ณ โ ููุงุณู ุณุณุชูโูุง ุงุซุจุงุช</caption>
        <thead>
          <tr>
            <th rowspan="2">ุณุณุชู</th>
            <th colspan="2">ูฺฺฏโูุง</th>
            <th rowspan="2">ฺฉุงุฑุจุฑุฏ</th>
          </tr>
          <tr>
            <th>ุชูุงูุช</th>
            <th>ุณุงุฒฺฏุงุฑ</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>ููุจุฑุช</td><td>โ</td><td>โ</td><td>ูุจุงู ูุธุฑ</td>
          </tr>
          <tr>
            <td>ุงุณุชูุชุงุฌ ุทุจุน</td><td>โ</td><td>โ</td><td>ุขููุฒุด</td>
          </tr>
          <tr>
            <td>ุชุงุจูู</td><td>โ</td><td>โ</td><td>ุงุซุจุงุช ุฎูุฏฺฉุงุฑ</td>
          </tr>
          <tr>
            <td>ุฑุฒูููุดู</td><td>โ*</td><td>โ</td><td>SAT Solvers</td>
          </tr>
        </tbody>
        <tfoot>
          <tr>
            <td colspan="4" style="text-align:center; font-size:0.85em;">
              *ููุท ุจุฑุง ูุฑู ูุฑูุงู ุนุทู (CNF)
            </td>
          </tr>
        </tfoot>
      </table>

      <!-- Definition List -->
      <h3>ูุงฺูโูุงูู (Definition List)</h3>
      <dl>
        <dt><strong>ุชุงุชูููฺ</strong> (Tautology)</dt>
        <dd>ฺฏุฒุงุฑูโุง ูุฑฺฉุจ ฺฉู ุชุญุช ูุฑ ุชุฎุตุต ุงุฑุฒุดุ ุฏุฑุณุช ุงุณุช.</dd>

        <dt><strong>ุชูุงูุถ</strong> (Contradiction)</dt>
        <dd>ฺฏุฒุงุฑูโุง ูุฑฺฉุจ ฺฉู ุชุญุช ูุฑ ุชุฎุตุต ุงุฑุฒุดุ ูุงุฏุฑุณุช ุงุณุช.</dd>

        <dt><strong>ุงููุงุนโูพุฐุฑ</strong> (Satisfiable)</dt>
        <dd>ฺฏุฒุงุฑูโุง ูุฑฺฉุจ ฺฉู ุญุฏุงูู ฺฉ ุชุฎุตุต ุงุฑุฒุด ูุฌูุฏ ุฏุงุฑุฏ ฺฉู ุขู ุฑุง ุฏุฑุณุช ฺฉูุฏ.</dd>
      </dl>
    </section>

    <hr>

    <!-- ==========================================
         ูุตู ณ: ูููุฏุงุฑูุง (Mermaid)
    ========================================== -->
    <section id="chap3">
      <h2>ณ. ูููุฏุงุฑูุง</h2>

      <h3>ณ.ฑ ูููฺุงุฑุช ูุงุฑุณ</h3>
      <div class="mermaid">
        %%{init: {"theme": "base", "themeVariables": {"fontSize": "14px"}, "flowchart": {"htmlLabels": true}}}%%
        flowchart TD
          A["๐ข ุดุฑูุน"] --> B["ูุฑูุฏ: ูุฑููู ฯ"]
          B --> C{"ุขุง ุชุงุชูููฺ ุงุณุชุ"}
          C -->|"ุจูู โ"| D["ฺุงูพ: ุชุงุชูููฺ"]
          C -->|"ุฎุฑ โ"| E["ฺุงูพ: ุบุฑ ุชุงุชูููฺ"]
          D --> F["๐ด ูพุงุงู"]
          E --> F

          style A fill:#E8F5E9,stroke:#2E7D32,color:#1B5E20
          style F fill:#FFEBEE,stroke:#C62828,color:#B71C1C
          style C fill:#FFF3E0,stroke:#EF6C00,color:#E65100
      </div>

      <h3>ณ.ฒ ูููุฏุงุฑ ุชุฑุชุจ</h3>
      <div class="mermaid">
        sequenceDiagram
          participant U as ๐ค ฺฉุงุฑุจุฑ
          participant P as โ๏ธ ุชุฌุฒูโฺฏุฑ
          participant E as ๐งฎ ุงุฑุฒุงุจ

          U->>P: ุงุฑุณุงู ูุฑููู
          activate P
          P->>E: ุฏุฑุฎุช ูุญู
          deactivate P
          activate E
          alt ุชุงุชูููฺ
            E->>U: โ ุจูู
          else ุบุฑ ุชุงุชูููฺ
            E->>U: โ ุฎุฑ
          end
          deactivate E
      </div>

      <h3>ณ.ณ ูููุฏุงุฑ ฺฉูุงุณ</h3>
      <div class="mermaid">
        classDiagram
          class Formula {
            &lt;&lt;abstract&gt;&gt;
            +evaluate(env) bool
            +toString() string
          }
          class Atom {
            -name: string
            +evaluate(env) bool
          }
          class Negation {
            -operand: Formula
            +evaluate(env) bool
          }
          class Conjunction {
            +evaluate(env) bool
          }
          Formula &lt;|-- Atom
          Formula &lt;|-- Negation
          Formula &lt;|-- Conjunction
      </div>

      <h3>ณ.ด ูููุฏุงุฑ ูุถุนุช</h3>
      <div class="mermaid">
        stateDiagram-v2
          [*] --> Parsing
          Parsing --> Error: Invalid
          Error --> Parsing: Retry
          Parsing --> Evaluating: Valid
          Evaluating --> Tautology: All TRUE
          Evaluating --> Contradiction: All FALSE
          Evaluating --> Satisfiable: Mixed
          Tautology --> [*]
          Contradiction --> [*]
          Satisfiable --> [*]
      </div>

      <h3>ณ.ต ูููุฏุงุฑ ฺฏุงูุช</h3>
      <div class="mermaid">
        gantt
          title ุจุฑูุงูู ุฒูุงู ูพุฑูฺู
          dateFormat YYYY-MM-DD
          axisFormat %m/%d

          section ุชุญูู
          ุชุญูู ูุงุฒููุฏโูุง :done, a1, 2025-01-01, 15d
          ุทุฑุงุญ            :done, a2, 2025-01-10, 15d

          section ุชูุณุนู
          ุชุฌุฒูโฺฏุฑ          :active, b1, 2025-01-20, 25d
          ุงุฑุฒุงุจ            :b2, 2025-02-10, 20d

          section ุชุณุช
          ุชุณุช ููุง         :crit, c1, 2025-03-01, 15d
      </div>

      <h3>ณ.ถ ูููุฏุงุฑ ุฏุงุฑูโุง</h3>
      <div class="mermaid">
        pie title Distribution of Logic Articles
          "Classical" : 35
          "Intuitionistic" : 25
          "Modal" : 20
          "Fuzzy" : 12
          "Other" : 8
      </div>

      <h3>ณ.ท ูููุฏุงุฑ Git</h3>
      <div class="mermaid">
        gitGraph
          commit id: "init"
          commit id: "parser"
          branch feature/eval
          checkout feature/eval
          commit id: "eval-v1"
          commit id: "eval-v2"
          checkout main
          merge feature/eval tag: "v1.0"
          commit id: "docs"
      </div>

      <h3>ณ.ธ ูููุฏุงุฑ ER</h3>
      <div class="mermaid">
        erDiagram
          FORMULA ||--o{ VARIABLE : contains
          FORMULA ||--|| TRUTH_TABLE : generates
          FORMULA {
            int id PK
            string expression
            boolean is_tautology
          }
          VARIABLE {
            int id PK
            string name
          }
          TRUTH_TABLE {
            int id PK
            int row_count
          }
      </div>
    </section>

    <hr>

    <!-- ==========================================
         ูุตู ด: ุชุตุงูุฑ ู ฺูุฏุฑุณุงููโุง
    ========================================== -->
    <section id="chap4">
      <h2>ด. ุชุตุงูุฑ ู ฺูุฏุฑุณุงููโุง</h2>

      <h3>ด.ฑ ุชุตูุฑ ุณุงุฏู</h3>
      <figure>
        <img
          src="https://via.placeholder.com/700x300/1A73E8/FFFFFF?text=Mathematical+Logic+Diagram"
          alt="ูููุฏุงุฑ ููุทู ุฑุงุถ"
          loading="lazy"
          width="700"
          height="300"
        >
        <figcaption>ุดฺฉู ฑ โ ูููุฏุงุฑ ููููู ููุทู ุฑุงุถ</figcaption>
      </figure>

      <h3>ด.ฒ ุชุตูุฑ ฺฉูุงุฑ ูุชู (Float)</h3>
      <figure class="float-start">
        <img
          src="https://via.placeholder.com/250x250/00897B/FFFFFF?text=Mind+Map"
          alt="ููุดู ุฐูู"
          loading="lazy"
          width="250"
          height="250"
        >
        <figcaption>ุดฺฉู ฒ โ ููุดู ุฐูู</figcaption>
      </figure>
      <p>
        ุงู ูุชู ุฏุฑ ฺฉูุงุฑ ุชุตูุฑ ูุฑุงุฑ ฺฏุฑูุชู ุชุง ูุญูู ุนููฺฉุฑุฏ
        ุชุตุงูุฑ ุดูุงูุฑ (<code>float</code>) ุฑุง ูุดุงู ุฏูุฏ.
        ุฏุฑ ุชุจุฏู ุจู MDX ุงู ููุน ฺุฏูุงู ุจุงุฏ ุญูุธ ุง
        ุจู ุดฺฉู ููุงุณุจ ุจุงุฒููุง ุดูุฏ.
        ููุฑู ุงูพุณูู ูุชู ุณุงุฎุชฺฏ ุจุง ุชููุฏ ุณุงุฏฺฏ ูุงููููู
        ุงุฒ ุตูุนุช ฺุงูพ ู ุจุง ุงุณุชูุงุฏู ุงุฒ ุทุฑุงุญุงู ฺฏุฑุงูฺฉ ุงุณุช.
        ฺุงูพฺฏุฑูุง

ุงุฏุงูู ูุงู HTML (ุงุฒ ุจุฎุด ุชุตุงูุฑ ุดูุงูุฑ):

```html
        ู ูุชูู ุจูฺฉู ุฑูุฒูุงูู ู ูุฌูู ุฏุฑ ุณุชูู ู ุณุทุฑุขูฺูุงู ฺฉู
        ูุงุฒู ุงุณุช ู ุจุฑุง ุดุฑุงุท ูุนู ุชฺฉููููฺ ููุฑุฏ ูุงุฒ ู
        ฺฉุงุฑุจุฑุฏูุง ูุชููุน ุจุง ูุฏู ุจูุจูุฏ ุงุจุฒุงุฑูุง ฺฉุงุฑุจุฑุฏ ูโุจุงุดุฏ.
        ฺฉุชุงุจโูุง ุฒุงุฏ ุฏุฑ ุดุตุช ู ุณู ุฏุฑุตุฏ ฺฏุฐุดุชูุ ุญุงู ู ุขูุฏู
        ุดูุงุฎุช ูุฑุงูุงู ุฌุงูุนู ู ูุชุฎุตุตุงู ุฑุง ูโุทูุจุฏ.
      </p>
      <div style="clear:both;"></div>

      <h3>ด.ณ ุชุตูุฑ ุจุง ููฺฉ</h3>
      <figure>
        <a href="https://en.wikipedia.org/wiki/Mathematical_logic" target="_blank" rel="noopener">
          <img
            src="https://via.placeholder.com/500x200/FB8C00/FFFFFF?text=Click+to+visit+Wikipedia"
            alt="ููฺฉ ุจู ูฺฉโูพุฏุง โ ููุทู ุฑุงุถ"
            loading="lazy"
            width="500"
            height="200"
          >
        </a>
        <figcaption>ุดฺฉู ณ โ ฺฉูฺฉ ฺฉูุฏ ุชุง ุจู ูฺฉโูพุฏุง ุจุฑูุฏ</figcaption>
      </figure>

      <h3>ด.ด ุชุตุงูุฑ ฺฉูุงุฑ ูู (Gallery)</h3>
      <div style="display:flex; gap:1rem; flex-wrap:wrap; justify-content:center; margin:1.5rem 0;">
        <figure style="flex:1; min-width:200px; max-width:45%;">
          <img
            src="https://via.placeholder.com/300x200/1A73E8/FFFFFF?text=Subfig+1"
            alt="ุฒุฑุดฺฉู ฑ"
            loading="lazy"
            style="width:100%; border-radius:8px;"
          >
          <figcaption>(ุงูู) ุชุงุจุน ูุฑุง</figcaption>
        </figure>
        <figure style="flex:1; min-width:200px; max-width:45%;">
          <img
            src="https://via.placeholder.com/300x200/00897B/FFFFFF?text=Subfig+2"
            alt="ุฒุฑุดฺฉู ฒ"
            loading="lazy"
            style="width:100%; border-radius:8px;"
          >
          <figcaption>(ุจ) ุชุงุจุน ุณฺฏููุฏ</figcaption>
        </figure>
      </div>

      <h3>ด.ต ูุฏุฆู (Embed)</h3>
      <figure>
        <div style="position:relative; padding-bottom:56.25%; height:0; overflow:hidden; border-radius:8px;">
          <iframe
            src="https://www.youtube-nocookie.com/embed/dQw4w9WgXcQ"
            title="ูุฏุฆู ููููู"
            style="position:absolute; top:0; right:0; width:100%; height:100%; border:none;"
            loading="lazy"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen
          ></iframe>
        </div>
        <figcaption>ูุฏุฆู ฑ โ ูุฏุฆู ููููู (YouTube Embed)</figcaption>
      </figure>

      <h3>ด.ถ ุตูุช (Audio)</h3>
      <figure>
        <audio controls preload="none" style="width:100%;">
          <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
          ูุฑูุฑฺฏุฑ ุดูุง ุงุฒ ุนูุตุฑ audio ูพุดุชุจุงู ููโฺฉูุฏ.
        </audio>
        <figcaption>ุตูุช ฑ โ ูุงู ุตูุช ููููู</figcaption>
      </figure>

      <h3>ด.ท SVG ุฏุฑููโุฎุท</h3>
      <figure>
        <svg width="400" height="150" viewBox="0 0 400 150"
             xmlns="http://www.w3.org/2000/svg"
             style="display:block; margin:0 auto;">
          <!-- ูพุณโุฒููู -->
          <rect width="400" height="150" rx="10" fill="#E3F2FD"/>

          <!-- ุฏุงุฑูโูุง โ ูููุฏุงุฑ ูู -->
          <circle cx="150" cy="75" r="55" fill="#1A73E8" fill-opacity="0.4"
                  stroke="#1A73E8" stroke-width="2"/>
          <circle cx="230" cy="75" r="55" fill="#00897B" fill-opacity="0.4"
                  stroke="#00897B" stroke-width="2"/>

          <!-- ุจุฑฺุณุจโูุง -->
          <text x="120" y="78" text-anchor="middle"
                font-family="Vazirmatn, sans-serif"
                font-size="14" fill="#0D47A1" font-weight="bold">P</text>
          <text x="260" y="78" text-anchor="middle"
                font-family="Vazirmatn, sans-serif"
                font-size="14" fill="#004D40" font-weight="bold">Q</text>
          <text x="190" y="78" text-anchor="middle"
                font-family="Vazirmatn, sans-serif"
                font-size="12" fill="#333">PโงQ</text>

          <!-- ุนููุงู -->
          <text x="200" y="20" text-anchor="middle"
                font-family="Vazirmatn, sans-serif"
                font-size="13" fill="#616161">ูููุฏุงุฑ ูู โ ุงุดุชุฑุงฺฉ ุฏู ูุฌููุนู</text>
        </svg>
        <figcaption>ุดฺฉู ด โ ูููุฏุงุฑ ูู SVG ุฏุฑููโุฎุท</figcaption>
      </figure>
    </section>

    <hr>

    <!-- ==========================================
         ูุตู ต: ฺฉุฏ ู ุงูฺฏูุฑุชู
    ========================================== -->
    <section id="chap5">
      <h2>ต. ฺฉุฏ ู ุงูฺฏูุฑุชู</h2>

      <h3>ต.ฑ ุจููฺฉ ฺฉุฏ Python</h3>
      <pre><code class="language-python">from itertools import product

def is_tautology(formula, variables):
    """Check if a propositional formula is a tautology."""
    for values in product([True, False], repeat=len(variables)):
        env = dict(zip(variables, values))
        if not formula(env):
            return False
    return True

# Example: p โจ ยฌp (Law of Excluded Middle)
result = is_tautology(
    lambda e: e['p'] or (not e['p']),
    ['p']
)
print(f"p โจ ยฌp is tautology: {result}")  # True</code></pre>

      <h3>ต.ฒ ุจููฺฉ ฺฉุฏ JavaScript</h3>
      <pre><code class="language-javascript">// De Morgan's Law verification
function verifyDeMorgan(p, q) {
  const left  = !(p && q);
  const right = (!p) || (!q);
  return left === right;
}

// Test all cases
for (const p of [true, false]) {
  for (const q of [true, false]) {
    console.log(`p=${p}, q=${q}: ${verifyDeMorgan(p, q)}`);
  }
}</code></pre>

      <h3>ต.ณ ุจููฺฉ ฺฉุฏ LaTeX</h3>
      <pre><code class="language-latex">\begin{theorem}{ูุงููู ุฏููุฑฺฏุงู}{demorgan}
  ุจุฑุง ูุฑ ุฏู ฺฏุฒุงุฑู $p$ ู $q$:
  \begin{align}
    \neg(p \land q) &amp;\equiv (\neg p) \lor (\neg q) \\
    \neg(p \lor q)  &amp;\equiv (\neg p) \land (\neg q)
  \end{align}
\end{theorem}</code></pre>

      <h3>ต.ด ุจููฺฉ ฺฉุฏ Bash</h3>
      <pre><code class="language-bash"># Compile LaTeX document
xelatex -interaction=nonstopmode document.tex
biber document
xelatex -interaction=nonstopmode document.tex
xelatex -interaction=nonstopmode document.tex

# Or with latexmk (recommended)
latexmk -xelatex document.tex</code></pre>

      <h3>ต.ต ุจููฺฉ ฺฉุฏ CSS</h3>
      <pre><code class="language-css">/* RTL Support for Persian Content */
html[dir="rtl"] {
  font-family: 'Vazirmatn', 'Tahoma', sans-serif;
  line-height: 1.8;
  text-align: right;
}

html[dir="rtl"] blockquote {
  border-right: 4px solid #1A73E8;
  border-left: none;
  padding-right: 16px;
}

/* Mermaid diagrams always LTR */
.mermaid {
  direction: ltr;
  text-align: center;
}</code></pre>

      <h3>ต.ถ ฺฉุฏ ุฏุฑููโุฎุท</h3>
      <p>
        ุงุฒ ุชุงุจุน <code>is_tautology()</code> ุจุฑุง ุจุฑุฑุณ ุชุงุชูููฺ
        ุงุณุชูุงุฏู ฺฉูุฏ. ุฎุฑูุฌ ุขู <code>True</code> ุง
        <code>False</code> ุงุณุช.
        ูุงู ุงุตู ุฏุฑ ูุณุฑ <code dir="ltr">src/logic/evaluator.py</code>
        ูุฑุงุฑ ุฏุงุฑุฏ.
      </p>

      <h3>ต.ท ุดุจูโฺฉุฏ ุงูฺฏูุฑุชู</h3>
      <div class="note box">
        <div class="box-title">ุงูฺฏูุฑุชู ฑ โ ุจุฑุฑุณ ุชุงุชูููฺ ุจุง ุดูุงุฑุด ฺฉุงูู</div>
        <pre style="background:transparent; border:none; padding:0; font-family:'Vazirmatn',sans-serif; direction:rtl; text-align:right;">
<strong>ูุฑูุฏ:</strong> ูุฑููู ฺฏุฒุงุฑูโุง ฯ ุจุง n ูุชุบุฑ
<strong>ุฎุฑูุฌ:</strong> ุขุง ฯ ุชุงุชูููฺ ุงุณุชุ

<strong>ุจุฑุง</strong> i ุงุฒ ฐ <strong>ุชุง</strong> 2โฟ โ 1 <strong>ุงูุฌุงู ุจุฏู:</strong>
    v โ ุชุฎุตุต ุงุฑุฒุด ูุชูุงุธุฑ ุจุง i
    <strong>ุงฺฏุฑ</strong> Eval(ฯ, v) = โฅ <strong>ุขูฺฏุงู:</strong>
        <strong>ุจุฑฺฏุฑุฏุงู</strong> ยซุฎุฑยป
<strong>ุจุฑฺฏุฑุฏุงู</strong> ยซุจููยป</pre>
      </div>
    </section>

    <hr>

    <!-- ==========================================
         ูุตู ถ: ุนูุงุตุฑ HTML ุฎุงุต
    ========================================== -->
    <section id="chap6">
      <h2>ถ. ุนูุงุตุฑ HTML ุฎุงุต</h2>

      <h3>ถ.ฑ ุจููฺฉ ุชุงุดู (Details / Summary)</h3>
      <details>
        <summary><strong>ุฌุฒุฆุงุช ุงุซุจุงุช ูุงููู ุฏููุฑฺฏุงู (ฺฉูฺฉ ฺฉูุฏ)</strong></summary>
        <p>
          ุงุซุจุงุช ุงุฒ ุทุฑู ุฌุฏูู ุงุฑุฒุด: ูุฑ ฺูุงุฑ ุญุงูุช ููฺฉู ุฑุง ุจุฑุฑุณ ูโฺฉูู.
        </p>
        $$\neg(p \land q) \equiv (\neg p) \lor (\neg q)$$
        <table>
          <tr><th>$p$</th><th>$q$</th><th>ฺูพ</th><th>ุฑุงุณุช</th><th>ุจุฑุงุจุฑุ</th></tr>
          <tr><td>T</td><td>T</td><td>F</td><td>F</td><td>โ</td></tr>
          <tr><td>T</td><td>F</td><td>T</td><td>T</td><td>โ</td></tr>
          <tr><td>F</td><td>T</td><td>T</td><td>T</td><td>โ</td></tr>
          <tr><td>F</td><td>F</td><td>T</td><td>T</td><td>โ</td></tr>
        </table>
        <p>ุชูุงู ุณุชููโูุง ุจุฑุงุจุฑูุฏ. โ</p>
      </details>

      <details>
        <summary><strong>๐ ููุงุจุน ุจุดุชุฑ</strong></summary>
        <ul>
          <li><a href="https://en.wikipedia.org/wiki/De_Morgan%27s_laws" target="_blank">ูฺฉโูพุฏุง โ ููุงูู ุฏููุฑฺฏุงู</a></li>
          <li><a href="https://plato.stanford.edu/entries/logic-classical/" target="_blank">Stanford Encyclopedia โ Classical Logic</a></li>
        </ul>
      </details>

      <h3>ถ.ฒ ูุงูุงุช ู ุนูุงูุชโฺฏุฐุงุฑ</h3>
      <p>
        ุงู ฺฉ <mark>ูุชู ูุงูุงุชโุดุฏู</mark> ุงุณุช.
        ุงู ฺฉ ูุชู <ins>ุงุถุงููโุดุฏู (inserted)</ins> ู
        ุงู ฺฉ ูุชู <del>ุญุฐูโุดุฏู (deleted)</del> ุงุณุช.
        ุงู ฺฉ <small>ูุชู ฺฉูฺฺฉ</small> ู
        ุงู <sup>ุจุงูุงููุดุช</sup> ู ุงู <sub>ุฒุฑููุดุช</sub> ุงุณุช.
      </p>

      <h3>ถ.ณ ฺฉุจูุฑุฏ ู ูุชุบุฑ</h3>
      <p>
        ุจุฑุง ููโูุงุตูู ุฏุฑ ููุฏูุฒ: <kbd>Shift</kbd> + <kbd>Space</kbd>
        <br>
        ุจุฑุง ฺฉุงููพุงู: <kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>B</kbd>
        <br>
        ูุชุบุฑ ุฑุงุถ: <var>x</var> = <var>y</var> + <var>z</var>
      </p>

      <h3>ถ.ด ุขุฏุฑุณ ู ุฒูุงู</h3>
      <address>
        ููุณูุฏู: <a href="mailto:ali@example.com">ููุฏ ุณุงูู</a><br>
        ุฏุงูุดฺฏุงู ุชูุฑุงูุ ุฏุงูุดฺฉุฏู ุฑุงุถ<br>
        ุชูุฑุงูุ ุงุฑุงู
      </address>
      <p>
        ุชุงุฑุฎ ุงูุชุดุงุฑ:
        <time datetime="2025-07-13">ฒฒ ุชุฑ ฑดฐด</time>
        โ ุขุฎุฑู ูุฑุงุด:
        <time datetime="2025-07-13T15:30:00+03:30">ุณุงุนุช ฑต:ณฐ</time>
      </p>

      <h3>ถ.ต ููุงุฑ ูพุดุฑูุช (Progress)</h3>
      <p>
        ูพุดุฑูุช ูพุฑูฺู:
        <progress value="72" max="100" style="width:200px;">72%</progress>
        ทฒูช
      </p>
      <p>
        ุชฺฉูู ุชุณุชโูุง:
        <meter value="0.85" min="0" max="1" low="0.3" high="0.7" optimum="0.9"
               style="width:200px;">85%</meter>
        ธตูช
      </p>

      <h3>ถ.ถ ุฌุนุจูโูุง ูุดุฏุงุฑ (Admonitions)</h3>

      <div class="note box">
        <div class="box-title">๐ ูฺฉุชู</div>
        <p>ุฏุฑ MDX ูุนูููุงู ุงุฒ ฺฉุงููพูููุชโูุง ุณูุงุฑุด ุจุฑุง Admonition ุงุณุชูุงุฏู ูโุดูุฏ.</p>
      </div>

      <div class="warning box">
        <div class="box-title">โ ูุดุฏุงุฑ</div>
        <p>
          ูููุช ูุงุฑุณ ุฏุฑ ูููุฏุงุฑูุง Mermaid ููฺฉู ุงุณุช ุฏุฑ ุจุฑุฎ
          ูุฑูุฑฺฏุฑูุง ุจูโุฏุฑุณุช ููุงุด ุฏุงุฏู ูุดูุฏ.
        </p>
      </div>

      <div class="box" style="background:#FCE4EC; border-color:#C62828;">
        <div class="box-title" style="color:#C62828;">๐ซ ุงุญุชุงุท</div>
        <p>
          ูุจู ุงุฒ ุชุจุฏูุ ูุทูุฆู ุดูุฏ ฺฉู encoding ูุงู
          <code>UTF-8 with BOM</code> ุงุณุช.
        </p>
      </div>

      <div class="box" style="background:#E8F5E9; border-color:#2E7D32;">
        <div class="box-title" style="color:#2E7D32;">๐ก ุฑุงูููุง</div>
        <p>ุจุฑุง ุฑูุฏุฑ ุฑุงุถุงุช ุฏุฑ MDXุ ุงุฒ KaTeX ุง MathJax ุงุณุชูุงุฏู ฺฉูุฏ.</p>
      </div>

      <h3>ถ.ท ูุณุช ูุธุงู</h3>
      <ul style="list-style:none; padding-right:0.5em;">
        <li>โ๏ธ ููุดุชู ุชุนุงุฑู ูพุงู</li>
        <li>โ๏ธ ุงุซุจุงุช ูุถู ุฏููุฑฺฏุงู</li>
        <li>โฌ ุงุซุจุงุช ูุถู ุชูุงูุช ฺฏูุฏู</li>
        <li>โฌ ุจุงุฒุจู ููุง</li>
      </ul>

      <h3>ถ.ธ ูููโููู ุชู ุฏุฑ ุชู</h3>
      <blockquote>
        <p>ยซููุทู ุขุบุงุฒ ุฎุฑุฏ ุงุณุชุ ูู ูพุงุงู ุขู.ยป โ ุงุณูพุงฺฉ</p>
        <blockquote>
          <p>
            <strong>ูุถู ูุงุชูุงูุช ฺฏูุฏู:</strong>
            ุฏุฑ ูุฑ ุณุณุชู ุตูุฑ ุณุงุฒฺฏุงุฑ ฺฉู ุจูโุงูุฏุงุฒู ฺฉุงู ูู ุจุงุดุฏุ
            ฺฏุฒุงุฑูโูุง ูุฌูุฏ ุฏุงุฑูุฏ ฺฉู ูู ุงุซุจุงุชโูพุฐุฑูุฏ ู ูู ุงุจุทุงูโูพุฐุฑ.
          </p>
          <blockquote>
            <p>
              ุงู ูุถู ุฏุฑ ุณุงู ฑนณฑ ุชูุณุท <strong>ฺฉูุฑุช ฺฏูุฏู</strong>
              ููุชุดุฑ ุดุฏ.
              <sup><a href="#fn2" class="footnote-ref" id="fnref2">[ฒ]</a></sup>
            </p>
          </blockquote>
        </blockquote>
      </blockquote>

      <h3>ถ.น Ordered List ุจุง ุงููุงุน ูุฎุชูู</h3>

      <h4>ุนุฏุฏ</h4>
      <ol>
        <li>ุชุนุฑู ูุณุฆูู</li>
        <li>ูุฑููููโุณุงุฒ</li>
        <li>ุงุซุจุงุช</li>
      </ol>

      <h4>ุญุฑูู ูุงุชู</h4>
      <ol type="a">
        <li>ุฑูุด ูุณุชูู</li>
        <li>ุฑูุด ุจุฑูุงู ุฎูู</li>
        <li>ุฑูุด ุงุณุชูุฑุงุก</li>
      </ol>

      <h4>ุฑูู</h4>
      <ol type="i">
        <li>ููุฏูู</li>
        <li>ุจุฏูู ุงุตู</li>
        <li>ูุชุฌูโฺฏุฑ</li>
      </ol>

      <h3>ถ.ฑฐ ูุฑู (ุจุฑุง ุชุณุช ุชุจุฏู ุนูุตุฑ)</h3>
      <form onsubmit="return false;" style="background:var(--bg-light); padding:1rem; border-radius:8px; margin:1rem 0;">
        <fieldset style="border:1px solid var(--border-light); border-radius:8px; padding:1rem;">
          <legend style="font-weight:700; color:var(--primary); padding:0 0.5em;">
            ุจุฑุฑุณ ูุฑููู ููุทู
          </legend>

          <label for="formula-input" style="display:block; margin-bottom:0.3em; font-weight:600;">
            ูุฑููู:
          </label>
          <input
            type="text"
            id="formula-input"
            placeholder="ูุซุงู: p โง q โ p"
            dir="ltr"
            style="width:100%; padding:0.5rem; border:1px solid var(--border-light); border-radius:4px; font-family:monospace; margin-bottom:1rem;"
          >

          <label for="method-select" style="display:block; margin-bottom:0.3em; font-weight:600;">
            ุฑูุด ุงุซุจุงุช:
          </label>
          <select id="method-select"
                  style="width:100%; padding:0.5rem; border:1px solid var(--border-light); border-radius:4px; margin-bottom:1rem;">
            <option value="truth-table">ุฌุฏูู ุงุฑุฒุด</option>
            <option value="natural-deduction">ุงุณุชูุชุงุฌ ุทุจุน</option>
            <option value="tableau">ุชุงุจูู</option>
            <option value="resolution">ุฑุฒูููุดู</option>
          </select>

          <div style="margin-bottom:1rem;">
            <label style="font-weight:600;">ฺฏุฒููโูุง:</label><br>
            <label><input type="checkbox" checked> ููุงุด ุฌุฏูู ุงุฑุฒุด</label><br>
            <label><input type="checkbox"> ููุงุด ุฏุฑุฎุช ุงุซุจุงุช</label><br>
            <label><input type="checkbox"> ุฎุฑูุฌ LaTeX</label>
          </div>

          <div style="margin-bottom:1rem;">
            <label style="font-weight:600;">ุฎุฑูุฌ:</label><br>
            <label><input type="radio" name="output" value="html" checked> HTML</label>
            <label><input type="radio" name="output" value="pdf"> PDF</label>
            <label><input type="radio" name="output" value="mdx"> MDX</label>
          </div>

          <button type="submit"
                  style="background:var(--primary); color:white; border:none; padding:0.6rem 1.5rem; border-radius:6px; font-size:1em; cursor:pointer; font-family:inherit;">
            ๐งฎ ุจุฑุฑุณ ฺฉู
          </button>
        </fieldset>
      </form>
    </section>

    <hr>

    <!-- ==========================================
         ูุตู ท: ูุญุชูุง ุฏูุฒุจุงูู
    ========================================== -->
    <section id="chap7">
      <h2>ท. ูุญุชูุง ุฏูุฒุจุงูู</h2>

      <h3>ท.ฑ ูพุงุฑุงฺฏุฑุงู ุชุฑฺฉุจ ูุงุฑุณ-ุงูฺฏูุณ</h3>
      <p>
        ุฏุฑ ููุทู ุฑุงุถ (<span dir="ltr" lang="en">Mathematical Logic</span>)ุ
        ฺฉ <strong>ฺฏุฒุงุฑู</strong>
        (<span dir="ltr" lang="en">Proposition</span>)
        ุฌูููโุง ุฎุจุฑ ุงุณุช ฺฉู ุฏููุงู ฺฉ ุงุฒ ุฏู ุงุฑุฒุด
        <strong>ุฏุฑุณุช</strong>
        (<span dir="ltr" lang="en">True, $\top$</span>)
        ุง <strong>ูุงุฏุฑุณุช</strong>
        (<span dir="ltr" lang="en">False, $\bot$</span>)
        ุฑุง ุฏุงุฑุฏ. ุงู ููููู ูพุงูโุงโุชุฑู ูุงุญุฏ ุฏุฑ
        <strong>ููุทู ฺฏุฒุงุฑูโุง</strong>
        (<span dir="ltr" lang="en">Propositional Logic</span>) ุงุณุช.
      </p>

      <h3>ท.ฒ ุจููฺฉ ฺฉุงูู ุงูฺฏูุณ ุฏุฑูู ุณูุฏ ูุงุฑุณ</h3>
      <div dir="ltr" lang="en" class="ltr-block"
           style="background:#F5F5F5; padding:1.5rem; border-radius:8px; border-left:4px solid var(--primary); margin:1.5rem 0;">
        <h4 style="color:var(--primary); margin-top:0;">
          Definition (Tautology)
        </h4>
        <p>
          A compound proposition $\varphi$ is a <strong>tautology</strong>
          if and only if it evaluates to <strong>true</strong> under
          every possible truth assignment:
        </p>
        $$\models \varphi \iff \forall\, v : v(\varphi) = \top$$
        <p>
          <strong>Example:</strong> $p \lor \neg p$ is a tautology
          (Law of Excluded Middle).
        </p>
      </div>

      <h3>ท.ณ ุจููฺฉ ฺฉุงูู ุงูฺฏูุณ โ ุงุซุจุงุช</h3>
      <div dir="ltr" lang="en" class="ltr-block"
           style="background:#FFFDE7; padding:1.5rem; border-radius:8px; border-left:4px solid var(--accent-orange); margin:1.5rem 0;">
        <h4 style="color:var(--accent-orange); margin-top:0;">
          Proof (De Morgan's First Law)
        </h4>
        <p>We need to show: $\neg(p \land q) \equiv (\neg p) \lor (\neg q)$</p>
        <p><strong>Forward direction ($\Rightarrow$):</strong></p>
        <p>
          Assume $\neg(p \land q)$. For contradiction, suppose
          $\neg[(\neg p) \lor (\neg q)]$, i.e., $p \land q$.
          This contradicts our assumption.
        </p>
        <p><strong>Backward direction ($\Leftarrow$):</strong></p>
        <p>
          Assume $(\neg p) \lor (\neg q)$. If $p \land q$, then both
          $p$ and $q$ hold, contradicting $\neg p$ or $\neg q$. โ
        </p>
      </div>

      <h3>ท.ด ุฌุฏูู ุฏูุฒุจุงูู</h3>
      <table>
        <caption>ุฌุฏูู ด โ ูุงฺูโูุงูู ูุงุฑุณ-ุงูฺฏูุณ</caption>
        <thead>
          <tr>
            <th>ูุงุฑุณ</th>
            <th dir="ltr">English</th>
            <th>ููุงุฏ</th>
            <th>ุชูุถุญ</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>ฺฏุฒุงุฑู</td>
            <td dir="ltr">Proposition</td>
            <td>$p, q, r$</td>
            <td>ุฌููู ุฎุจุฑ ุจุง ุงุฑุฒุด ุฏุฑุณุช/ูุงุฏุฑุณุช</td>
          </tr>
          <tr>
            <td>ุชุงุชูููฺ</td>
            <td dir="ltr">Tautology</td>
            <td>$\top$</td>
            <td>ููุดู ุฏุฑุณุช</td>
          </tr>
          <tr>
            <td>ุชูุงูุถ</td>
            <td dir="ltr">Contradiction</td>
            <td>$\bot$</td>
            <td>ููุดู ูุงุฏุฑุณุช</td>
          </tr>
          <tr>
            <td>ุณูุฑ ุนููู</td>
            <td dir="ltr">Universal Quantifier</td>
            <td>$\forall$</td>
            <td>ุจุฑุง ููู</td>
          </tr>
          <tr>
            <td>ุณูุฑ ูุฌูุฏ</td>
            <td dir="ltr">Existential Quantifier</td>
            <td>$\exists$</td>
            <td>ูุฌูุฏ ุฏุงุฑุฏ</td>
          </tr>
        </tbody>
      </table>
    </section>

    <hr>

    <!-- ==========================================
         ูุตู ธ: ูุฑูููโูุง ูพุดุฑูุชู
    ========================================== -->
    <section id="chap8">
      <h2>ธ. ูุฑูููโูุง ูพุดุฑูุชู ุฑุงุถ</h2>

      <h3>ธ.ฑ ูุงุชุฑุณ</h3>
      $$
      A = \begin{pmatrix}
        a_{11} & a_{12} & \cdots & a_{1n} \\
        a_{21} & a_{22} & \cdots & a_{2n} \\
        \vdots & \vdots & \ddots & \vdots \\
        a_{m1} & a_{m2} & \cdots & a_{mn}
      \end{pmatrix}
      ,\qquad
      \vec{x} = \begin{pmatrix} x_1 \\ x_2 \\ \vdots \\ x_n \end{pmatrix}
      $$

      <h3>ธ.ฒ ูุฌููุน ู ุงูุชฺฏุฑุงู</h3>
      $$
      \sum_{k=0}^{\infty} \frac{x^k}{k!} = e^x
      ,\qquad
      \int_{-\infty}^{+\infty} e^{-x^2}\,dx = \sqrt{\pi}
      $$

      <h3>ธ.ณ ูุฑูููโูุง ูุฒฺฉ (ูุนุงุฏูุงุช ูุงฺฉุณูู)</h3>
      $$
      \begin{aligned}
        \nabla \cdot \mathbf{E} &= \frac{\rho}{\epsilon_0}
          &\quad& \text{(ูุงููู ฺฏุงูุณ)} \\
        \nabla \cdot \mathbf{B} &= 0
          &\quad& \text{(ูุจูุฏ ุชฺฉโูุทุจ ูุบูุงุทุณ)} \\
        \nabla \times \mathbf{E} &= -\frac{\partial \mathbf{B}}{\partial t}
          &\quad& \text{(ูุงููู ูุงุฑุงุฏู)} \\
        \nabla \times \mathbf{B} &= \mu_0 \mathbf{J}
          + \mu_0 \epsilon_0 \frac{\partial \mathbf{E}}{\partial t}
          &\quad& \text{(ูุงููู ุขููพุฑ-ูุงฺฉุณูู)}
      \end{aligned}
      $$

      <h3>ธ.ด ุญุงูุชโูุง (Cases)</h3>
      $$
      |x| = \begin{cases}
        x  & \text{ุงฺฏุฑ } x \geq 0 \\
        -x & \text{ุงฺฏุฑ } x < 0
      \end{cases}
      $$

      <h3>ธ.ต ุงุณุชูุฑุงุก ุฑุงุถ</h3>
      <p><strong>ูุถู:</strong> $\displaystyle\sum_{k=1}^{n} k = \frac{n(n+1)}{2}$</p>

      <p><strong>ูพุงู:</strong></p>
      $$\sum_{k=1}^{1} k = 1 = \frac{1 \cdot 2}{2} \;\checkmark$$

      <p><strong>ฺฏุงู ุงุณุชูุฑุงุก:</strong></p>
      $$
      \begin{aligned}
        \sum_{k=1}^{m+1} k
        &= \left(\sum_{k=1}^{m} k\right) + (m+1) \\
        &= \frac{m(m+1)}{2} + (m+1) \\
        &= \frac{(m+1)(m+2)}{2} \quad\blacksquare
      \end{aligned}
      $$

      <h3>ธ.ถ ุฒูุฌุฑู ุงุณุชุฏูุงู</h3>
      <div class="proof box">
        <div class="box-title">ุงุซุจุงุช: $\{p \to q,\; q \to r\} \vdash p \to r$</div>
        <table style="width:auto; margin:0;">
          <thead>
            <tr><th>ุฎุท</th><th>ูุฑููู</th><th>ุชูุฌู</th></tr>
          </thead>
          <tbody>
            <tr><td>ฑ</td><td>$p \to q$</td><td>ูุฑุถ</td></tr>
            <tr><td>ฒ</td><td>$q \to r$</td><td>ูุฑุถ</td></tr>
            <tr><td>ณ</td><td>$p$</td><td>ูุฑุถ (ุจุฑุง ูุนุฑู ุดุฑุท)</td></tr>
            <tr><td>ด</td><td>$q$</td><td>ุญุฐู ุดุฑุท: ฑุ ณ</td></tr>
            <tr><td>ต</td><td>$r$</td><td>ุญุฐู ุดุฑุท: ฒุ ด</td></tr>
            <tr><td>ถ</td><td>$p \to r$</td><td>ูุนุฑู ุดุฑุท: ณโต โ</td></tr>
          </tbody>
        </table>
      </div>

      <h3>ธ.ท ูุฑูููโูุง ูุธุฑู ูุฌููุนูโูุง</h3>
      $$
      \begin{aligned}
        A \cup B &= \{x \mid x \in A \lor x \in B\} \\
        A \cap B &= \{x \mid x \in A \land x \in B\} \\
        \mathcal{P}(A) &= \{S \mid S \subseteq A\} \\
        |A \cup B| &= |A| + |B| - |A \cap B|
      \end{aligned}
      $$

      <h3>ธ.ธ ุชุงุจุน ุฒุชุง ุฑูุงู</h3>
      $$
      \zeta(s) = \sum_{n=1}^{\infty} \frac{1}{n^s}
               = \prod_{p \text{ prime}} \frac{1}{1 - p^{-s}}
      \qquad (\operatorname{Re}(s) > 1)
      $$

      <h3>ธ.น ุชุนุฑู ุงูพุณููู-ุฏูุชุง ุญุฏ</h3>
      $$
      \lim_{x \to a} f(x) = L
      \;\;\Longleftrightarrow\;\;
      \forall \epsilon > 0\;\;
      \exists \delta > 0\;\;
      \forall x\;\;
      \Big(0 < |x - a| < \delta \implies |f(x) - L| < \epsilon\Big)
      $$

      <h3>ธ.ฑฐ ูุฑููู ุฏุฑููโุฎุท ูุงุฑุณ-ุงูฺฏูุณ</h3>
      <p>
        ูุทุงุจู <a href="#thm-demorgan">ูุถู ฑ.ฑ</a>ุ
        ุงฺฏุฑ $p$ ุจุงูฺฏุฑ ยซููุง ุจุงุฑุงู ุงุณุชยป ู $q$ ุจุงูฺฏุฑ
        ยซููุง ุณุฑุฏ ุงุณุชยป ุจุงุดุฏุ ุขูฺฏุงู
        $\neg(p \land q)$ ุนู ยซ<em>ููุง ุจุงุฑุงู ู ุณุฑุฏ ูุณุช</em>ยป
        ูุนุงุฏู ุงุณุช ุจุง
        $(\neg p) \lor (\neg q)$ ุนู
        ยซ<em>ููุง ุจุงุฑุงู ูุณุช <strong>ุง</strong> ุณุฑุฏ ูุณุช</em>ยป.
      </p>
    </section>

    <hr>

    <!-- ==========================================
         ูพุงููุดุชโูุง
    ========================================== -->
    <section id="chap-footnotes" class="footnotes">
      <h2>ูพุงููุดุชโูุง</h2>
      <ol>
        <li id="fn1">
          ุงุตู ุทุฑุฏ ุดู ุซุงูุซ
          (<span dir="ltr" lang="en">Law of Excluded Middle</span>)
          ุฏุฑ ููุทู ุดููุฏ
          (<span dir="ltr" lang="en">Intuitionistic Logic</span>)
          ูพุฐุฑูุชู ูุณุช. ุจุฑุง ุฌุฒุฆุงุช ุจุดุชุฑ ุจู ููุงูู ฺฏูุฏู (ฑนณฑ) ูุฑุงุฌุนู ฺฉูุฏ.
          <a href="#fnref1" title="ุจุงุฒฺฏุดุช">โฉ</a>
        </li>
        <li id="fn2">
          Kurt Gรถdel,
          <cite>"รber formal unentscheidbare Sรคtze der Principia
          Mathematica und verwandter Systeme I"</cite>,
          <span dir="ltr" lang="en">Monatshefte fรผr Mathematik und Physik</span>,
          38: 173โ198, 1931.
          <a href="#fnref2" title="ุจุงุฒฺฏุดุช">โฉ</a>
        </li>
        <li id="fn3">
          ููโูุงุตูู
          (<span dir="ltr" lang="en">Zero-Width Non-Joiner, U+200C</span>)
          ฺฉุงุฑุงฺฉุชุฑ ูุงูุฑุฆ ุงุณุช ฺฉู ุฏุฑ ูุงุฑุณ ุจู ูพุดููุฏ/ูพุณููุฏ ู ุฑุดู
          ูุฑุงุฑ ูโฺฏุฑุฏ: ยซูโุฑููยปุ ยซฺฉุชุงุจโูุงยป.
          <a href="#fnref3" title="ุจุงุฒฺฏุดุช">โฉ</a>
        </li>
      </ol>
    </section>

    <hr>

    <!-- ==========================================
         ฺฉุชุงุจโูุงูู
    ========================================== -->
    <section id="chap-bib">
      <h2>๐ ฺฉุชุงุจโูุงูู</h2>
      <ol style="font-size:0.95em;">
        <li id="ref-knuth">
          <span dir="ltr" lang="en">
            Knuth, D. E. (1997).
            <cite>The Art of Computer Programming</cite>,
            Vol. 1, 3rd ed. Addison-Wesley.
          </span>
        </li>
        <li id="ref-godel">
          <span dir="ltr" lang="en">
            Gรถdel, K. (1931).
            <cite>"รber formal unentscheidbare Sรคtze der Principia
            Mathematica und verwandter Systeme I"</cite>.
            Monatshefte fรผr Mathematik und Physik, 38, 173โ198.
          </span>
        </li>
        <li id="ref-ebrahimi">
          ุงุจุฑุงููุ ูุญูุฏ (ฑณนน).
          <cite>ูุจุงู ููุทู ุฑุงุถ</cite>.
          ุงูุชุดุงุฑุงุช ุฏุงูุดฺฏุงู ุชูุฑุงู.
        </li>
        <li id="ref-mdn">
          <span dir="ltr" lang="en">
            MDN Web Docs (2024).
            <cite>"MathML"</cite>.
            <a href="https://developer.mozilla.org/en-US/docs/Web/MathML"
               target="_blank" rel="noopener">
              developer.mozilla.org
            </a>.
            Accessed: 2024-12-01.
          </span>
        </li>
        <li id="ref-vazirmatn">
          <span dir="ltr" lang="en">
            Rastikerdar, S. (2024).
            <cite>"Vazirmatn Font"</cite>.
            <a href="https://github.com/rastikerdar/vazirmatn"
               target="_blank" rel="noopener">
              github.com/rastikerdar/vazirmatn
            </a>.
          </span>
        </li>
      </ol>
    </section>

    <hr>

    <!-- ==========================================
         ูพุงุตูุญู
    ========================================== -->
    <footer>
      <p>
        โ๏ธ ููุณูุฏู: ููุฏ ุณุงูู
        &nbsp;|&nbsp;
        ๐ ุชุงุจุณุชุงู ฑดฐด โ Summer 2025
        &nbsp;|&nbsp;
        ๐ ูุฌูุฒ:
        <a href="https://opensource.org/licenses/MIT" target="_blank" rel="noopener">MIT</a>
      </p>
      <p>
        ๐ ูุฎุฒู:
        <a href="https://github.com/example/format-converter"
           target="_blank" rel="noopener" dir="ltr">
          github.com/example/format-converter
        </a>
      </p>
      <p style="margin-top:1rem; font-size:0.8em; color:#999;">
        ุงู ุณูุฏ ุตุฑูุงู ุฌูุช ุชุณุช ุชุจุฏู ูุฑูุช HTML โ MDX ุชูู ุดุฏู ุงุณุช.
      </p>
    </footer>

  </div><!-- /.container -->
</body>
</html>
```

---

## ถ. ูุงู DOCX โ ุฑุงูููุง ุณุงุฎุช ุจุง PowerShell

ฺูู ูุงู DOCX ุจุงูุฑ ุงุณุช ู ููโุชูุงู ุขู ุฑุง ูุณุชููุงู ุฏุฑ ูุชู ุงุฑุงุฆู ุฏุงุฏุ ุงุณฺฉุฑูพุช ุฒุฑ ฺฉ ูุงู DOCX ููููู ุจุง ุงุณุชูุงุฏู ุงุฒ **COM Object** ูุฑุฏ (ุง ุฌุงฺฏุฒู: `pandoc`) ูโุณุงุฒุฏ:

### ุฑูุด ฑ: ุจุง Pandoc (ูพุดููุงุฏ)

```powershell
# ============================================================
#  create-docx.ps1
#  ุณุงุฎุช ูุงู DOCX ููููู ุงุฒ Markdown ุจุง pandoc
# ============================================================

$OutputDir = ".\test-files"
New-Item -ItemType Directory -Force -Path $OutputDir | Out-Null

$mdFile  = Join-Path $OutputDir "sample-mermaid.md"
$docxOut = Join-Path $OutputDir "sample-book.docx"

# ุจุฑุฑุณ ูุฌูุฏ pandoc
if (-not (Get-Command "pandoc" -ErrorAction SilentlyContinue)) {
    Write-Host @"
โ pandoc ุงูุช ูุดุฏ!
ูุตุจ ฺฉูุฏ:
  winget install JohnMacFarlane.Pandoc
  # ุง
  choco install pandoc

ุง ุงุฒ https://pandoc.org/installing.html ุฏุงูููุฏ ฺฉูุฏ.
"@ -ForegroundColor Red
    exit 1
}

# ุจุฑุฑุณ ูุฌูุฏ ูุงู MD
if (-not (Test-Path $mdFile)) {
    Write-Host "โ ูุงู $mdFile ุงูุช ูุดุฏ." -ForegroundColor Red
    Write-Host "ุงุจุชุฏุง ูุญุชูุง Markdown ุฑุง ุฏุฑ $mdFile ุฐุฎุฑู ฺฉูุฏ." -ForegroundColor Yellow
    exit 1
}

Write-Host "๐ ุชุจุฏู MD โ DOCX ุจุง pandoc..." -ForegroundColor Cyan

pandoc $mdFile `
    -o $docxOut `
    --from=markdown+tex_math_dollars+pipe_tables+task_lists+definition_lists+footnotes `
    --to=docx `
    --toc `
    --toc-depth=3 `
    --number-sections `
    --highlight-style=tango `
    --metadata title="ููููู ุฌุงูุน ูุงุฑฺฉโุฏุงูู ูุงุฑุณ" `
    --metadata author="ุชู ุชุณุช" `
    --metadata date="ุชุงุจุณุชุงู ฑดฐด" `
    --metadata lang="fa" `
    --metadata dir="rtl"

if ($LASTEXITCODE -eq 0) {
    Write-Host "โ ูุงู DOCX ุณุงุฎุชู ุดุฏ: $docxOut" -ForegroundColor Green

    # ููุงุด ุญุฌู
    $size = (Get-Item $docxOut).Length
    Write-Host "   ๐ฆ ุญุฌู: $([math]::Round($size/1KB, 1)) KB" -ForegroundColor Gray
} else {
    Write-Host "โ ุฎุทุง ุฏุฑ ุชุจุฏู." -ForegroundColor Red
}
```

### ุฑูุด ฒ: ุจุง COM Object ูุฑุฏ (ุจุฏูู ูุงุฒ ุจู pandoc)

```powershell
# ============================================================
#  create-docx-com.ps1
#  ุณุงุฎุช ูุงู DOCX ุจุง COM Object ูุงฺฉุฑูุณุงูุช ูุฑุฏ
#  ูุงุฒ: Microsoft Word ูุตุจโุดุฏู
# ============================================================

$OutputDir = ".\test-files"
New-Item -ItemType Directory -Force -Path $OutputDir | Out-Null
$docxPath = (Resolve-Path $OutputDir).Path + "\sample-book-com.docx"

try {
    $word = New-Object -ComObject Word.Application
    $word.Visible = $false
    $doc = $word.Documents.Add()

    # --- ุชูุธูุงุช RTL ---
    $doc.Content.ParagraphFormat.ReadingOrder = 0  # wdReadingOrderRtl
    $doc.Content.Font.Name = "B Nazanin"
    $doc.Content.Font.Size = 14

    # --- ุนููุงู ---
    $range = $doc.Content
    $range.InsertAfter("ูุจุงู ููุทู ุฑุงุถ ู ุงุซุจุงุชโูุง ุตูุฑ`n")
    $range.Paragraphs.Item(1).Style = "Heading 1"
    $range.InsertParagraphAfter()

    # --- ุฒุฑุนููุงู ---
    $range = $doc.Content
    $range.InsertAfter("Foundations of Mathematical Logic and Formal Proofs`n")
    $range.InsertParagraphAfter()

    # --- ูพุงุฑุงฺฏุฑุงู ---
    $range = $doc.Content
    $range.InsertAfter(
        "ุงู ุณูุฏ ุจูโุนููุงู ฺฉ ููููู ุฌุงูุน ุชุณุช ุทุฑุงุญ ุดุฏู " +
        "ู ุดุงูู ุชูุงู ุงุฌุฒุง ฺฉ ฺฉุชุงุจ ุญุฑููโุง ุฑุงุถโููุทู ุงุณุช.`n"
    )
    $range.InsertParagraphAfter()

    # --- ุชุนุฑู ---
    $range = $doc.Content
    $range.InsertAfter("ุชุนุฑู (ฺฏุฒุงุฑู):`n")
    $range.Paragraphs.Item($doc.Paragraphs.Count).Style = "Heading 2"
    $range.InsertParagraphAfter()

    $range = $doc.Content
    $range.InsertAfter(
        "ฺฏุฒุงุฑู ุฌูููโุง ุฎุจุฑ ุงุณุช ฺฉู ุฏููุงู ฺฉ ุงุฒ ุฏู " +
        "ุงุฑุฒุด ยซุฏุฑุณุชยป (True) ุง ยซูุงุฏุฑุณุชยป (False) ุฑุง ุฏุงุฑุฏ.`n"
    )
    $range.InsertParagraphAfter()

    # --- ูุถู ---
    $range = $doc.Content
    $range.InsertAfter("ูุถู (ุฏููุฑฺฏุงู):`n")
    $range.Paragraphs.Item($doc.Paragraphs.Count).Style = "Heading 2"
    $range.InsertParagraphAfter()

    $range = $doc.Content
    $range.InsertAfter("ยฌ(p โง q) โก (ยฌp) โจ (ยฌq)`n")
    $range.InsertParagraphAfter()

    # --- ุฌุฏูู ---
    $range = $doc.Content
    $range.InsertAfter("ุฌุฏูู ุงุฑุฒุด:`n")
    $range.Paragraphs.Item($doc.Paragraphs.Count).Style = "Heading 3"
    $range.InsertParagraphAfter()

    $tableRange = $doc.Content
    $tableRange.Collapse(0) # wdCollapseEnd
    $table = $doc.Tables.Add($tableRange, 5, 4) # 5 rows x 4 cols
    $table.Borders.Enable = $true
    $table.Style = "Table Grid"

    # ูุฏุฑ
    $table.Cell(1,1).Range.Text = "p"
    $table.Cell(1,2).Range.Text = "q"
    $table.Cell(1,3).Range.Text = "ยฌ(pโงq)"
    $table.Cell(1,4).Range.Text = "(ยฌp)โจ(ยฌq)"

    # ุฏุงุฏูโูุง
    $data = @(
        @("T","T","F","F"),
        @("T","F","T","T"),
        @("F","T","T","T"),
        @("F","F","T","T")
    )
    for ($i = 0; $i -lt 4; $i++) {
        for ($j = 0; $j -lt 4; $j++) {
            $table.Cell($i+2, $j+1).Range.Text = $data[$i][$j]
        }
    }

    # --- ุฐุฎุฑู ---
    $doc.SaveAs2($docxPath, 16) # wdFormatXMLDocument = 16
    Write-Host "โ ูุงู DOCX ุณุงุฎุชู ุดุฏ: $docxPath" -ForegroundColor Green

} catch {
    Write-Host "โ ุฎุทุง: $_" -ForegroundColor Red
} finally {
    if ($doc)  { $doc.Close($false) }
    if ($word) { $word.Quit() }
    [System.Runtime.InteropServices.Marshal]::ReleaseComObject($word) | Out-Null
}
```

---

## ท. ูุงู PDF โ ุฑุงูููุง ุณุงุฎุช

### ุฑูุด ฑ: ุงุฒ LaTeX (ุจูุชุฑู ฺฉูุช)

```powershell
# ============================================================
#  create-pdf-from-latex.ps1
# ============================================================

$texFile = ".\test-files\sample-book.tex"
$outDir  = ".\test-files"

if (-not (Get-Command "xelatex" -ErrorAction SilentlyContinue)) {
    Write-Host "โ XeLaTeX ุงูุช ูุดุฏ! TeX Live ุง MiKTeX ูุตุจ ฺฉูุฏ." -ForegroundColor Red
    exit 1
}

Write-Host "๐ ฺฉุงููพุงู LaTeX โ PDF..." -ForegroundColor Cyan

Push-Location $outDir
xelatex -interaction=nonstopmode (Resolve-Path $texFile)

# ุงฺฏุฑ biber ูุตุจ ุงุณุช
if (Get-Command "biber" -ErrorAction SilentlyContinue) {
    biber "sample-book"
    xelatex -interaction=nonstopmode (Resolve-Path $texFile)
}

xelatex -interaction=nonstopmode (Resolve-Path $texFile)
Pop-Location

$pdfPath = Join-Path $outDir "sample-book.pdf"
if (Test-Path $pdfPath) {
    $size = (Get-Item $pdfPath).Length
    Write-Host "โ ูุงู PDF ุณุงุฎุชู ุดุฏ: $pdfPath" -ForegroundColor Green
    Write-Host "   ๐ฆ ุญุฌู: $([math]::Round($size/1KB, 1)) KB" -ForegroundColor Gray
} else {
    Write-Host "โ ูุงู PDF ุณุงุฎุชู ูุดุฏ. ูุงฺฏ ุฑุง ุจุฑุฑุณ ฺฉูุฏ." -ForegroundColor Red
}
```

### ุฑูุด ฒ: ุงุฒ HTML ุจุง pandoc/wkhtmltopdf

```powershell
# ============================================================
#  create-pdf-from-html.ps1
# ============================================================

$htmlFile = ".\test-files\sample-page.html"
$pdfOut   = ".\test-files\sample-page.pdf"

# ุฑูุด ุงูู: pandoc
pandoc $htmlFile -o $pdfOut `
    --pdf-engine=xelatex `
    --variable mainfont="Vazirmatn" `
    --variable mainfontoptions="Script=Arabic" `
    --variable geometry:margin=2.5cm

# ุฑูุด ุจ: wkhtmltopdf (ุงฺฏุฑ ูุตุจ ุจุงุดุฏ)
# wkhtmltopdf --encoding utf-8 --enable-local-file-access $htmlFile $pdfOut
```

---

## ธ. ุงุณฺฉุฑูพุช ุงุตู โ ุณุงุฎุช ุชูุงู ูุงูโูุง

```powershell
# ============================================================
#  create-all-test-files.ps1
#  ุงุณฺฉุฑูพุช ุงุตู: ุณุงุฎุช ุชูุงู ูุงูโูุง ุชุณุช
# ============================================================

param(
    [string]$OutputDir = ".\test-files",
    [switch]$SkipDocx,
    [switch]$SkipPdf
)

$ErrorActionPreference = "Stop"

Write-Host @"
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ   ๐งช ุณุงุฎุช ูุงูโูุง ุชุณุช ุชุจุฏู ูุฑูุช ุจู MDX      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ
โ   ูุฑูุชโูุง: LaTeX, HTML, Markdown, DOCX, PDF     โ
โ   ุฒุจุงู: ูุงุฑุณ + ุงูฺฏูุณ                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
"@ -ForegroundColor Cyan

# --- ุณุงุฎุช ูพูุดู ---
New-Item -ItemType Directory -Force -Path $OutputDir | Out-Null
Write-Host "๐ ูพูุดู: $OutputDir" -ForegroundColor Gray

# --- ุชุงุจุน ุฐุฎุฑู UTF-8 BOM ---
function Save-Utf8Bom {
    param([string]$Path, [string]$Content)
    $utf8Bom = [System.Text.UTF8Encoding]::new($true)
    [System.IO.File]::WriteAllText(
        (Join-Path (Get-Location) $Path),
        $Content,
        $utf8Bom
    )
    $size = (Get-Item $Path).Length
    Write-Host "  โ $Path ($([math]::Round($size/1KB,1)) KB)" -ForegroundColor Green
}

# --- ุจุฑุฑุณ ุงุจุฒุงุฑูุง ---
Write-Host "`n๐ ุจุฑุฑุณ ุงุจุฒุงุฑูุง ูุตุจโุดุฏู:" -ForegroundColor Yellow
$tools = @{
    "xelatex" = "XeLaTeX (TeX Live / MiKTeX)"
    "biber"   = "Biber (bibliography)"
    "pandoc"  = "Pandoc (document converter)"
}
foreach ($tool in $tools.GetEnumerator()) {
    $found = Get-Command $tool.Key -ErrorAction SilentlyContinue
    $status = if ($found) { "โ" } else { "โ (ุงุฎุชุงุฑ)" }
    Write-Host "  $status $($tool.Value)" -ForegroundColor (
        if ($found) { "Green" } else { "Yellow" }
    )
}

# --- ุฑุงูููุง ---
Write-Host @"

๐ ูุฑุงุญู:
  1. ูุญุชูุง LaTeX ุฑุง ุงุฒ ฺุช ฺฉูพ ฺฉูุฏ โ $OutputDir\sample-book.tex
  2. ูุญุชูุง Markdown ุฑุง ฺฉูพ ฺฉูุฏ    โ $OutputDir\sample-mermaid.md
  3. ูุญุชูุง HTML ุฑุง ฺฉูพ ฺฉูุฏ        โ $OutputDir\sample-page.html
  4. ุงู ุงุณฺฉุฑูพุช ุฑุง ุงุฌุฑุง ฺฉูุฏ ุจุฑุง ุณุงุฎุช DOCX ู PDF

"@ -ForegroundColor White

# --- ูุงูโูุง placeholder ุจุง BOM ---
Write-Host "๐ ุณุงุฎุช ูุงูโูุง placeholder:" -ForegroundColor Yellow

$files = @{
    "$OutputDir\sample-book.tex" = @"
% ูุญุชูุง LaTeX ุฑุง ุงุฒ ฺุช ฺฉูพ ฺฉูุฏ
% Compiler: XeLaTeX | Encoding: UTF-8 BOM
\documentclass{book}
\usepackage{fontspec}
\usepackage{xepersian}
\settextfont{IRLotus}
\begin{document}
ูุญุชูุง ุฑุง ุฌุงฺฏุฒู ฺฉูุฏ.
\end{document}
"@
    "$OutputDir\sample-mermaid.md" = @"
---
title: "ููููู ุชุณุช"
lang: "fa"
dir: "rtl"
---
# ูุญุชูุง ุฑุง ุงุฒ ฺุช ฺฉูพ ฺฉูุฏ
"@
    "$OutputDir\sample-page.html" = @"
<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head><meta charset="UTF-8"><title>ููููู</title></head>
<body><h1>ูุญุชูุง ุฑุง ุงุฒ ฺุช ฺฉูพ ฺฉูุฏ</h1></body>
</html>
"@
}

foreach ($file in $files.GetEnumerator()) {
    Save-Utf8Bom -Path $file.Key -Content $file.Value
}

# --- ุจุฑุฑุณ encoding ---
Write-Host "`n๐ ุจุฑุฑุณ encoding:" -ForegroundColor Yellow
Get-ChildItem $OutputDir -File | ForEach-Object {
    $bytes = [System.IO.File]::ReadAllBytes($_.FullName)
    $hasBom = ($bytes.Length -ge 3 -and
               $bytes[0] -eq 0xEF -and
               $bytes[1] -eq 0xBB -and
               $bytes[2] -eq 0xBF)
    $icon = if ($hasBom) { "โ" } else { "โ๏ธ" }
    $enc  = if ($hasBom) { "UTF-8 BOM" } else { "No BOM" }
    Write-Host "  $icon $($_.Name): $enc" -ForegroundColor (
        if ($hasBom) { "Green" } else { "Yellow" }
    )
}

# --- DOCX (ุงุฎุชุงุฑ) ---
if (-not $SkipDocx) {
    Write-Host "`n๐ ุณุงุฎุช DOCX:" -ForegroundColor Yellow
    $mdFile = "$OutputDir\sample-mermaid.md"
    $docxOut = "$OutputDir\sample-book.docx"

    if (Get-Command "pandoc" -ErrorAction SilentlyContinue) {
        pandoc $mdFile -o $docxOut `
            --from=markdown+tex_math_dollars+pipe_tables+task_lists+footnotes `
            --to=docx --toc --number-sections `
            --metadata title="ููููู ุฌุงูุน" `
            --metadata lang="fa" 2>$null

        if (Test-Path $docxOut) {
            $size = (Get-Item $docxOut).Length
            Write-Host "  โ $docxOut ($([math]::Round($size/1KB,1)) KB)" -ForegroundColor Green
        }
    } else {
        Write-Host "  โญ pandoc ูุตุจ ูุณุช โ DOCX ุณุงุฎุชู ูุดุฏ" -ForegroundColor Yellow
    }
}

# --- PDF (ุงุฎุชุงุฑ) ---
if (-not $SkipPdf) {
    Write-Host "`n๐ ุณุงุฎุช PDF:" -ForegroundColor Yellow
    $texFile = "$OutputDir\sample-book.tex"
    $pdfOut  = "$OutputDir\sample-book.pdf"

    if (Get-Command "xelatex" -ErrorAction SilentlyContinue) {
        Push-Location $OutputDir
        xelatex -interaction=nonstopmode "sample-book.tex" 2>$null | Out-Null
        if (Get-Command "biber" -ErrorAction SilentlyContinue) {
            biber "sample-book" 2>$null | Out-Null
            xelatex -interaction=nonstopmode "sample-book.tex" 2>$null | Out-Null
        }
        xelatex -interaction=nonstopmode "sample-book.tex" 2>$null | Out-Null
        Pop-Location

        if (Test-Path $pdfOut) {
            $size = (Get-Item $pdfOut).Length
            Write-Host "  โ $pdfOut ($([math]::Round($size/1KB,1)) KB)" -ForegroundColor Green
        }
    } else {
        Write-Host "  โญ XeLaTeX ูุตุจ ูุณุช โ PDF ุณุงุฎุชู ูุดุฏ" -ForegroundColor Yellow
    }
}

# --- ุฎูุงุตู ููุง ---
Write-Host @"

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ   โ ุชูุงู ุดุฏ!                                   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ
โ   ูุงูโูุง:                                      โ
โ     ๐

<!-- POSSIBLE OVERLAP DETECTED (similarity: 85%) - REVIEW BELOW -->

ุงุฏุงูู ุงุณฺฉุฑูพุช ุงุตู ู ุณูพุณ ูุงูโูุง ุชฺฉูู:

```powershell
# --- ุฎูุงุตู ููุง (ุงุฏุงูู) ---
Write-Host @"

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ   โ ุชูุงู ุดุฏ!                                   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ
โ   ูุงูโูุง:                                      โ
โ     ๐ sample-book.tex      (LaTeX)             โ
โ     ๐ sample-mermaid.md    (Markdown+Mermaid)  โ
โ     ๐ sample-page.html    (HTML)              โ
โ     ๐ sample-book.docx    (DOCX)              โ
โ     ๐ sample-book.pdf     (PDF)               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ
โ   ูุฑุงุญู ุจุนุฏ:                                   โ
โ   1. ูุญุชูุง ูุฑ ูุงู ุฑุง ุงุฒ ฺุช ฺฉูพ ฺฉูุฏ          โ
โ   2. ูุงูโูุง ุฑุง ุจู ุชุจุฏูโฺฏุฑ MDX ุจุฏูุฏ           โ
โ   3. ุฎุฑูุฌ ุฑุง ุจุง ฺฺฉโูุณุช ููุงุณู ฺฉูุฏ            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
"@ -ForegroundColor Cyan

# --- ูุณุช ูุงูโูุง ---
Write-Host "`n๐ ูุงูโูุง ููุฌูุฏ ุฏุฑ $OutputDir`:" -ForegroundColor Yellow
Get-ChildItem $OutputDir -File | ForEach-Object {
    $size = [math]::Round($_.Length / 1KB, 1)
    $ext = $_.Extension.ToUpper().TrimStart('.')
    $icon = switch ($ext) {
        "TEX"  { "๐" }
        "MD"   { "๐" }
        "HTML" { "๐" }
        "DOCX" { "๐" }
        "PDF"  { "๐" }
        default { "๐" }
    }
    Write-Host "  $icon $($_.Name) โ $size KB" -ForegroundColor Gray
}

Write-Host "`n๐ ุงุณฺฉุฑูพุช ุจุง ููููุช ุจู ูพุงุงู ุฑุณุฏ.`n" -ForegroundColor Green
```

---

## น. ูุงู RST (reStructuredText) ููููู โ ูุงุฑุณ

ุจุฑุง ูพูุดุด ฺฉุงููโุชุฑ ูุฑูุชโูุงุ ฺฉ ูุงู RST ูุฒ ุงุถุงูู ูโฺฉูู:

```rst
.. meta::
   :description: ููููู ุฌุงูุน reStructuredText ูุงุฑุณ ุจุฑุง ุชุณุช ุชุจุฏู ุจู MDX
   :author: ุชู ุชุณุช
   :language: fa
   :dir: rtl

.. role:: fa
   :class: persian

.. role:: en
   :class: english

========================================
ูุจุงู ููุทู ุฑุงุถ ู ุงุซุจุงุชโูุง ุตูุฑ
========================================

:ููุณูุฏู: ููุฏ ุณุงูู (Mahdi Salem)
:ุชุงุฑุฎ: ุชุงุจุณุชุงู ฑดฐด
:ูุณุฎู: 1.0
:ูุงฺูโูุง ฺฉูุฏ: ููุทูุ ุฑุงุถุ ุงุซุจุงุชุ ุฏููุฑฺฏุงู

.. contents:: ููุฑุณุช ูุทุงูุจ
   :depth: 3
   :local:

----

ููุฏูู ู ููุงูู ูพุงู
====================

ุงู ุณูุฏ ุจูโุนููุงู ฺฉ **ููููู ุฌุงูุน ุชุณุช** ุทุฑุงุญ ุดุฏู ู ุดุงูู ุชูุงู
ุงุฌุฒุง ฺฉ ุณูุฏ ุญุฑููโุง ุฑุงุถ-ููุทู ุฏุฑ ูุฑูุช
reStructuredText (:en:`RST`) ุงุณุช.

.. note::

   ุชูุงู ุงุฑุฌุงุนุงุชุ ูพุงููุดุชโูุง ู ฺฉุชุงุจโูุงูู ุงู ุณูุฏ ุตุฑูุงู ุฌูุช ุชุณุช ูุณุชูุฏ.
   ุจุฑุง ูุทุงูุนู ุจุดุชุฑ ุจู [Knuth1997]_ ู [Ebrahimi1399]_ ูุฑุงุฌุนู ฺฉูุฏ.

.. warning::

   ุงู ูุงู ุจุงุฏ ุจุง encoding **UTF-8** ุฐุฎุฑู ุดูุฏ.
   ุญุชูุงู ุงุฒ ูุฑุงุดฺฏุฑ ุงุณุชูุงุฏู ฺฉูุฏ ฺฉู ููโูุงุตูู (ZWNJ) ุฑุง ุญูุธ ฺฉูุฏ.

ุชุนุงุฑู
------

.. admonition:: ุชุนุฑู ฑ.ฑ โ ฺฏุฒุงุฑู (Proposition)

   **ฺฏุฒุงุฑู** ุฌูููโุง ุฎุจุฑ ุงุณุช ฺฉู ุฏููุงู ฺฉ ุงุฒ ุฏู ุงุฑุฒุด
   ยซุฏุฑุณุชยป (True, โค) ุง ยซูุงุฏุฑุณุชยป (False, โฅ) ุฑุง ุฏุงุฑุฏ.

   .. pull-quote::

      A *proposition* is a declarative sentence that is either
      **true** or **false**, but not both.

.. admonition:: ุชุนุฑู ฑ.ฒ โ ุชุงุชูููฺ (Tautology)

   ฺฏุฒุงุฑู ูุฑฺฉุจ ฯ ฺฉ **ุชุงุชูููฺ** ุงุณุช ุงฺฏุฑ ู ุชููุง ุงฺฏุฑ
   ุชุญุช *ูุฑ* ุชุฎุตุต ุงุฑุฒุดุ ููุฏุงุฑ ุขู ุฏุฑุณุช (โค) ุจุงุดุฏ.

   .. math::

      \models \varphi \iff \forall\, v : v(\varphi) = \top

ูุถุงุง ู ุงุซุจุงุช
--------------

.. admonition:: ูุถู ฑ.ฑ โ ูุงููู ุฏููุฑฺฏุงู (De Morgan's Laws)
   :class: theorem

   ุจุฑุง ูุฑ ุฏู ฺฏุฒุงุฑู :math:`p` ู :math:`q`:

   .. math::

      \neg(p \land q) &\equiv (\neg p) \lor (\neg q) \\
      \neg(p \lor q)  &\equiv (\neg p) \land (\neg q)

.. admonition:: ุงุซุจุงุช
   :class: proof

   ุงุซุจุงุช ุฑุง ุจุง ุฌุฏูู ุงุฑุฒุด ุงูุฌุงู ูโุฏูู.
   ุฌุฏูู ฺฉุงูู ุฏุฑ `ุฌุฏูู ุงุฑุฒุด ุฏููุฑฺฏุงู`_ ุขูุฏู ุงุณุช.
   ุจุง ุจุฑุฑุณ ุชูุงู ุญุงูุงุชุ ุณุชููโูุง ูุฑุจูุทู ุจุฑุงุจุฑูุฏ. โ

.. admonition:: ูุซุงู ฑ.ฑ
   :class: example

   ูุฑุถ ฺฉูุฏ :math:`p`: ยซููุง ุจุงุฑุงู ุงุณุชยป ู :math:`q`: ยซููุง ุณุฑุฏ ุงุณุชยป.
   ุขูฺฏุงู:

   .. math::

      \neg(p \land q) \equiv \text{ยซููุง ุจุงุฑุงู ูุณุช \textbf{ุง} ุณุฑุฏ ูุณุชยป}

ูุถู ุงุตู ุทุฑุฏ ุดู ุซุงูุซ
~~~~~~~~~~~~~~~~~~~~~

.. admonition:: ูุถู ฑ.ฒ
   :class: theorem

   ุจุฑุง ูุฑ ฺฏุฒุงุฑู :math:`p`:

   .. math::

      \models\; p \lor \neg p

   ุงู ูุถู ุจู **ุงุตู ุทุฑุฏ ุดู ุซุงูุซ** (Law of Excluded Middle) ูุนุฑูู ุงุณุช. [#f1]_

.. admonition:: ุงุซุจุงุช
   :class: proof

   ุฏู ุญุงูุช ูุฌูุฏ ุฏุงุฑุฏ:

   - ุงฺฏุฑ :math:`p = \top`: ุขูฺฏุงู :math:`p \lor \neg p = \top \lor \bot = \top` โ
   - ุงฺฏุฑ :math:`p = \bot`: ุขูฺฏุงู :math:`p \lor \neg p = \bot \lor \top = \top` โ

   ูพุณ ุฏุฑ ูุฑ ุฏู ุญุงูุช ููุฏุงุฑ ุฏุฑุณุช ุงุณุช. โ

----

ุฌุฏูู ุงุฑุฒุด ู ุนููฺฏุฑูุง
====================

.. _ุฌุฏูู ุงุฑุฒุด ุฏููุฑฺฏุงู:

ุฌุฏูู ุงุฑุฒุด ุฏููุฑฺฏุงู
------------------

.. table:: ุฌุฏูู ฑ โ ุฌุฏูู ุงุฑุฒุด ููุงูู ุฏููุฑฺฏุงู
   :widths: 10 10 20 25 10

   ===  ===  ================  =======================  ======
    p    q    ยฌ(p โง q)          (ยฌp) โจ (ยฌq)             ุจุฑุงุจุฑุ
   ===  ===  ================  =======================  ======
    T    T    F                  F                        โ
    T    F    T                  T                        โ
    F    T    T                  T                        โ
    F    F    T                  T                        โ
   ===  ===  ================  =======================  ======

ุฌุฏูู ุนููฺฏุฑูุง ููุทู
--------------------

.. csv-table:: ุฌุฏูู ฒ โ ุนููฺฏุฑูุง ููุทู ูพุงู
   :header: "ุนููฺฏุฑ", "ููุงุฏ", "ูุงู ุงูฺฏูุณ", "ูุซุงู"
   :widths: 15, 10, 25, 15

   "ููุถ", "ยฌ", "Negation", "ยฌp"
   "ุนุทู", "โง", "Conjunction", "p โง q"
   "ูุตู", "โจ", "Disjunction", "p โจ q"
   "ุดุฑุท", "โ", "Implication", "p โ q"
   "ุฏูุดุฑุท", "โ", "Biconditional", "p โ q"

ุฌุฏูู ููุงุณู ุณุณุชูโูุง ุงุซุจุงุช
----------------------------

.. list-table:: ุฌุฏูู ณ โ ููุงุณู ุณุณุชูโูุง ุงุซุจุงุช
   :header-rows: 1
   :widths: 20 15 10 10 20

   * - ุณุณุชู
     - ููุน
     - ุชูุงูุช
     - ุณุงุฒฺฏุงุฑ
     - ฺฉุงุฑุจุฑุฏ
   * - ููุจุฑุช
     - ุงุตูโููุถูุน
     - โ
     - โ
     - ูุจุงู ูุธุฑ
   * - ุงุณุชูุชุงุฌ ุทุจุน
     - ูุงุนุฏูโูุญูุฑ
     - โ
     - โ
     - ุขููุฒุด
   * - ุชุงุจูู
     - ุฏุฑุฎุช
     - โ
     - โ
     - ุงุซุจุงุช ุฎูุฏฺฉุงุฑ
   * - ุฑุฒูููุดู
     - ูฺฉุงูุฒู
     - โ [#f2]_
     - โ
     - SAT Solvers

----

ูุฑูููโูุง ุฑุงุถ
===============

ูุฑููู ุฏุฑููโุฎุท
--------------

ูุงููู ุฏููุฑฺฏุงู: :math:`\neg(p \land q) \equiv (\neg p) \lor (\neg q)`

ูุงุชุฑุณ
-------

.. math::

   A = \begin{pmatrix}
     a_{11} & a_{12} & \cdots & a_{1n} \\
     a_{21} & a_{22} & \cdots & a_{2n} \\
     \vdots & \vdots & \ddots & \vdots \\
     a_{m1} & a_{m2} & \cdots & a_{mn}
   \end{pmatrix}

ูุฌููุน ู ุงูุชฺฏุฑุงู
----------------

.. math::

   \sum_{k=0}^{\infty} \frac{x^k}{k!} = e^x
   ,\qquad
   \int_{-\infty}^{+\infty} e^{-x^2}\,dx = \sqrt{\pi}

ูุฑูููโูุง ูุฒฺฉ (ูุงฺฉุณูู)
-------------------------

.. math::

   \begin{aligned}
     \nabla \cdot \mathbf{E} &= \frac{\rho}{\epsilon_0}
       &\quad& \text{(ูุงููู ฺฏุงูุณ)} \\
     \nabla \cdot \mathbf{B} &= 0
       &\quad& \text{(ูุจูุฏ ุชฺฉโูุทุจ)} \\
     \nabla \times \mathbf{E} &= -\frac{\partial \mathbf{B}}{\partial t}
       &\quad& \text{(ูุงุฑุงุฏู)} \\
     \nabla \times \mathbf{B} &= \mu_0 \mathbf{J}
       + \mu_0 \epsilon_0 \frac{\partial \mathbf{E}}{\partial t}
       &\quad& \text{(ุขููพุฑ-ูุงฺฉุณูู)}
   \end{aligned}

ุญุงูุชโูุง (Cases)
---------------

.. math::

   |x| = \begin{cases}
     x  & \text{ุงฺฏุฑ } x \geq 0 \\
     -x & \text{ุงฺฏุฑ } x < 0
   \end{cases}

ุงุณุชูุฑุงุก ุฑุงุถ
--------------

**ูุถู:** ุจุฑุง ูุฑ :math:`n \in \mathbb{N}`:

.. math::

   \sum_{k=1}^{n} k = \frac{n(n+1)}{2}

**ูพุงู:** :math:`n = 1`:

.. math::

   \sum_{k=1}^{1} k = 1 = \frac{1 \cdot 2}{2} \;\checkmark

**ฺฏุงู ุงุณุชูุฑุงุก:**

.. math::

   \sum_{k=1}^{m+1} k = \frac{m(m+1)}{2} + (m+1) = \frac{(m+1)(m+2)}{2} \quad\blacksquare

----

ฺฉุฏ ู ุงูฺฏูุฑุชู
=============

ฺฉุฏ Python
---------

.. code-block:: python
   :linenos:
   :caption: ุจุฑุฑุณ ุชุงุชูููฺ
   :name: lst-tautology

   from itertools import product

   def is_tautology(formula, variables):
       """Check if a propositional formula is a tautology."""
       for values in product([True, False], repeat=len(variables)):
           env = dict(zip(variables, values))
           if not formula(env):
               return False
       return True

   # Example: p โจ ยฌp
   result = is_tautology(
       lambda e: e['p'] or (not e['p']),
       ['p']
   )
   print(f"p โจ ยฌp is tautology: {result}")  # True

ฺฉุฏ JavaScript
--------------

.. code-block:: javascript
   :linenos:
   :caption: ุจุฑุฑุณ ูุงููู ุฏููุฑฺฏุงู

   function verifyDeMorgan(p, q) {
     const left  = !(p && q);
     const right = (!p) || (!q);
     return left === right;
   }

   for (const p of [true, false]) {
     for (const q of [true, false]) {
       console.log(`p=${p}, q=${q}: ${verifyDeMorgan(p, q)}`);
     }
   }

ฺฉุฏ LaTeX
--------

.. code-block:: latex
   :caption: ููููู ูุถู ุฏุฑ LaTeX

   \begin{theorem}{ูุงููู ุฏููุฑฺฏุงู}{demorgan}
     ุจุฑุง ูุฑ ุฏู ฺฏุฒุงุฑู $p$ ู $q$:
     \begin{align}
       \neg(p \land q) &\equiv (\neg p) \lor (\neg q) \\
       \neg(p \lor q)  &\equiv (\neg p) \land (\neg q)
     \end{align}
   \end{theorem}

ฺฉุฏ Bash
-------

.. code-block:: bash
   :caption: ฺฉุงููพุงู LaTeX

   # Compile with XeLaTeX
   xelatex -interaction=nonstopmode document.tex
   biber document
   xelatex -interaction=nonstopmode document.tex
   xelatex -interaction=nonstopmode document.tex

ฺฉุฏ ุฏุฑููโุฎุท
-----------

ุงุฒ ุชุงุจุน ``is_tautology()`` ุจุฑุง ุจุฑุฑุณ ุชุงุชูููฺ ุงุณุชูุงุฏู ฺฉูุฏ.
ูุงู ุงุตู ุฏุฑ ูุณุฑ ``src/logic/evaluator.py`` ูุฑุงุฑ ุฏุงุฑุฏ.

----

ุชุตุงูุฑ ู ุฑุณุงูู
===============

ุชุตูุฑ ุณุงุฏู
-----------

.. figure:: https://via.placeholder.com/600x300/1A73E8/FFFFFF?text=Mathematical+Logic
   :alt: ูููุฏุงุฑ ููุทู ุฑุงุถ
   :width: 600px
   :align: center

   ุดฺฉู ฑ โ ูููุฏุงุฑ ููููู ููุทู ุฑุงุถ

ุชุตูุฑ ุจุง ููฺฉ
--------------

.. figure:: https://via.placeholder.com/400x200/00897B/FFFFFF?text=Click+for+Wikipedia
   :alt: ูฺฉโูพุฏุง
   :target: https://en.wikipedia.org/wiki/Mathematical_logic
   :width: 400px
   :align: center

   ุดฺฉู ฒ โ ฺฉูฺฉ ฺฉูุฏ ุชุง ุจู ูฺฉโูพุฏุง ุจุฑูุฏ

----

ููฺฉโูุง ู ุงุฑุฌุงุนุงุช
==================

ููฺฉโูุง ุฎุงุฑุฌ
--------------

- `ูฺฉโูพุฏุง โ ููุทู ุฑุงุถ <https://en.wikipedia.org/wiki/Mathematical_logic>`_
- `Stanford Encyclopedia โ Classical Logic <https://plato.stanford.edu/entries/logic-classical/>`_
- `Mermaid Documentation <https://mermaid.js.org/>`_

ุงุฑุฌุงุนุงุช ูุชูุงุทุน
---------------

- ุงุฑุฌุงุน ุจู ูุถู: `ูุถุงุง ู ุงุซุจุงุช`_
- ุงุฑุฌุงุน ุจู ุฌุฏูู: `ุฌุฏูู ุงุฑุฒุด ุฏููุฑฺฏุงู`_
- ุงุฑุฌุงุน ุจู ฺฉุฏ: :ref:`lst-tautology <lst-tautology>`

----

ูุญุชูุง ุฏูุฒุจุงูู
===============

ูพุงุฑุงฺฏุฑุงู ุชุฑฺฉุจ
-----------------

ุฏุฑ ููุทู ุฑุงุถ (Mathematical Logic)ุ ฺฉ **ฺฏุฒุงุฑู** (Proposition)
ุฌูููโุง ุฎุจุฑ ุงุณุช ฺฉู ุฏููุงู ฺฉ ุงุฒ ุฏู ุงุฑุฒุด **ุฏุฑุณุช** (True, โค)
ุง **ูุงุฏุฑุณุช** (False, โฅ) ุฑุง ุฏุงุฑุฏ.

ุจููฺฉ ุงูฺฏูุณ
-------------

.. container:: ltr-block

   **Definition (Tautology)**

   A compound proposition ฯ is a **tautology** if and only if it
   evaluates to **true** under every possible truth assignment:

   .. math::

      \models \varphi \iff \forall\, v : v(\varphi) = \top

   **Example:** :math:`p \lor \neg p` is a tautology
   (Law of Excluded Middle).

----

ุนูุงุตุฑ ุฎุงุต RST
==============

ูููโููู
-------

   ยซููุทู ุขุบุงุฒ ุฎุฑุฏ ุงุณุชุ ูู ูพุงุงู ุขู.ยป โ ุงุณูพุงฺฉ

.. epigraph::

   In mathematics, you don't understand things.
   You just get used to them.

   -- John von Neumann

.. pull-quote::

   ูุถู ูุงุชูุงูุช ฺฏูุฏู ูุดุงู ูโุฏูุฏ ฺฉู ุฏุฑ ูุฑ ุณุณุชู ุตูุฑ
   ุณุงุฒฺฏุงุฑ ู ุจูโุงูุฏุงุฒู ฺฉุงู ููุ ฺฏุฒุงุฑูโูุง ุงุซุจุงุชโูุงูพุฐุฑ ูุฌูุฏ ุฏุงุฑูุฏ.

ุญุงุดูโููุณ (Sidebar)
-----------------------

.. sidebar:: ูุงฺูโูุงูู ุณุฑุน

   :ุชุงุชูููฺ: ููุดู ุฏุฑุณุช
   :ุชูุงูุถ: ููุดู ูุงุฏุฑุณุช
   :ุงููุงุนโูพุฐุฑ: ฺฏุงู ุฏุฑุณุช

ุงู ูุชู ุฏุฑ ฺฉูุงุฑ ุญุงุดูโููุณ ูุฑุงุฑ ูโฺฏุฑุฏ ู ูุดุงูโุฏููุฏู
ุนููฺฉุฑุฏ sidebar ุฏุฑ reStructuredText ุงุณุช.

ูุณุช ุชุนุงุฑู
-----------

ุชุงุชูููฺ (Tautology)
   ฺฏุฒุงุฑูโุง ูุฑฺฉุจ ฺฉู ุชุญุช ูุฑ ุชุฎุตุต ุงุฑุฒุดุ ุฏุฑุณุช ุงุณุช.

ุชูุงูุถ (Contradiction)
   ฺฏุฒุงุฑูโุง ูุฑฺฉุจ ฺฉู ุชุญุช ูุฑ ุชุฎุตุต ุงุฑุฒุดุ ูุงุฏุฑุณุช ุงุณุช.

ุงููุงุนโูพุฐุฑ (Satisfiable)
   ฺฏุฒุงุฑูโุง ูุฑฺฉุจ ฺฉู ุญุฏุงูู ฺฉ ุชุฎุตุต ุงุฑุฒุด ุขู ุฑุง ุฏุฑุณุช ูโฺฉูุฏ.

ูุณุช ููุฏ
----------

:ูุงู: ููุฏ ุณุงูู
:ุงูู: ali@example.com
:ุฏุงูุดฺฏุงู: ุฏุงูุดฺฏุงู ุชูุฑุงู
:ุฑุดุชู: ููุทู ุฑุงุถ
:ุณุงู: ฑดฐด

.. topic:: ูฺฉุชู ููู

   ุฏุฑ RSTุ ุนูุงุตุฑ ``topic``ุ ``sidebar``ุ ``admonition``
   ู ``container`` ููฺฏ ูโุชูุงููุฏ ุจู ฺฉุงููพูููุชโูุง MDX
   ุชุจุฏู ุดููุฏ.

.. tip::

   ุจุฑุง ุฑูุฏุฑ ุตุญุญ ุฑุงุถุงุช ุฏุฑ MDXุ ุงุฒ KaTeX ุง MathJax ุงุณุชูุงุฏู ฺฉูุฏ.

.. danger::

   ูููุช ูุงุฑุณ ุฏุฑ ุจุฑุฎ ูุญุทโูุง ููฺฉู ุงุณุช ุจูโุฏุฑุณุช ููุงุด ุฏุงุฏู ูุดูุฏ.
   ุญุชูุงู encoding ุฑุง ุจุฑุฑุณ ฺฉูุฏ.

.. deprecated:: 2.0
   ุงุฒ ``old_function()`` ุงุณุชูุงุฏู ูฺฉูุฏ. ุจูโุฌุง ุขู ุงุฒ
   ``new_function()`` ุงุณุชูุงุฏู ฺฉูุฏ.

.. versionadded:: 1.5
   ูพุดุชุจุงู ุงุฒ ููุทู ูุญูููุงุช ูุฑุชุจู ุงูู ุงุถุงูู ุดุฏ.

.. versionchanged:: 2.0
   ุงูฺฏูุฑุชู ุจุฑุฑุณ ุชุงุชูููฺ ุจููู ุดุฏ.

ุฌุงฺฏุฒู ูุชู
-------------

.. |date| date::
.. |time| date:: %H:%M

ุงู ุณูุฏ ุฏุฑ ุชุงุฑุฎ |date| ู ุณุงุนุช |time| ุชููุฏ ุดุฏู ุงุณุช.

.. |logo| image:: https://via.placeholder.com/24x24/1A73E8/FFFFFF?text=L
   :alt: ููฺฏู

ุงู |logo| ูุดุงูโุฏููุฏู ููฺฏู ูพุฑูฺู ุงุณุช.

----

ูพุงููุดุชโูุง
=========

.. [#f1] ุงุตู ุทุฑุฏ ุดู ุซุงูุซ (Law of Excluded Middle)
   ุฏุฑ ููุทู ุดููุฏ (Intuitionistic Logic) ูพุฐุฑูุชู ูุณุช.

.. [#f2] ููุท ุจุฑุง ูุฑู ูุฑูุงู ุนุทู (CNF).

.. [#f3] ููโูุงุตูู (Zero-Width Non-Joiner, U+200C) ฺฉุงุฑุงฺฉุชุฑ ูุงูุฑุฆ
   ุงุณุช ฺฉู ุฏุฑ ูุงุฑุณ ุจู ูพุดููุฏ/ูพุณููุฏ ู ุฑุดู ูุฑุงุฑ ูโฺฏุฑุฏ.

----

ฺฉุชุงุจโูุงูู
=========

.. [Knuth1997] Knuth, D. E. (1997). *The Art of Computer Programming*,
   Vol. 1, 3rd ed. Addison-Wesley.

.. [Godel1931] Gรถdel, K. (1931). "รber formal unentscheidbare Sรคtze
   der Principia Mathematica und verwandter Systeme I".
   *Monatshefte fรผr Mathematik und Physik*, 38, 173โ198.

.. [Ebrahimi1399] ุงุจุฑุงููุ ูุญูุฏ (ฑณนน). *ูุจุงู ููุทู ุฑุงุถ*.
   ุงูุชุดุงุฑุงุช ุฏุงูุดฺฏุงู ุชูุฑุงู.

.. [MDN2024] MDN Web Docs (2024). "MathML".
   https://developer.mozilla.org/en-US/docs/Web/MathML

----

.. footer::

   โ๏ธ ููุณูุฏู: ููุฏ ุณุงูู |
   ๐ ุชุงุจุณุชุงู ฑดฐด |
   ๐ ูุฌูุฒ: MIT
```

---

## ฑฐ. ูุงู AsciiDoc ููููู โ ูุงุฑุณ

```asciidoc
= ูุจุงู ููุทู ุฑุงุถ ู ุงุซุจุงุชโูุง ุตูุฑ
ููุฏ ุณุงูู <ali@example.com>
v1.0, ุชุงุจุณุชุงู ฑดฐด
:doctype: book
:lang: fa
:toc: right
:toc-title: ููุฑุณุช ูุทุงูุจ
:toclevels: 3
:sectnums:
:sectnumlevels: 3
:icons: font
:source-highlighter: highlight.js
:stem: latexmath
:imagesdir: ./images
:experimental:
:xrefstyle: full
:chapter-label: ูุตู
:appendix-caption: ูพูุณุช
:caution-caption: ุงุญุชุงุท
:example-caption: ูุซุงู
:figure-caption: ุดฺฉู
:important-caption: ููู
:note-caption: ูฺฉุชู
:table-caption: ุฌุฏูู
:tip-caption: ุฑุงูููุง
:warning-caption: ูุดุฏุงุฑ

[abstract]
== ฺฺฉุฏู

ุงู ุณูุฏ ฺฉ *ููููู ุฌุงูุน* AsciiDoc ูุงุฑุณ-ุงูฺฏูุณ ุงุณุช ฺฉู ุจุฑุง ุชุณุช
ุชุจุฏู ูุฑูุช ุจู **MDX** ุทุฑุงุญ ุดุฏู. ุชูุงู ุนูุงุตุฑ ููู ฺฉ ฺฉุชุงุจ
ุญุฑููโุง ุฑุงุถ-ููุทู ุฏุฑ ุขู ูพูุดุด ุฏุงุฏู ุดุฏูโุงูุฏ.

---

== ููุฏูู ู ููุงูู ูพุงู

ุงู ุณูุฏ ุจูโุนููุงู ฺฉ **ููููู ุฌุงูุน ุชุณุช** ุทุฑุงุญ ุดุฏู ู ุดุงูู ุชูุงู
ุงุฌุฒุง ฺฉ ุณูุฏ ุญุฑููโุง ุฑุงุถ-ููุทู ุงุณุช.

NOTE: ุชูุงู ุงุฑุฌุงุนุงุชุ ูพุงููุดุชโูุง ู ฺฉุชุงุจโูุงูู ุตุฑูุงู ุฌูุช ุชุณุช ูุณุชูุฏ.

WARNING: ุงู ูุงู ุจุงุฏ ุจุง encoding *UTF-8* ุฐุฎุฑู ุดูุฏ.

=== ุชุนุงุฑู

[NOTE]
====
*ุชุนุฑู ฑ.ฑ โ ฺฏุฒุงุฑู (Proposition)*

**ฺฏุฒุงุฑู** ุฌูููโุง ุฎุจุฑ ุงุณุช ฺฉู ุฏููุงู ฺฉ ุงุฒ ุฏู ุงุฑุฒุด ยซุฏุฑุณุชยป
(True, โค) ุง ยซูุงุฏุฑุณุชยป (False, โฅ) ุฑุง ุฏุงุฑุฏ.
====

[NOTE]
====
*ุชุนุฑู ฑ.ฒ โ ุชุงุชูููฺ (Tautology)*

ฺฏุฒุงุฑู ูุฑฺฉุจ ฯ ฺฉ **ุชุงุชูููฺ** ุงุณุช ุงฺฏุฑ ู ุชููุง ุงฺฏุฑ:

[stem]
++++
\models \varphi \iff \forall\, v : v(\varphi) = \top
++++
====

=== ูุถุงุง ู ุงุซุจุงุช

[[thm-demorgan]]
.ูุถู ฑ.ฑ โ ูุงููู ุฏููุฑฺฏุงู
****
ุจุฑุง ูุฑ ุฏู ฺฏุฒุงุฑู stem:[p] ู stem:[q]:

[stem]
++++
\neg(p \land q) \equiv (\neg p) \lor (\neg q)
++++

[stem]
++++
\neg(p \lor q) \equiv (\neg p) \land (\neg q)
++++
****

.ุงุซุจุงุช
[%collapsible]
====
ุงุซุจุงุช ุฑุง ุจุง ุฌุฏูู ุงุฑุฒุด ุงูุฌุงู ูโุฏูู.
ุฌุฏูู ฺฉุงูู ุฏุฑ <<tab-demorgan>> ุขูุฏู ุงุณุช.
ุจุง ุจุฑุฑุณ ุชูุงู ุญุงูุงุชุ ุณุชููโูุง ูุฑุจูุทู ุจุฑุงุจุฑูุฏ. โ
====

.ูุซุงู ฑ.ฑ
====
ูุฑุถ ฺฉูุฏ stem:[p]: ยซููุง ุจุงุฑุงู ุงุณุชยป ู stem:[q]: ยซููุง ุณุฑุฏ ุงุณุชยป. ุขูฺฏุงู:

[stem]
++++
\neg(p \land q) \equiv \text{ยซููุง ุจุงุฑุงู ูุณุช ุง ุณุฑุฏ ูุณุชยป}
++++
====

---

== ุฌุฏูู ุงุฑุฒุด ู ุนููฺฏุฑูุง

[[tab-demorgan]]
.ุฌุฏูู ฑ โ ุฌุฏูู ุงุฑุฒุด ููุงูู ุฏููุฑฺฏุงู
[cols="^1,^1,^2,^3,^1",options="header"]
|===
| p | q | ยฌ(p โง q) | (ยฌp) โจ (ยฌq) | ุจุฑุงุจุฑุ

| T | T | F | F | โ
| T | F | T | T | โ
| F | T | T | T | โ
| F | F | T | T | โ
|===

.ุฌุฏูู ฒ โ ุนููฺฏุฑูุง ููุทู
[cols="15,10,25,15",options="header"]
|===
| ุนููฺฏุฑ | ููุงุฏ | ูุงู ุงูฺฏูุณ | ูุซุงู

| ููุถ | ยฌ | Negation | ยฌp
| ุนุทู | โง | Conjunction | p โง q
| ูุตู | โจ | Disjunction | p โจ q
| ุดุฑุท | โ | Implication | p โ q
| ุฏูุดุฑุท | โ | Biconditional | p โ q
|===

.ุฌุฏูู ณ โ ุณุณุชูโูุง ุงุซุจุงุช (ุจุง ุงุฏุบุงู ุณููู)
[cols="20,15,^10,^10,20",options="header"]
|===
| ุณุณุชู | ููุน | ุชูุงูุช | ุณุงุฒฺฏุงุฑ | ฺฉุงุฑุจุฑุฏ

| ููุจุฑุช | ุงุตูโููุถูุน | โ | โ | ูุจุงู ูุธุฑ
| ุงุณุชูุชุงุฌ ุทุจุน | ูุงุนุฏูโูุญูุฑ | โ | โ | ุขููุฒุด
| ุชุงุจูู | ุฏุฑุฎุช | โ | โ | ุงุซุจุงุช ุฎูุฏฺฉุงุฑ
| ุฑุฒูููุดู | ูฺฉุงูุฒู | โfootnote:[ููุท ุจุฑุง CNF] | โ | SAT Solvers
|===

---

== ูุฑูููโูุง ุฑุงุถ

=== ูุฑููู ุฏุฑููโุฎุท

ูุงููู ุฏููุฑฺฏุงู: stem:[\neg(p \land q) \equiv (\neg p) \lor (\neg q)]

=== ูุงุชุฑุณ

[stem]
++++
A = \begin{pmatrix}
  a_{11} & a_{12} & \cdots & a_{1n} \\
  a_{21} & a_{22} & \cdots & a_{2n} \\
  \vdots & \vdots & \ddots & \vdots \\
  a_{m1} & a_{m2} & \cdots & a_{mn}
\end{pmatrix}
++++

=== ูุฌููุน ู ุงูุชฺฏุฑุงู

[stem]
++++
\sum_{k=0}^{\infty} \frac{x^k}{k!} = e^x
\qquad
\int_{-\infty}^{+\infty} e^{-x^2}\,dx = \sqrt{\pi}
++++

=== ุญุงูุชโูุง

[stem]
++++
|x| = \begin{cases}
  x  & \text{ุงฺฏุฑ } x \geq 0 \\
  -x & \text{ุงฺฏุฑ } x < 0
\end{cases}
++++

---

== ฺฉุฏ ู ุงูฺฏูุฑุชู

=== Python

[source,python,linenums]
----
from itertools import product

def is_tautology(formula, variables):
    """Check if a propositional formula is a tautology."""
    for values in product([True, False], repeat=len(variables)):
        env = dict(zip(variables, values))
        if not formula(env):
            return False
    return True

result = is_tautology(
    lambda e: e['p'] or (not e['p']),
    ['p']
)
print(f"p โจ ยฌp is tautology: {result}")
----

=== JavaScript

[source,javascript,linenums]
----
function verifyDeMorgan(p, q) {
  const left  = !(p && q);
  const right = (!p) || (!q);
  return left === right;
}

for (const p of [true, false]) {
  for (const q of [true, false]) {
    console.log(`p=${p}, q=${q}: ${verifyDeMorgan(p, q)}`);
  }
}
----

=== ฺฉุฏ ุฏุฑููโุฎุท

ุงุฒ ุชุงุจุน `is_tautology()` ุงุณุชูุงุฏู ฺฉูุฏ.
ูุงู ุฏุฑ ูุณุฑ `src/logic/evaluator.py` ูุฑุงุฑ ุฏุงุฑุฏ.

---

== ุชุตุงูุฑ

.ุดฺฉู ฑ โ ูููุฏุงุฑ ููุทู ุฑุงุถ
image::https://via.placeholder.com/600x300/1A73E8/FFFFFF?text=Logic+Diagram[ูููุฏุงุฑ ููุทู,600,300]

.ุดฺฉู ฒ โ ููุดู ุฐูู
image::https://via.placeholder.com/400x400/00897B/FFFFFF?text=Mind+Map[ููุดู ุฐูู,400,400]

---

== ููฺฉโูุง ู ุงุฑุฌุงุนุงุช

=== ููฺฉโูุง ุฎุงุฑุฌ

* https://en.wikipedia.org/wiki/Mathematical_logic[ูฺฉโูพุฏุง โ ููุทู ุฑุงุถ]
* https://plato.stanford.edu/entries/logic-classical/[Stanford Encyclopedia]
* https://mermaid.js.org/[Mermaid Documentation]

=== ุงุฑุฌุงุนุงุช ูุชูุงุทุน

* ุงุฑุฌุงุน ุจู ูุถู: <<thm-demorgan>>
* ุงุฑุฌุงุน ุจู ุฌุฏูู: <<tab-demorgan>>

---

== ูุญุชูุง ุฏูุฒุจุงูู

=== ูพุงุฑุงฺฏุฑุงู ุชุฑฺฉุจ

ุฏุฑ ููุทู ุฑุงุถ (Mathematical Logic)ุ ฺฉ **ฺฏุฒุงุฑู** (Proposition)
ุฌูููโุง ุฎุจุฑ ุงุณุช.

=== ุจููฺฉ ุงูฺฏูุณ

[.text-left]
--
*Definition (Tautology)*

A compound proposition ฯ is a *tautology* if and only if:

[stem]
++++
\models \varphi \iff \forall\, v : v(\varphi) = \top
++++
--

---

== ุนูุงุตุฑ ุฎุงุต AsciiDoc

=== ูููโููู

[quote, ุงุณูพุงฺฉ, Star Trek]
____
ููุทู ุขุบุงุฒ ุฎุฑุฏ ุงุณุชุ ูู ูพุงุงู ุขู.
____

[quote, John von Neumann]
____
In mathematics, you don't understand things. You just get used to them.
____

=== ุฌุนุจูโูุง

TIP: ุจุฑุง ุฑูุฏุฑ ุฑุงุถุงุช ุฏุฑ MDXุ ุงุฒ KaTeX ุง MathJax ุงุณุชูุงุฏู ฺฉูุฏ.

IMPORTANT: ุจุณุชู `xepersian` ุจุงุฏ **ุขุฎุฑู** ุจุณุชู ุจุงุฑฺฏุฐุงุฑโุดุฏู ุจุงุดุฏ.

CAUTION: encoding ูุงู ุญุชูุงู UTF-8 ุจุงุดุฏ.

=== ูุณุชโูุง

.ูุณุช ุบุฑูุฑุชุจ
* ููุทู ฺฏุฒุงุฑูโุง
** ุฌุฏูู ุงุฑุฒุด
** ุชุงุชูููฺ
* ููุทู ูุญูููุงุช
** ุณูุฑ ุนููู
** ุณูุฑ ูุฌูุฏ

.ูุณุช ูุฑุชุจ
. ุชุนุฑู ูุณุฆูู
. ูุฑููููโุณุงุฒ
. ุงุซุจุงุช
.. ุฑูุด ูุณุชูู
.. ุจุฑูุงู ุฎูู
.. ุงุณุชูุฑุงุก
. ูุชุฌูโฺฏุฑ

.ูุณุช ูุธุงู
* [x] ููุดุชู ุชุนุงุฑู
* [x] ุงุซุจุงุช ุฏููุฑฺฏุงู
* [ ] ุงุซุจุงุช ุชูุงูุช ฺฏูุฏู
* [ ] ุจุงุฒุจู ููุง

.ูุงฺูโูุงูู
ุชุงุชูููฺ:: ฺฏุฒุงุฑูโุง ฺฉู ููุดู ุฏุฑุณุช ุงุณุช.
ุชูุงูุถ:: ฺฏุฒุงุฑูโุง ฺฉู ููุดู ูุงุฏุฑุณุช ุงุณุช.
ุงููุงุนโูพุฐุฑ:: ฺฏุฒุงุฑูโุง ฺฉู ุญุฏุงูู ฺฉโุจุงุฑ ุฏุฑุณุช ูโุดูุฏ.

=== ูุงูุจุฑูุง ฺฉุจูุฑุฏ

ุจุฑุง ููโูุงุตูู: kbd:[Shift+Space]

ุจุฑุง ฺฉุงููพุงู: kbd:[Ctrl+Shift+B]

=== ุฏฺฉูู ู ููู

btn:[ุจุฑุฑุณ ฺฉู]

menu:File[Export > MDX]

---

== ูพุงููุดุชโูุง

ุงุตู ุทุฑุฏ ุดู ุซุงูุซfootnote:[Law of Excluded Middle โ ุฏุฑ ููุทู ุดููุฏ ูพุฐุฑูุชู ูุณุช.]
ุฏุฑ ููุทู ฺฉูุงุณฺฉ ุงุตู ุจูุงุฏู ุงุณุช.

ููโูุงุตููfootnote:[Zero-Width Non-Joiner, U+200C] ุฏุฑ ุชุงูพ ูุงุฑุณ
ุงููุช ุฒุงุฏ ุฏุงุฑุฏ.

---

[bibliography]
== ฺฉุชุงุจโูุงูู

* [[[knuth97]]] Knuth, D. E. (1997). _The Art of Computer Programming_,
  Vol. 1, 3rd ed. Addison-Wesley.

* [[[godel31]]] Gรถdel, K. (1931). "รber formal unentscheidbare Sรคtze
  der Principia Mathematica und verwandter Systeme I".
  _Monatshefte fรผr Mathematik und Physik_, 38, 173โ198.

* [[[ebrahimi99]]] ุงุจุฑุงููุ ูุญูุฏ (ฑณนน). _ูุจุงู ููุทู ุฑุงุถ_.
  ุงูุชุดุงุฑุงุช ุฏุงูุดฺฏุงู ุชูุฑุงู.

---

[colophon]
== ุฏุฑุจุงุฑู ุณูุฏ

โ๏ธ ููุณูุฏู: ููุฏ ุณุงูู |
๐ ุชุงุจุณุชุงู ฑดฐด |
๐ ูุฌูุฒ: MIT |
๐ ูุฎุฒู: https://github.com/example/format-converter
```

---

## ฑฑ. ุฌุฏูู ููุง ูพูุดุด ุชุณุช โ ุชูุงู ูุฑูุชโูุง

| ุนูุตุฑ | LaTeX | Markdown | HTML | RST | AsciiDoc |
|:-----|:-----:|:--------:|:----:|:---:|:--------:|
| **ุนูุงูู / ุณุฑูุตู** | โ | โ | โ | โ | โ |
| **Bold / Italic / Strike** | โ | โ | โ | โ | โ |
| **ูุณุช ูุฑุชุจ/ูุงูุฑุชุจ** | โ | โ | โ | โ | โ |
| **Task List** | โ | โ | โ | โ | โ |
| **Definition List** | โ | โ | โ | โ | โ |
| **ุฌุฏูู ุณุงุฏู** | โ | โ | โ | โ | โ |
| **ุฌุฏูู ุงุฏุบุงู (colspan/rowspan)** | โ | โ | โ | โ | โ |
| **ุฌุฏูู ุฑูฺฏ** | โ | โ | โ | โ | โ |
| **ุฌุฏูู ุทููุงู** | โ | โ | โ | โ | โ |
| **ุฌุฏูู ุงูู (landscape)** | โ | โ | โ | โ | โ |
| **ุชุตูุฑ ุณุงุฏู** | โ | โ | โ | โ | โ |
| **ุชุตูุฑ ฺฉูุงุฑ ูุชู** | โ | โ | โ | โ | โ |
| **ุฒุฑุดฺฉู** | โ | โ | โ | โ | โ |
| **ุชุตูุฑ ุจุง ููฺฉ** | โ | โ | โ | โ | โ |
| **SVG ุฏุฑููโุฎุท** | โ | โ | โ | โ | โ |
| **ูุฏุฆู (embed)** | โ | โ | โ | โ | โ |
| **ุตูุช (audio)** | โ | โ | โ | โ | โ |
| **ูููุฏุงุฑ Mermaid** | โ | โ (ฑธ ููุน) | โ (ธ ููุน) | โ | โ |
| **ูููุฏุงุฑ TikZ/pgfplots** | โ (ถ ููุน) | โ | โ | โ | โ |
| **ูุฑููู ุฏุฑููโุฎุท** | โ | โ | โ | โ | โ |
| **ูุฑููู ุจููฺฉ** | โ | โ | โ | โ | โ |
| **ูุงุชุฑุณ** | โ | โ | โ | โ | โ |
| **Cases** | โ | โ | โ | โ | โ |
| **ูุฑููู ฺูุฏุฎุท** | โ | โ | โ | โ | โ |
| **ูุถู/ุชุนุฑู/ุงุซุจุงุช** | โ | โ | โ | โ | โ |
| **ุงูฺฏูุฑุชู** | โ | โ | โ | โ | โ |
| **ฺฉุฏ (ฺูุฏ ุฒุจุงู)** | โ | โ | โ | โ | โ |
| **ฺฉุฏ ุฏุฑููโุฎุท** | โ | โ | โ | โ | โ |
| **ูพุงููุดุช** | โ | โ | โ | โ | โ |
| **ูพโููุดุช** | โ | โ | โ | โ | โ |
| **ููฺฉ ุฎุงุฑุฌ** | โ | โ | โ | โ | โ |
| **ุงุฑุฌุงุน ูุชูุงุทุน** | โ | โ | โ | โ | โ |
| **ฺฉุชุงุจโูุงูู** | โ | โ | โ | โ | โ |
| **ูููโููู** | โ | โ | โ | โ | โ |
| **ูููโููู ุชู ุฏุฑ ุชู** | โ | โ | โ | โ | โ |
| **Admonition / Callout** | โ | โ | โ | โ | โ |
| **ุจููฺฉ ุชุงุดู (details)** | โ | โ | โ | โ | โ |
| **HTML ุฏุฑูู ุณูุฏ** | โ | โ | โ | โ | โ |
| **Emoji** | โ | โ | โ | โ | โ |
| **ูุงูุงุช (mark)** | โ | โ | โ | โ | โ |
| **ฺฉุจูุฑุฏ (kbd)** | โ | โ | โ | โ | โ |
| **Abbreviation (abbr)** | โ | โ | โ | โ | โ |
| **Progress / Meter** | โ | โ | โ | โ | โ |
| **ูุฑู** | โ | โ | โ | โ | โ |
| **Address / Time** | โ | โ | โ | โ | โ |
| **Ins / Del / Sup / Sub** | โ | โ | โ | โ | โ |
| **ูุญุชูุง ุฏูุฒุจุงูู** | โ | โ | โ | โ | โ |
| **RTL** | โ | โ | โ | โ | โ |
| **ููโูุงุตูู** | โ | โ | โ | โ | โ |
| **ููุฑุณุช ูุทุงูุจ** | โ | โ | โ | โ | โ |
| **ููุฑุณุช ุงุดฺฉุงู/ุฌุฏุงูู** | โ | โ | โ | โ | โ |
| **Front Matter / Metadata** | โ | โ | โ | โ | โ |
| **ุฑูฺฏโุจูุฏ ูุฏุฑู** | โ | โ | โ | โ | โ |
| **ุณุฑุตูุญู/ูพุงุตูุญู** | โ | โ | โ | โ | โ |
| **Field List** | โ | โ | โ | โ | โ |
| **Sidebar** | โ | โ | โ | โ | โ |
| **Topic** | โ | โ | โ | โ | โ |
| **Epigraph** | โ | โ | โ | โ | โ |
| **Text Substitution** | โ | โ | โ | โ | โ |
| **Version Directives** | โ | โ | โ | โ | โ |
| **Button / Menu** | โ | โ | โ | โ | โ |

**ูุฌููุน ุนูุงุตุฑ ููุญุตุฑุจูโูุฑุฏ: ถฐ+**

---

## ฑฒ. ฺฺฉโูุณุช ููุง ุชุจุฏู (ููู ูุฑูุชโูุง โ MDX)

```markdown
## ฺฺฉโูุณุช ุชุณุช ุชุจุฏูโฺฏุฑ ูุฑูุช โ MDX

### ฑ. ูพุงู
- [ ] Encoding ุฎุฑูุฌ UTF-8 ุงุณุช
- [ ] Front Matter ุตุญุญ ุชููุฏ ุดุฏู
- [ ] `lang="fa"` ู `dir="rtl"` ุชูุธู ุดุฏู

### ฒ. ูุชู
- [ ] ุนูุงูู H1โH6 ุตุญุญโุงูุฏ
- [ ] Bold / Italic / Strikethrough ุญูุธ ุดุฏู
- [ ] ููโูุงุตูู (ZWNJ) ุญุฐู ูุดุฏู
- [ ] ฺฏููู ูุงุฑุณ ยซยป ุญูุธ ุดุฏู
- [ ] ุงุนุฏุงุฏ ูุงุฑุณ ุตุญุญโุงูุฏ

### ณ. ุณุงุฎุชุงุฑ
- [ ] ูุณุช ูุฑุชุจ/ูุงูุฑุชุจ ุตุญุญ
- [ ] Task List ุตุญุญ
- [ ] Definition List ุตุญุญ
- [ ] ุฌุฏุงูู ุจุง ุณุชููโุจูุฏ ุตุญุญ
- [ ] ุฌุฏุงูู ุงุฏุบุงู (colspan/rowspan) ุตุญุญ
- [ ] ูพุงูุฑูโูุง ุตุญุญ

### ด. ุฑุงุถ
- [ ] ูุฑููู ุฏุฑููโุฎุท $...$ ุฑูุฏุฑ ูโุดูุฏ
- [ ] ูุฑููู ุจููฺฉ $$...$$ ุฑูุฏุฑ ูโุดูุฏ
- [ ] ูุงุชุฑุณ ุตุญุญ
- [ ] Cases ุตุญุญ
- [ ] Aligned ุตุญุญ
- [ ] ููุงุฏูุง ุฎุงุต (โ, โ, โ, โค, โฅ, etc.) ุตุญุญ

### ต. ฺฉุฏ
- [ ] ุจููฺฉ ฺฉุฏ ุจุง syntax highlighting
- [ ] ฺฉุฏ ุฏุฑููโุฎุท ุตุญุญ
- [ ] ุดูุงุฑู ุฎุทูุท (ุงุฎุชุงุฑ)
- [ ] ุฒุจุงู ฺฉุฏ ูุดุฎุต ุดุฏู

### ถ. ุฑุณุงูู
- [ ] ุชุตุงูุฑ ุจุง alt text
- [ ] ุชุตุงูุฑ ฺฉูุงุฑ ูุชู (float/wrap)
- [ ] ุฒุฑุดฺฉูโูุง
- [ ] SVG ุฏุฑููโุฎุท
- [ ] ูุฏุฆู embed
- [ ] ุตูุช

### ท. ูููุฏุงุฑ
- [ ] Mermaid Flowchart
- [ ] Mermaid Sequence
- [ ] Mermaid Class
- [ ] Mermaid State
- [ ] Mermaid ER
- [ ] Mermaid Gantt
- [ ] Mermaid Pie
- [ ] Mermaid Git
- [ ] Mermaid Mindmap
- [ ] Mermaid Timeline
- [ ] TikZ โ ุชุตูุฑ

### ธ. ุฌุนุจูโูุง
- [ ] ูุถู โ ฺฉุงููพูููุช Theorem
- [ ] ุชุนุฑู โ ฺฉุงููพูููุช Definition
- [ ] ุงุซุจุงุช โ ฺฉุงููพูููุช Proof
- [ ] ูฺฉุชู/ูุดุฏุงุฑ โ Admonition
- [ ] ุจููฺฉ ุชุงุดู โ details

### น. ููฺฉ ู ุงุฑุฌุงุน
- [ ] ููฺฉ ุฎุงุฑุฌ ุตุญุญ
- [ ] ุงุฑุฌุงุน ูุชูุงุทุน (cross-ref) ุตุญุญ
- [ ] ฺฉุชุงุจโูุงูู ุตุญุญ
- [ ] ููุฑุณุช ูุทุงูุจ (TOC) ุชููุฏ ุดุฏู

### ฑฐ. ุฏูุฒุจุงูู
- [ ] ุจููฺฉ LTR ุฏุฑูู RTL ุตุญุญ
- [ ] ูพุงุฑุงฺฏุฑุงู ุชุฑฺฉุจ ูุงุฑุณ-ุงูฺฏูุณ ุตุญุญ
- [ ] ูููุช ูุงุฑุณ/ุงูฺฏูุณ ุฌุฏุงฺฏุงูู

### ฑฑ. HTML ุฎุงุต
- [ ] kbd, mark, abbr, ins, del
- [ ] sup, sub
- [ ] progress, meter
- [ ] address, time
- [ ] form elements (ุงุฎุชุงุฑ)

### ฑฒ. ูุฑูุชโูุง ูุฑูุฏ
- [ ] LaTeX (.tex) โ MDX โ
- [ ] Markdown (.md) โ MDX โ
- [ ] HTML (.html) โ MDX โ
- [ ] RST (.rst) โ MDX โ
- [ ] AsciiDoc (.adoc) โ MDX โ
- [ ] DOCX (.docx) โ MDX โ
- [ ] PDF (.pdf) โ MDX โ
```

---

ุงู ูุฌููุนู ุงฺฉููู **ฺฉุงููุงู ุชูุงู** ุดุฏู ู ุดุงูู:

| ูุฑูุช | ูุงู | ูุถุนุช |
|:-----|:-----|:-----:|
| **LaTeX** | `sample-book.tex` | โ ฺฉุงูู |
| **Markdown + Mermaid** | `sample-mermaid.md` | โ ฺฉุงูู |
| **HTML** | `sample-page.html` | โ ฺฉุงูู |
| **RST** | `sample-page.rst` | โ ฺฉุงูู |
| **AsciiDoc** | `sample-page.adoc` | โ ฺฉุงูู |
| **DOCX** | ุงุณฺฉุฑูพุช ุณุงุฎุช (pandoc / COM) | โ ฺฉุงูู |
| **PDF** | ุงุณฺฉุฑูพุช ุณุงุฎุช (xelatex / pandoc) | โ ฺฉุงูู |
| **PowerShell** | `create-all-test-files.ps1` | โ ฺฉุงูู |
| **ฺฺฉโูุณุช ุชุณุช** | ถฐ+ ุนูุตุฑ | โ ฺฉุงูู |

### Overlap Report

*1 overlap(s) detected:*

- **Overlap 1:** 51 chars, similarity 85%, Flagged

---

## Conversation 2
*(3 segments merged)*
*Model: claude-opus-4-6*

### Request

ุญุงู ุจู ูู ฺฉ ูพุฑุงููพุช ุฎูุจ ู ฺฉุงูู ู ููุฑุงู ุจุง ุฌุฒุกุงุช ุจุฏู ฺฉู ุจุชูุงูู ุงุจุฒุงุฑ ุทุฑุงุญ ฺฉูู ุฏุฑ ููุฏูุฒ ุงู ูููููโูุง ู ุณุงุฑ ูุงูโูุง ุงุฒ ุงู ุฏุณุช ุฑุง ุจู ุฏุฑุณุช ุฏุฑ ฺฉ ุงุฒ ูุงูุจโูุง ูุงู ุชฺฉุ ุชุนุฏุงุฏ ูุงู ุชฺฉ ุฏุฑ ฺฉ ูพูุดูุ ูุงู ูุง ูพุฑุงฺฉูุฏู  ูุฑุชุจุท ุจุง ฺฉ ฺฉุชุงุจ ุฏุงุฎู ฺฉ ูพูุดูุ ุชุนุฏุงุฏ ูุงู ุฒูพ ุญุงู ุชฺฉ ูุงู ู ุง ูพูุดูโูุง ุจู ูู ูุฑุชุจุทุ ุชฺฉ ูุงู ุฒูพ (ุณูุฏ ุชฺฉ ูุงู ุง ุณูุฏ ฺูุฏ ูุงู ุฏุงุฎู ฺฉ ูพูุดู) ู ูุธุงุฑ ุขู ุฏุฑุงูุช ฺฉุฑุฏู ู ูพุฑุฏุงุฒุด ู ุชุณุช ู ุฎุฑูุฌ ุฏู ฺฉูุฏ. 
ูพุณ ฑ- ูุฑูุฏ ุฑุง ุงุณฺฉู ฺฉุฑุฏู ู ุดูุงุณุง ฺฉูุฏ. (ุชุงุฏ ุจฺฏุฑุฏ)
ฒ- ุงุทูุงุนุงุช frontmatter ู Metadata   ููุฑุฏ ูุงุฒ ุฑุง ุจฺฏุฑุฏ ูุง ุจุง  AI   ุชฺฉูู ฺฉูุฏ. ุจู ุฎุตูุต ุจุฑุง slug ู ูุงูโูุง ฺฉู ุฏุงุฑุง ูุงูโูุง ูุฑุชุจุท ู ุง ูุงุฒููุฏ ุฑุณุงููโูุง ูุฑุชุจุท (ุนฺฉุณ ู png , svg ู ...) ูุณุชูุฏ. 
ฒ.ต- ุชุณุช ุณุฑุน ุชุจุฏู ุฑุง ุงูุฌุงู ุฏุงุฏู ู ุงฺฏุฑ ูุงู ูุดฺฉู ุฏุงุฑุฏ ูพุดููุงุฏ ุงุตูุงุญ ุจุฏูุฏ. 
ณ- ุจู ุฏุฑุณุช ูููโ  ุงููุงุน ูุฑูุฏ ุฑุง ุจุง ุฏุฑ ุงุฎุชุงุฑ ูุฑุงุฑ ุฏุงุฏู ุงูุชุฎุงุจ ูุง ุจุฑุง ุชุจุฏู ุฏุฑุณุช ู ฺฉุงูู (ููุฑุงู ููุงุด ูพุดุฑูุช ฺฉุงุฑ ู ุฎุทุงูุง ุงุญุชูุงู ู ุชูุตูโูุง ุชุตุญุญ ู ุชุจุฏู ุฏุฑุณุช) ุจู ุฎุฑูุฌ ููุงุณุจ ุจุฑุง ูุจ ุณุงุช ูู MDX ุชุจุฏู ฺฉุฑุฏู ู ููู  ูุงูโูุง ู ุณูุฏูุง ูุฑุชุจุท ุฑุง ุจุง ุงุฑุชุจุงุท ู ูพููุฏ ุฏุงุฏู ุตุญุญ ููุง ฺฉูุฏ.
ด- ุชุณุช ุฎุฑูุฌ ู ุฏุฑุชุณ ุจูุฏู ุชุจุฏูโูุง ู ฺฉุงูู ุจูุฏู ูุงู ุฑุง ุงูุฌุงู ุฏูุฏ. 
ต- ุฎุฑูุฌ ุฑุง ุฏุฑ ูุญู ฺฉู ุชุนู ฺฉุฑุฏูโุงู ุง ุงูุชุฎุงุจ ฺฉูู ููุชูู ฺฉูุฏ. (ุจุง ุชูุงู ุงุฌุฒุง ู ุงุจุนุงุฏ ููุฑุฏ ูุงุฒ) 
ถ- ฺฏุฒุงุฑุด ููููุช ุฑุง ุฏุฑ ฺฉ ูุงู ูุฑฺฉุฒ ุญูุธ ู ูฺฏูุฏุงุฑ ฺฉูุฏ. 

ุง ุงฺฏุฑ ูพุดููุงุฏ ุจูุชุฑ ุฏุงุฑ ุจุฏู. ุงูุฏูุงุฑู ุงุฏู ุฑุง ุจู ุฎูุจ ุจฺฏุฑ. 
ุงู ูพุฑุงููพุช ุจุงุฏ ูููโ ุงุฌุฒุง ู ูุงุฒููุฏโูุง ุชุจุฏู ุฏุฑุณุช ู ุฌุงูุน ุฑุง ุฏุงุดุชู ุจุงุดุฏ ู ูฺฉุชูโูุง ูู ุจู ุฎุตูุต ุฏุฑ ุฎุตูุต ููุงุญุธุงุช ุฒุจุงู ูุงุฑุณ ู ูุชูู ุฏู ุฒุจุงูู ุฑุง ุฏุฑ ุงููุงุน ูุฑูุชโูุง ูุฑูุฏ ุฏุฑ ูุธุฑ ุจฺฏุฑุฏ. 
ููููู

### Response

# ูพุฑุงููพุช ุฌุงูุน ุทุฑุงุญ ุงุจุฒุงุฑ ุชุจุฏู ูุฑูุช ุจู MDX

---

## ูพุฑุงููพุช ุงุตู (Master Prompt)

```markdown
# ๐ FormatForge: ุงุจุฒุงุฑ ุฌุงูุน ุชุจุฏู ุงุณูุงุฏ ฺูุฏูุฑูุช ุจู MDX

## ฑ. ุดูุงุณูุงูู ูพุฑูฺู

**ูุงู ูพุฑูฺู:** FormatForge (ุง ูุงู ุฏูุฎูุงู)
**ูพูุชูุฑู ูุฏู:** Windows 10/11 (x64)
**ุฒุจุงู(ูุง) ุชูุณุนู:** Python 3.11+ ุจูโุนููุงู ูุณุชู ุงุตูุ PowerShell 7+ ุจุฑุง ุงุณฺฉุฑูพุชโูุง ุณุณุชูุ ู ุงุฎุชุงุฑุงู Rust/Go ุจุฑุง ูุงฺููโูุง ุนููฺฉุฑุฏ-ุจุญุฑุงู
**ุฑุงุจุท ฺฉุงุฑุจุฑ:** 
  - CLI ุงุตู (ุงูููุช ุงูู โ ฺฉุงูู ู ูุงุจู ุงุณฺฉุฑูพุช)
  - TUI ุจุง Rich/Textual (ุงูููุช ุฏูู โ ุชุฌุฑุจู ุจูุชุฑ ุฏุฑ ุชุฑููุงู)
  - GUI ุจุง Tauri ุง Electron (ุงูููุช ุณูู โ ุงุฎุชุงุฑ)
**ุฒุจุงู ูุญุชูุง:** ูุงุฑุณ (RTL) ุจูโุนููุงู ุฒุจุงู ุงุตูุ ุจุง ูพุดุชุจุงู ฺฉุงูู ุงุฒ ูุญุชูุง ุฏูุฒุจุงูู ูุงุฑุณ-ุงูฺฏูุณ ู ูุชูู ุชูุงูโุงูฺฏูุณ
**ุฎุฑูุฌ ููุง:** ูุงู(ูุง) MDX ุณุงุฒฺฏุงุฑ ุจุง Next.js / Astro / Gatsby / Docusaurus ุง ูุฑ ูุฑูโูุฑฺฉ ูุจุชู ุจุฑ MDX

---

## ฒ. ุจุงู ูุณุฆูู ู ูุฏู

ูู ฺฉ ูุฌููุนู ุจุฒุฑฺฏ ุงุฒ ููุงูุงุชุ ฺฉุชุงุจโูุงุ ุจุงููโูุง ู ุงุซุจุงุชโูุง ููุทู ุฑุงุถ ุฏุงุฑู ฺฉู ุฏุฑ ูุฑูุชโูุง ูุฎุชูู (LaTeX, HTML, Markdown, DOCX, PDF, RST, AsciiDoc, EPUB, Jupyter Notebook) ููุดุชู ุดุฏูโุงูุฏ. ูโุฎูุงูู ุงุจุฒุงุฑ ุทุฑุงุญ ฺฉูู ฺฉู:

1. **ูุฑูุฏโูุง ูุชููุน** ุฑุง ุจุง ูุฑ ุณุงุฎุชุงุฑ (ุชฺฉโูุงูุ ูพูุดูุ ZIPุ ุชุฑฺฉุจ) ุฏุฑุงูุช ู ุดูุงุณุง ฺฉูุฏ
2. **ูุชุงุฏุชุง ู frontmatter** ุฑุง ุงุณุชุฎุฑุงุฌุ ุชฺฉูู ู ุงุนุชุจุงุฑุณูุฌ ฺฉูุฏ (ุจุง ฺฉูฺฉ AI ุฏุฑ ุตูุฑุช ูุงุฒ)
3. **ุชุจุฏู ุฏูู ู ฺฉุงูู** ุจู MDX ุงูุฌุงู ุฏูุฏ ุจุง ุญูุธ ุชูุงู ุนูุงุตุฑ (ุฑุงุถุ ูููุฏุงุฑุ ฺฉุฏุ ุชุตูุฑุ ุฌุฏููุ ุงุฑุฌุงุนุงุชุ RTLุ ููโูุงุตูู ู...)
4. **ุชุณุช ฺฉูุช** ุฎุฑูุฌ ุฑุง ุจูโุตูุฑุช ุฎูุฏฺฉุงุฑ ุงูุฌุงู ุฏูุฏ
5. **ุฎุฑูุฌ ููุง** ุฑุง ุฏุฑ ุณุงุฎุชุงุฑ ููุงุณุจ ูุจโุณุงุช ูู ูุณุชูุฑ ฺฉูุฏ
6. **ฺฏุฒุงุฑุด ูุฑฺฉุฒ** ุงุฒ ุชูุงู ุชุจุฏูโูุง ูฺฏูุฏุงุฑ ฺฉูุฏ

### ูฺฺฏโูุง ฺฉูุฏ ูุญุชูุง ูู:
- ุงฺฉุซุฑุงู **ูุงุฑุณ ุจุง ุงุตุทูุงุญุงุช ุงูฺฏูุณ** ุฏุฑูู ูุชู
- ุดุงูู **ูุฑูููโูุง ุฑุงุถ ูพฺุฏู** (ูุงุชุฑุณุ alignedุ casesุ ุงุซุจุงุชโูุง ฺูุฏูุฑุญููโุง)
- ุดุงูู **ูููุฏุงุฑูุง ูุชููุน** (TikZุ pgfplotsุ Mermaidุ SVG)
- ุดุงูู **ฺฉุฏ ุจุฑูุงููโููุณ** ุจุง syntax highlighting
- ุดุงูู **ุฌุฏุงูู ูพฺุฏู** (ุงุฏุบุงูุ ุฑูฺฏุ ุทููุงูุ ุงูู)
- ุดุงูู **ุงุฑุฌุงุนุงุช ูุชูุงุทุน** ู ฺฉุชุงุจโูุงูู
- ูุงุฒ ุจู **ุญูุธ ููโูุงุตูู** (ZWNJ, U+200C) ุฏุฑ ุชูุงู ูุฑุงุญู
- ูุงุฒ ุจู **ุฌูุชโุฏู ุฏูฺฏุงูู** (RTL ุจุฑุง ูุงุฑุณุ LTR ุจุฑุง ฺฉุฏ/ุฑุงุถ/ุงูฺฏูุณ)

---

## ณ. ูุนูุงุฑ ฺฉู ุณุณุชู

### ณ.ฑ ุฎุท ูููู ูพุฑุฏุงุฒุด (Processing Pipeline)

```
โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโ
โ  STAGE 1    โโโโโถโ  STAGE 2    โโโโโถโ  STAGE 2.5  โโโโโถโ  STAGE 3     โ
โ  ุงุณฺฉู ู    โ    โ  ูุชุงุฏุชุง ู  โ    โ  ุชุณุช ุณุฑุน   โ    โ  ุชุจุฏู ุงุตู โ
โ  ุดูุงุณุง    โ    โ frontmatter โ    โ  ู ูพุดโุจุฑุฑุณ โ    โ  ุจู MDX      โ
โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโฌโโโโโโโโ
                                                                โ
โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโ          โ
โ  STAGE 6    โโโโโโ  STAGE 5    โโโโโโ  STAGE 4     โโโโโโโโโโโโ
โ  ฺฏุฒุงุฑุด     โ    โ  ุงุณุชูุฑุงุฑ    โ    โ  ุชุณุช ฺฉูุช   โ
โ  ูุฑฺฉุฒ     โ    โ  ุฎุฑูุฌ      โ    โ  ุฎุฑูุฌ       โ
โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโ
```

### ณ.ฒ ุณุงุฎุชุงุฑ ูุงฺููุงุฑ

```
formatforge/
โโโ cli/                      # ุฑุงุจุท ุฎุท ูุฑูุงู
โ   โโโ __main__.py
โ   โโโ commands/
โ   โ   โโโ scan.py           # ุฏุณุชูุฑ ุงุณฺฉู
โ   โ   โโโ convert.py        # ุฏุณุชูุฑ ุชุจุฏู
โ   โ   โโโ test.py           # ุฏุณุชูุฑ ุชุณุช
โ   โ   โโโ deploy.py         # ุฏุณุชูุฑ ุงุณุชูุฑุงุฑ
โ   โ   โโโ report.py         # ุฏุณุชูุฑ ฺฏุฒุงุฑุด
โ   โโโ interactive.py        # ุญุงูุช ุชุนุงูู
โ
โโโ core/                     # ูุณุชู ุงุตู
โ   โโโ scanner/              # ุงุณฺฉูุฑ ูุฑูุฏ
โ   โ   โโโ file_detector.py  # ุชุดุฎุต ููุน ูุงู
โ   โ   โโโ structure_analyzer.py  # ุชุญูู ุณุงุฎุชุงุฑ
โ   โ   โโโ archive_handler.py     # ูุฏุฑุช ZIP/RAR
โ   โ   โโโ encoding_detector.py   # ุชุดุฎุต encoding
โ   โ
โ   โโโ metadata/             # ูุฏุฑุช ูุชุงุฏุชุง
โ   โ   โโโ extractor.py      # ุงุณุชุฎุฑุงุฌ ูุชุงุฏุชุง
โ   โ   โโโ schema.py         # ุดููุง ูุชุงุฏุชุง
โ   โ   โโโ slug_generator.py # ุชููุฏ slug
โ   โ   โโโ ai_completer.py   # ุชฺฉูู ุจุง AI
โ   โ   โโโ validator.py      # ุงุนุชุจุงุฑุณูุฌ
โ   โ
โ   โโโ converters/           # ุชุจุฏูโฺฏุฑูุง
โ   โ   โโโ base.py           # ฺฉูุงุณ ูพุงู
โ   โ   โโโ latex_to_mdx.py
โ   โ   โโโ html_to_mdx.py
โ   โ   โโโ md_to_mdx.py
โ   โ   โโโ docx_to_mdx.py
โ   โ   โโโ pdf_to_mdx.py
โ   โ   โโโ rst_to_mdx.py
โ   โ   โโโ asciidoc_to_mdx.py
โ   โ   โโโ epub_to_mdx.py
โ   โ   โโโ notebook_to_mdx.py
โ   โ
โ   โโโ processors/           # ูพุฑุฏุงุฒุดฺฏุฑูุง ุชุฎุตุต
โ   โ   โโโ math_processor.py       # ูุฑูููโูุง ุฑุงุถ
โ   โ   โโโ mermaid_processor.py    # ูููุฏุงุฑูุง Mermaid
โ   โ   โโโ tikz_processor.py      # ุชุจุฏู TikZ ุจู SVG/ุชุตูุฑ
โ   โ   โโโ code_processor.py      # ุจููฺฉโูุง ฺฉุฏ
โ   โ   โโโ table_processor.py     # ุฌุฏุงูู ูพฺุฏู
โ   โ   โโโ image_processor.py     # ุชุตุงูุฑ ู ุฑุณุงูู
โ   โ   โโโ link_processor.py      # ููฺฉโูุง ู ุงุฑุฌุงุนุงุช
โ   โ   โโโ bibliography_processor.py  # ฺฉุชุงุจโูุงูู
โ   โ   โโโ footnote_processor.py  # ูพุงููุดุช
โ   โ   โโโ rtl_processor.py       # ูพุฑุฏุงุฒุด RTL/ูุงุฑุณ
โ   โ
โ   โโโ persian/              # ูุงฺูู ุชุฎุตุต ูุงุฑุณ
โ   โ   โโโ zwnj_handler.py   # ูุฏุฑุช ููโูุงุตูู
โ   โ   โโโ bidi_handler.py   # ูุฏุฑุช ุฏูุฌูุช
โ   โ   โโโ numeral_handler.py # ุชุจุฏู ุงุนุฏุงุฏ ูุงโen
โ   โ   โโโ font_handler.py   # ูุฏุฑุช ูููุช
โ   โ   โโโ typography.py     # ููุงุนุฏ ุชุงูพูฺฏุฑุงู ูุงุฑุณ
โ   โ
โ   โโโ quality/              # ุชุณุช ฺฉูุช
โ   โ   โโโ structural_test.py    # ุชุณุช ุณุงุฎุชุงุฑ
โ   โ   โโโ math_test.py          # ุชุณุช ุฑุงุถ
โ   โ   โโโ visual_test.py        # ุชุณุช ุจุตุฑ
โ   โ   โโโ link_test.py          # ุชุณุช ููฺฉโูุง
โ   โ   โโโ encoding_test.py      # ุชุณุช encoding
โ   โ   โโโ rtl_test.py           # ุชุณุช RTL
โ   โ   โโโ completeness_test.py  # ุชุณุช ฺฉุงูู ุจูุฏู
โ   โ   โโโ render_test.py        # ุชุณุช ุฑูุฏุฑ (headless browser)
โ   โ
โ   โโโ deployer/             # ุงุณุชูุฑุงุฑ ุฎุฑูุฌ
โ       โโโ file_organizer.py # ุณุงุฒูุงูุฏู ูุงูโูุง
โ       โโโ asset_manager.py  # ูุฏุฑุช asset ูุง
โ       โโโ deployer.py       # ุงูุชูุงู ููุง
โ
โโโ ai/                       # ูุงฺูู ููุด ูุตููุน
โ   โโโ provider.py           # ุฑุงุจุท ุจุง API ูุง AI
โ   โโโ metadata_ai.py        # ุชฺฉูู ูุชุงุฏุชุง
โ   โโโ content_ai.py         # ุงุตูุงุญ ูุญุชูุง
โ   โโโ suggestion_ai.py      # ูพุดููุงุฏุงุช
โ
โโโ reports/                  # ฺฏุฒุงุฑุดโุฏู
โ   โโโ report_engine.py
โ   โโโ templates/
โ   โโโ central_log.py
โ
โโโ config/                   # ุชูุธูุงุช
โ   โโโ default_config.yaml
โ   โโโ user_config.yaml
โ   โโโ website_config.yaml
โ
โโโ templates/                # ูุงูุจโูุง MDX
โ   โโโ article.mdx.j2
โ   โโโ book_chapter.mdx.j2
โ   โโโ proof.mdx.j2
โ   โโโ components/
โ       โโโ Theorem.jsx
โ       โโโ Definition.jsx
โ       โโโ Proof.jsx
โ       โโโ Admonition.jsx
โ       โโโ MermaidDiagram.jsx
โ
โโโ tests/                    # ุชุณุชโูุง ูุงุญุฏ
    โโโ test_files/           # ูุงูโูุง ููููู ุชุณุช
    โโโ ...
```

---

## ด. ูุดุฎุตุงุช ุฏูู ูุฑ ูุฑุญูู (Stage)

### โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
### STAGE 1: ุงุณฺฉู ู ุดูุงุณุง ูุฑูุฏ
### โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

#### ด.ฑ.ฑ ุงููุงุน ูุฑูุฏโูุง ูพุดุชุจุงูโุดุฏู

ุงุจุฒุงุฑ ุจุงุฏ **ุชูุงู** ุณูุงุฑููุง ูุฑูุฏ ุฒุฑ ุฑุง ูพุดุชุจุงู ฺฉูุฏ:

| ุณูุงุฑู | ูุซุงู | ุชูุถุญ |
|:--------|:------|:------|
| **ุชฺฉโูุงู** | `article.tex` | ฺฉ ูุงู ูููุฑุฏ |
| **ฺูุฏ ูุงู ุชฺฉ ุฏุฑ ฺฉ ูพูุดู** | `articles/*.tex` | ูุฌููุนู ููุงูุงุช ูุณุชูู |
| **ูุงูโูุง ูุฑุชุจุท ุฏุฑ ฺฉ ูพูุดู** | `book/ch01.tex, ch02.tex, main.tex, refs.bib, images/` | ฺฉ ฺฉุชุงุจ ฺูุฏูุตู |
| **ูพูุดูโ ูพุฑูฺู LaTeX** | `project/` ุดุงูู `.tex`, `.bib`, `.sty`, `figures/` | ูพุฑูฺู LaTeX ฺฉุงูู |
| **ุชฺฉ ูุงู ZIP (ุณูุฏ ุชฺฉ)** | `article.zip` โ `article.tex` | ูุงู ูุดุฑุฏู ุญุงู ฺฉ ุณูุฏ |
| **ุชฺฉ ูุงู ZIP (ุณูุฏ ฺูุฏุจุฎุด)** | `book.zip` โ `book/ch01.tex, ch02.tex, ...` | ูุงู ูุดุฑุฏู ุญุงู ูพุฑูฺู |
| **ฺูุฏ ูุงู ZIP** | `pack1.zip, pack2.zip` | ฺูุฏ ุขุฑุดู ูุฑุชุจุท |
| **ุชุฑฺฉุจ** | ูพูุดู ุดุงูู `.tex`, `.md`, `.html`, `.zip` | ุชุฑฺฉุจ ุงููุงุน ูุฎุชูู |
| **URL** | `https://arxiv.org/abs/...` | ุฏุงูููุฏ ู ุชุจุฏู (ุงุฎุชุงุฑ) |
| **Clipboard** | ูุญุชูุง ฺฉูพโุดุฏู | ุชุจุฏู ูุณุชูู ุงุฒ clipboard |

#### ด.ฑ.ฒ ุงูฺฏูุฑุชู ุดูุงุณุง

```
ุจุฑุง ูุฑ ูุฑูุฏ (ูุณุฑุ ูุงูุ URL):
โ
โโ ุงฺฏุฑ ZIP/RAR/7Z/TAR.GZ ุงุณุช:
โ   โโ ุงุณุชุฎุฑุงุฌ ุจู ูพูุดู ูููุช
โ   โโ ุชุญูู ูุญุชูุง ุงุณุชุฎุฑุงุฌโุดุฏู (ุจุงุฒฺฏุดุช)
โ   โโ ุชุดุฎุต: ยซุชฺฉโุณูุฏยป ุง ยซฺูุฏุณูุฏยป ุง ยซูพุฑูฺูยป
โ
โโ ุงฺฏุฑ ูพูุดู ุงุณุช:
โ   โโ ุงุณฺฉู ุจุงุฒฺฏุดุช ุชูุงู ูุงูโูุง
โ   โโ ุฏุณุชูโุจูุฏ ุจุฑ ุงุณุงุณ ููุน:
โ   โ   โโ ุงุณูุงุฏ ุงุตู (.tex, .md, .html, .docx, .pdf, .rst, .adoc, .ipynb, .epub)
โ   โ   โโ ุฑุณุงููโูุง (.png, .jpg, .svg, .gif, .mp4, .mp3, .webp)
โ   โ   โโ ุณุจฺฉโูุง (.css, .sty, .cls)
โ   โ   โโ ูุชุงุฏุชุง (.bib, .json, .yaml, .toml)
โ   โ   โโ ุณุงุฑ
โ   โโ ุชุดุฎุต ุงุฑุชุจุงุท ุจู ูุงูโูุง:
โ   โ   โโ ุชุญูู \input, \include, \bibliography ุฏุฑ LaTeX
โ   โ   โโ ุชุญูู ููฺฉโูุง ู import ูุง ุฏุฑ MD/HTML
โ   โ   โโ ุชุญูู ุงุฑุฌุงุนุงุช ุชุตูุฑ (src, \includegraphics, ![])
โ   โ   โโ ุณุงุฎุช ฺฏุฑุงู ูุงุจุณุชฺฏ
โ   โโ ุชุนู ุณุงุฎุชุงุฑ: ยซููุงูุงุช ูุณุชููยป ุง ยซฺฉุชุงุจ ฺูุฏูุตูยป ุง ยซูุฌููุนู ูุฑุชุจุทยป
โ
โโ ุงฺฏุฑ ุชฺฉโูุงู ุงุณุช:
โ   โโ ุชุดุฎุต ูุฑูุช (ุจุฑ ุงุณุงุณ ูพุณููุฏ + ุชุญูู ูุญุชูุง + magic bytes)
โ   โโ ุชุดุฎุต encoding (UTF-8/UTF-8 BOM/UTF-16/Windows-1256/ISO-8859-6)
โ   โโ ุชุดุฎุต ุฒุจุงู (ูุงุฑุณ/ุงูฺฏูุณ/ุฏูุฒุจุงูู)
โ   โโ ุงุณุชุฎุฑุงุฌ ูุชุงุฏุชุง ุณุฑุน
โ
โโ ุชููุฏ ยซฺฏุฒุงุฑุด ุงุณฺฉูยป (ScanReport)
```

#### ด.ฑ.ณ ุฎุฑูุฌ ูุฑุญูู ฑ: ScanReport

```yaml
# ูุซุงู ScanReport
scan_id: "scan_20250713_153042"
timestamp: "2025-07-13T15:30:42+03:30"
input_path: "C:/Users/ali/Documents/logic-book/"
input_type: "directory"     # file | directory | archive | url | clipboard
total_files: 23
structure: "multi_chapter_book"  # single_doc | independent_articles |
                                 # multi_chapter_book | related_collection

documents:
  - id: "doc_001"
    path: "main.tex"
    format: "latex"
    encoding: "utf-8-bom"
    language: "fa+en"        # fa | en | fa+en
    role: "main_entry"       # main_entry | chapter | appendix | standalone
    size_bytes: 45200
    estimated_pages: 12
    dependencies:
      - "chapter01.tex"
      - "chapter02.tex"
      - "references.bib"
    images_referenced:
      - "figures/diagram1.png"
      - "figures/proof-tree.svg"
    has_math: true
    has_code: true
    has_tables: true
    has_bibliography: true
    has_tikz: true

  - id: "doc_002"
    path: "chapter01.tex"
    format: "latex"
    encoding: "utf-8"        # โ ุจุฏูู BOM
    language: "fa+en"
    role: "chapter"
    parent: "doc_001"
    # ...

assets:
  - path: "figures/diagram1.png"
    type: "image/png"
    size_bytes: 125400
    referenced_by: ["doc_001", "doc_002"]
  - path: "figures/proof-tree.svg"
    type: "image/svg+xml"
    size_bytes: 8900
    referenced_by: ["doc_001"]
  - path: "references.bib"
    type: "bibliography"
    entries_count: 15

warnings:
  - level: "warning"
    file: "chapter01.tex"
    message: "ูุงู ุจุฏูู BOM ุงุณุช. ููฺฉู ุงุณุช ููโูุงุตููโูุง ุงุฒ ุฏุณุช ุจุฑููุฏ."
    suggestion: "ุชุจุฏู ุจู UTF-8 with BOM"
  - level: "info"
    file: "figures/old-diagram.png"
    message: "ุงู ุชุตูุฑ ุฏุฑ ูฺ ุณูุฏ ุงุฑุฌุงุน ุฏุงุฏู ูุดุฏู."
    suggestion: "ุญุฐู ุง ุจุฑุฑุณ"

confirmation_required: true
confirmation_prompt: |
  ๐ ุณุงุฎุชุงุฑ ุดูุงุณุงโุดุฏู:
  โโโโโโโโโโโโโโโโโโโโ
  ููุน: ฺฉุชุงุจ ฺูุฏูุตู (ฒ ูุตู + ููุฏูู + ฺฉุชุงุจโูุงูู)
  ูุฑูุช ุงุตู: LaTeX
  ุฒุจุงู: ูุงุฑุณ-ุงูฺฏูุณ
  ฒ ุชุตูุฑุ ฑ ูุงู ฺฉุชุงุจโูุงูู
  โ ฑ ูุดุฏุงุฑ encoding

  ุขุง ุงู ุชุดุฎุต ุตุญุญ ุงุณุชุ [ุจูู/ุฎุฑ/ูุฑุงุด]
```

#### ด.ฑ.ด ุชุนุงูู ุจุง ฺฉุงุฑุจุฑ (ุชุฃุฏ)

```
๐ ุงุณฺฉู ูุฑูุฏ: C:\Users\ali\Documents\logic-book\

๐ ูุชุฌู ุงุณฺฉู:
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
  ููุน ุณุงุฎุชุงุฑ:    ๐ ฺฉุชุงุจ ฺูุฏูุตู
  ูุฑูุช ุงุตู:     ๐ LaTeX
  ุฒุจุงู:          ๐ ูุงุฑุณ + ุงูฺฏูุณ
  encoding:      โ UTF-8 (ฑ ูุงู ุจุฏูู BOM โ)
  ูุงูโูุง:       ด ุณูุฏ + ฒ ุชุตูุฑ + ฑ ฺฉุชุงุจโูุงูู

  ๐ main.tex โโโโโโโโโโ ููุทู ูุฑูุฏ ุงุตู
    โโโ chapter01.tex โโ ูุตู ฑ: ููุฏูู ู ููุงูู
    โโโ chapter02.tex โโ ูุตู ฒ: ููุทู ฺฏุฒุงุฑูโุง
    โโโ references.bib โ ฺฉุชุงุจโูุงูู (ฑต ูุฑุฌุน)
    โโโ figures/
        โโโ diagram1.png  (122 KB)
        โโโ proof-tree.svg (9 KB)

  โ ูุดุฏุงุฑูุง:
    1. chapter01.tex: ุจุฏูู BOM โ ูพุดููุงุฏ: ุชุจุฏู encoding

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
  [T] ุชุฃุฏ ู ุงุฏุงูู
  [E] ูุฑุงุด ุณุงุฎุชุงุฑ
  [F] ุงุตูุงุญ ุฎูุฏฺฉุงุฑ ูุดุฏุงุฑูุง
  [A] ุชุฃุฏ + ุงุตูุงุญ ุฎูุฏฺฉุงุฑ
  [Q] ูุบู

  ุงูุชุฎุงุจ ุดูุง: โ
```

---

### โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
### STAGE 2: ุงุณุชุฎุฑุงุฌ ู ุชฺฉูู ูุชุงุฏุชุง ู Frontmatter
### โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

#### ด.ฒ.ฑ ุดููุง ูุชุงุฏุชุง (Metadata Schema)

```typescript
// ุดููุง ฺฉุงูู ูุชุงุฏุชุง ูุฑ ุณูุฏ
interface DocumentMetadata {
  // --- ุงุฌุจุงุฑ ---
  title: string;                    // ุนููุงู ูุงุฑุณ
  titleEn?: string;                 // ุนููุงู ุงูฺฏูุณ (ุงุฎุชุงุฑ)
  slug: string;                     // ูุณุฑ URL (ููุท ุญุฑูู ูุงุชูุ ุนุฏุฏุ ุฎุทโุชุฑู)
  date: string;                     // ุชุงุฑุฎ ุงูุชุดุงุฑ (ISO 8601)
  lang: "fa" | "en" | "fa-en";     // ุฒุจุงู ุงุตู
  dir: "rtl" | "ltr";              // ุฌูุช ุงุตู

  // --- ููุณูุฏู ---
  author: {
    name: string;
    nameEn?: string;
    email?: string;
    url?: string;
    affiliation?: string;
  };

  // --- ุฏุณุชูโุจูุฏ ---
  type: "article" | "book" | "chapter" | "proof" | "lecture-note" | "tutorial";
  tags: string[];                   // ุจุฑฺุณุจโูุง (ูุงุฑุณ)
  tagsEn?: string[];                // ุจุฑฺุณุจโูุง (ุงูฺฏูุณ)
  categories: string[];             // ุฏุณุชูโุจูุฏโูุง
  series?: {                        // ุงฺฏุฑ ุจุฎุด ุงุฒ ฺฉ ูุฌููุนู ุจุงุดุฏ
    name: string;
    order: number;
    total?: number;
  };

  // --- ูุญุชูุง ---
  description: string;              // ุฎูุงุตู (ูุงุฑุณุ ุญุฏุงฺฉุซุฑ ณฐฐ ฺฉุงุฑุงฺฉุชุฑ)
  descriptionEn?: string;           // ุฎูุงุตู ุงูฺฏูุณ
  abstract?: string;                // ฺฺฉุฏู ููุตู
  keywords: string[];               // ฺฉููุงุช ฺฉูุฏ
  toc: boolean;                     // ููุงุด ููุฑุณุช ูุทุงูุจ
  math: boolean;                    // ุขุง ุดุงูู ุฑุงุถ ุงุณุช
  mermaid: boolean;                 // ุขุง ุดุงูู ูููุฏุงุฑ Mermaid ุงุณุช
  codeHighlight: boolean;           // ุขุง ุดุงูู ฺฉุฏ ุงุณุช

  // --- ูุงูโูุง ---
  sourceFormat: string;             // ูุฑูุช ุงุตู (latex, html, md, ...)
  sourceFile: string;               // ูุงู ูุงู ุงุตู
  assets: {                         // ูุงูโูุง ูุงุจุณุชู
    images: string[];
    files: string[];
  };
  featuredImage?: string;           // ุชุตูุฑ ุดุงุฎุต

  // --- SEO ู ูุจ ---
  canonical?: string;               // URL ฺฉุงูููฺฉุงู
  noindex?: boolean;                // ุนุฏู ุงูุฏฺฉุณ
  ogImage?: string;                 // ุชุตูุฑ Open Graph

  // --- ุชุจุฏู ---
  convertedAt: string;              // ุฒูุงู ุชุจุฏู
  converterVersion: string;         // ูุณุฎู ุงุจุฒุงุฑ ุชุจุฏู
  qualityScore: number;             // ุงูุชุงุฒ ฺฉูุช (0-100)
  conversionNotes?: string[];       // ุงุฏุฏุงุดุชโูุง ุชุจุฏู
}
```

#### ด.ฒ.ฒ ุงุณุชุฎุฑุงุฌ ูุชุงุฏุชุง ุงุฒ ูุฑูุชโูุง ูุฎุชูู

```
ูุฑูุช         โ  ููุงุจุน ุงุณุชุฎุฑุงุฌ ูุชุงุฏุชุง
โโโโโโโโโโโโโโฟโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
LaTeX        โ  \title{}, \author{}, \date{}, \begin{abstract}
             โ  ูพฺฉุฌ hyperref: \hypersetup{pdftitle=...}
             โ  ฺฉุงููุชโูุง ุณุฑูุงู (% Title: ...)
             โ  ูุงู .bib ุจุฑุง ฺฉุชุงุจโูุงูู
โโโโโโโโโโโโโโฟโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
HTML         โ  <title>, <meta name="...">, <meta property="og:...">
             โ  Open Graph tags, Schema.org, Dublin Core
             โ  <h1> ุงููู ุนููุงู
โโโโโโโโโโโโโโฟโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
Markdown     โ  YAML frontmatter (---)
             โ  TOML frontmatter (+++)
             โ  ุงููู H1 (#)
โโโโโโโโโโโโโโฟโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
DOCX         โ  Core Properties (title, author, subject, keywords)
             โ  Custom Properties
             โ  ุงููู ูพุงุฑุงฺฏุฑุงู ุจุง ุณุจฺฉ Heading 1
โโโโโโโโโโโโโโฟโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
PDF          โ  PDF metadata (Title, Author, Subject, Keywords)
             โ  XMP metadata
             โ  ุงููู ุฎุท ุจุฒุฑฺฏ (ุนููุงู ุงุญุชูุงู)
โโโโโโโโโโโโโโฟโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
RST          โ  ุนููุงู ุงุตู (overline + underline)
             โ  :field: ููุงุฏุฑ
             โ  .. meta:: directives
โโโโโโโโโโโโโโฟโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
AsciiDoc     โ  = ุนููุงู ุณุทุญ ฐ
             โ  :attribute: ููุงุฏุฑ
โโโโโโโโโโโโโโฟโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
Jupyter NB   โ  metadata.kernelspec, metadata.title
             โ  ุงููู ุณููู Markdown
```

#### ด.ฒ.ณ ุชููุฏ Slug

```python
# ููุงุนุฏ ุชููุฏ slug:
# 1. ุงฺฏุฑ ุนููุงู ุงูฺฏูุณ ูุฌูุฏ ุฏุงุฑุฏ โ ุงุฒ ุขู ุงุณุชูุงุฏู ฺฉู
# 2. ุงฺฏุฑ ููุท ูุงุฑุณ ุงุณุช โ ุชุฑุฌูู AI ุง transliterate
# 3. slug ููุท ุดุงูู: [a-z0-9-]
# 4. ุญุฏุงฺฉุซุฑ ถฐ ฺฉุงุฑุงฺฉุชุฑ
# 5. ุจุฏูู ุฎุทโุชุฑู ุชฺฉุฑุงุฑ ุง ุงุจุชุฏุง/ุงูุชูุง
# 6. ฺฉุชุง ุจูุฏู ุฏุฑ ุณุงุช (ุจุฑุฑุณ ุจุง ฺฏุฒุงุฑุด ูุฑฺฉุฒ)

# ูุซุงูโูุง:
# "ูุงููู ุฏููุฑฺฏุงู" โ "de-morgans-laws"
# "ูุจุงู ููุทู ุฑุงุถ โ ูุตู ฑ" โ "foundations-mathematical-logic-ch1"
# "Proof of Completeness Theorem" โ "proof-completeness-theorem"

# ุจุฑุง ฺฉุชุงุจ ฺูุฏูุตู:
# series_slug/chapter_slug
# "logic-foundations/ch01-introduction"
# "logic-foundations/ch02-propositional-logic"
```

#### ด.ฒ.ด ุชฺฉูู ุจุง AI

```
ููุฏูุง ฺฉู AI ูโุชูุงูุฏ ุชฺฉูู ุง ูพุดููุงุฏ ุฏูุฏ:
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

1. description / descriptionEn
   โ ุฎูุงุตูโุณุงุฒ ุฎูุฏฺฉุงุฑ ูุญุชูุง

2. tags / tagsEn / keywords
   โ ุงุณุชุฎุฑุงุฌ ฺฉููุงุช ฺฉูุฏ ุงุฒ ูุญุชูุง

3. titleEn (ุงฺฏุฑ ุนููุงู ููุท ูุงุฑุณ ุจุงุดุฏ)
   โ ุชุฑุฌูู ุนููุงู

4. slug
   โ ุชููุฏ slug ููุงุณุจ ุงุฒ ุนููุงู

5. categories
   โ ุฏุณุชูโุจูุฏ ุฎูุฏฺฉุงุฑ ุจุฑ ุงุณุงุณ ูุญุชูุง

6. featuredImage description / alt text
   โ ุชูุตู ุชุตุงูุฑ

7. series detection
   โ ุชุดุฎุต ุงูฺฉู ุขุง ุณูุฏ ุจุฎุด ุงุฒ ฺฉ ูุฌููุนู ุงุณุช

APIโูุง ูพุดุชุจุงูโุดุฏู:
  - OpenAI GPT-4 / GPT-4o
  - Anthropic Claude
  - Google Gemini
  - Local LLM (Ollama / LM Studio)
  - ูฺโฺฉุฏุงู (ุชฺฉูู ุฏุณุช ุชูุณุท ฺฉุงุฑุจุฑ)
```

#### ด.ฒ.ต ุชุนุงูู ุจุง ฺฉุงุฑุจุฑ

```
๐ ูุชุงุฏุชุง ุงุณุชุฎุฑุงุฌโุดุฏู:
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
  ุนููุงู:     โ ูุจุงู ููุทู ุฑุงุถ ู ุงุซุจุงุชโูุง ุตูุฑ
  ุนููุงู EN:  ๐ค Foundations of Mathematical Logic and Formal Proofs
  slug:      ๐ค foundations-mathematical-logic-formal-proofs
  ููุณูุฏู:  โ ููุฏ ุณุงูู
  ุชุงุฑุฎ:    โ 2025-07-13
  ุฒุจุงู:     โ ูุงุฑุณ + ุงูฺฏูุณ (fa-en)
  ููุน:      ๐ค book (ฺฉุชุงุจ)
  ุฎูุงุตู:    ๐ค ยซุงู ฺฉุชุงุจ ุจู ุจุฑุฑุณ ูุจุงู ููุทู ุฑุงุถ...ยป (ฑดต ฺฉุงุฑุงฺฉุชุฑ)
  ุจุฑฺุณุจโูุง:  ๐ค [ููุทู, ุฑุงุถ, ุฏููุฑฺฏุงู, ุงุซุจุงุช, ฺฏุฒุงุฑูโุง]
  ุฑุงุถ:    โ ุจูู
  Mermaid:   โ ุฎุฑ
  ฺฉุฏ:       โ ุจูู

  โ = ุงุณุชุฎุฑุงุฌโุดุฏู ุงุฒ ุณูุฏ
  ๐ค = ูพุดููุงุฏ AI
  โ = ูุงุดูุงุฎุชู โ ูุงุฒ ุจู ูุฑูุฏ ุฏุณุช

  [C] ุชุฃุฏ ููู
  [E] ูุฑุงุด (ุดูุงุฑู ููุฏ)
  [R] ุจุงุฒุชููุฏ ูพุดููุงุฏุงุช AI
  [Q] ูุบู

  ุงูุชุฎุงุจ ุดูุง: โ
```

---

### โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
### STAGE 2.5: ุชุณุช ุณุฑุน ู ูพุดโุจุฑุฑุณ
### โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

#### ด.ฒ.ต.ฑ ุจุฑุฑุณโูุง ูพุด ุงุฒ ุชุจุฏู

```
ุจุฑุฑุณโูุง ููุฑ (Fast Checks):
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

[ุงูู] ุจุฑุฑุณ encoding:
  โ ุขุง UTF-8 ุงุณุชุ
  โ ุขุง BOM ุฏุงุฑุฏุ
  โ ุขุง ููโูุงุตููโูุง ุณุงูู ูุณุชูุฏุ (ุดูุงุฑุด ZWNJ)
  โ ุขุง ฺฉุงุฑุงฺฉุชุฑูุง ุนุฌุจ/ุดฺฉุณุชู ูุฌูุฏ ุฏุงุฑุฏุ

[ุจ] ุจุฑุฑุณ ุณุงุฎุชุงุฑ ูุงู:
  โ LaTeX: ุขุง \begin{document} ู \end{document} ูุฌูุฏ ุฏุงุฑุฏุ
  โ LaTeX: ุขุง ูพฺฉุฌโูุง ุชุนุงุฑุถ ูุฏุงุฑูุฏุ (ุจุฑุฑุณ ูุณุช ุชุนุงุฑุถุงุช ุดูุงุฎุชูโุดุฏู)
  โ LaTeX: ุขุง xepersian ุขุฎุฑู ูพฺฉุฌ ุงุณุชุ
  โ HTML: ุขุง well-formed ุงุณุชุ (ุชฺฏโูุง ุจุณุชูโูุดุฏู)
  โ Markdown: ุขุง frontmatter ูุนุชุจุฑ YAML/TOML ุงุณุชุ
  โ DOCX: ุขุง ูุงู corrupt ูุณุชุ
  โ PDF: ุขุง ูุงุจู ุฎูุงูุฏู/extractable ุงุณุชุ

[ุฌ] ุจุฑุฑุณ ูุงุจุณุชฺฏโูุง:
  โ ุขุง ุชูุงู ุชุตุงูุฑ ุงุฑุฌุงุนโุดุฏู ูุฌูุฏ ุฏุงุฑูุฏุ
  โ ุขุง ุชูุงู ูุงูโูุง include/input ูุฌูุฏ ุฏุงุฑูุฏุ
  โ ุขุง ูุงู .bib ูุฌูุฏ ุฏุงุฑุฏ (ุงฺฏุฑ ุงุฑุฌุงุน ุดุฏู)ุ
  โ ุขุง ูููุชโูุง ููุฑุฏ ูุงุฒ ูุตุจ ูุณุชูุฏุ (ุจุฑุง LaTeX)

[ุฏ] ุจุฑุฑุณ ูุญุชูุง:
  โ ุขุง ูุฑูููโูุง ุฑุงุถ syntax ุตุญุญ ุฏุงุฑูุฏุ
    โ ุชุณุช ุณุฑุน: parse ูุฑูููโูุง ุจุง KaTeX/regex
  โ ุขุง ุจููฺฉโูุง ฺฉุฏ syntax ุตุญุญ ุฏุงุฑูุฏุ
  โ ุขุง ุฌุฏุงูู ุณุงุฎุชุงุฑ ุตุญุญ ุฏุงุฑูุฏุ
  โ ุขุง ููฺฉโูุง ูุนุชุจุฑูุฏุ (format check, not HTTP check)

[ู] ุชุจุฏู ุขุฒูุงุด:
  โ ุชุจุฏู ฑฐูช ุงูู ุณูุฏ (ุง ุงููู ูุตู)
  โ ุจุฑุฑุณ ุฎุฑูุฌ ุขุฒูุงุด
  โ ุชุฎูู ุฒูุงู ุชุจุฏู ฺฉุงูู
  โ ุดูุงุณุง ุนูุงุตุฑ ูพฺุฏู/ูุดฺฉูโุณุงุฒ
```

#### ด.ฒ.ต.ฒ ฺฏุฒุงุฑุด ูพุดโุจุฑุฑุณ

```
โก ุชุณุช ุณุฑุน (Pre-flight Check):
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

  โ Encoding: UTF-8 BOM
  โ ุณุงุฎุชุงุฑ: ูุนุชุจุฑ
  โ ูุงุจุณุชฺฏโูุง: ฒ/ฒ ุชุตูุฑ ููุฌูุฏุ ฑ/ฑ bib ููุฌูุฏ
  โ๏ธ ุฑุงุถ: ดฒ ูุฑููู ุดูุงุณุง ุดุฏ โ ฑ ูุฑููู ูุดฺฉูฺฉ:
     ุฎุท ฑตท: \begin{align} ุจุฏูู \end{align} ูุชูุงุธุฑ
     โ ูพุดููุงุฏ: ุจุฑุฑุณ ุฎุท ฑตท ูุงู chapter02.tex
  โ ุฌุฏุงูู: ต ุฌุฏูู โ ููู ูุนุชุจุฑ
  โ๏ธ TikZ: ณ ูููุฏุงุฑ TikZ ุดูุงุณุง ุดุฏ
     โ ุงู ูููุฏุงุฑูุง ุจู SVG/PNG ุชุจุฏู ุฎูุงููุฏ ุดุฏ
     โ ูุงุฒ ุจู ูุตุจ: xelatex + dvisvgm (ุงูุช ุดุฏ โ)
  โ ฺฉุฏ: ด ุจููฺฉ ฺฉุฏ โ ุฒุจุงูโูุง: Python(2), JS(1), LaTeX(1)
  โ ููฺฉ ุดฺฉุณุชู: figures/old-diagram.png ุฏุฑ ุฎุท ธน ุงุฑุฌุงุน ุดุฏู
     ุงูุง ูุงู ูุฌูุฏ ูุฏุงุฑุฏ.
     โ ูพุดููุงุฏ: ุญุฐู ุงุฑุฌุงุน ุง ุชูู ูุงู

  ๐ ุชุฎูู:
  โโโโโโโโโ
  ุฒูุงู ุชุจุฏู: ~ดต ุซุงูู
  ุญุฌู ุฎุฑูุฌ: ~ฑฒฐ KB (MDX) + ~ณตฐ KB (assets)
  ุงูุชุงุฒ ุขูุงุฏฺฏ: ธต/ฑฐฐ

  [P] ุงุฏุงูู ุจุง ุชุจุฏู ฺฉุงูู
  [F] ุงุตูุงุญ ุฎูุฏฺฉุงุฑ ูุดฺฉูุงุช ูุงุจูโุญู
  [I] ูุงุฏุฏูโฺฏุฑูุชู ูุดุฏุงุฑูุง ู ุงุฏุงูู
  [Q] ูุบู ู ุจุงุฒฺฏุดุช

  ุงูุชุฎุงุจ ุดูุง: โ
```

---

### โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
### STAGE 3: ุชุจุฏู ุงุตู ุจู MDX
### โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

#### ด.ณ.ฑ ููุงุนุฏ ุชุจุฏู ุนููู (ุชูุงู ูุฑูุชโูุง)

##### ุงูู) ุฑุงุถุงุช

```
ูุฑูุฏ                           โ  ุฎุฑูุฌ MDX
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฟโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
LaTeX: $...$ / \(...\)          โ  $...$  (KaTeX inline)
LaTeX: $$...$$ / \[...\]       โ  $$...$$ (KaTeX display)
LaTeX: \begin{equation}        โ  $$...$$ ุจุง label
LaTeX: \begin{align}           โ  $$\begin{aligned}...$$
LaTeX: \begin{cases}           โ  $$\begin{cases}...$$
LaTeX: \begin{pmatrix}         โ  $$\begin{pmatrix}...$$
HTML: MathML                    โ  $...$ (ุชุจุฏู MathMLโLaTeX)
HTML: MathJax spans             โ  $...$
RST: :math:`...`               โ  $...$
RST: .. math::                 โ  $$...$$
AsciiDoc: stem:[...]           โ  $...$
AsciiDoc: [stem]++++           โ  $$...$$

โ ูฺฉุงุช ูุงุฑุณ:
- ูุชู ูุงุฑุณ ุฏุฑูู ูุฑููู: \text{ุงฺฏุฑ} โ ุญูุธ ุดูุฏ
- ุชุฑุชุจ RTL: ูุฑูููโูุง ููุดู LTR ุฑูุฏุฑ ูโุดููุฏ
- \label{} โ id ุจุฑุง ุงุฑุฌุงุน ูุชูุงุทุน
- \ref{} / \cref{} โ ููฺฉ ุฏุงุฎู MDX
```

##### ุจ) ูููุฏุงุฑูุง

```
ูุฑูุฏ                           โ  ุฎุฑูุฌ MDX
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฟโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
LaTeX TikZ                      โ  ฺฏุฒูู ฑ: ุชุจุฏู ุจู SVG (dvisvgm)
                                โ  ฺฏุฒูู ฒ: ุชุจุฏู ุจู PNG (ImageMagick)
                                โ  ฺฏุฒูู ณ: <MermaidDiagram> ุงฺฏุฑ ูุงุจู ุชุจุฏู
LaTeX pgfplots                  โ  ุชุจุฏู ุจู SVG/PNG
Markdown ```mermaid             โ  <MermaidDiagram chart={`...`} />
HTML <div class="mermaid">      โ  <MermaidDiagram chart={`...`} />
SVG ุฏุฑููโุฎุท                     โ  ูุงู .svg ุฌุฏุงฺฏุงูู + <Image>
                                โ  ุง ุญูุธ inline SVG
```

##### ุฌ) ุฌุฏุงูู

```
ูุฑูุฏ                           โ  ุฎุฑูุฌ MDX
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฟโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
ุณุงุฏู (ุจุฏูู ุงุฏุบุงู)               โ  Markdown pipe table
ุงุฏุบุงู (colspan/rowspan)        โ  <table> HTML ุฏุฑูู MDX
ุฑูฺฏ                           โ  <table> ุจุง className โ CSS
ุทููุงู (longtable)              โ  <div style="overflow-x:auto"><table>
ุงูู (sidewaystable)            โ  <div className="landscape-table">
tabularx                        โ  <table> ุจุง ุนุฑุถ ฑฐฐูช
CSV table                       โ  Markdown pipe table

โ ูฺฉุงุช ูุงุฑุณ:
- ุฌูุช ุฌุฏูู: direction: rtl
- ูุญุชูุง ุฑุงุถ ุฏุฑ ุณููู: ุญูุธ $...$
- header ูุงุฑุณ: text-align: right
- ุนููุงู ุฌุฏูู (caption): ุฒุฑ ุฌุฏูู (ุทุจู ุณูุช ูุงุฑุณ)
  ุง ุจุงูุง ุฌุฏูู (ุทุจู ุณูุช ุงูฺฏูุณ) โ ูุงุจู ุชูุธู
```

##### ุฏ) ุชุตุงูุฑ ู ุฑุณุงูู

```
ูุฑูุฏ                           โ  ุฎุฑูุฌ MDX
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฟโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
\includegraphics{path}          โ  <Image src="path" alt="..." />
![alt](path)                    โ  <Image src="path" alt="..." />
<img src="path">                โ  <Image src="path" alt="..." />
\begin{figure}...\caption       โ  <Figure> ฺฉุงููพูููุช
\begin{wrapfigure}              โ  <Figure float="right"> ุง CSS
\begin{subfigure}               โ  <FigureGrid> ฺฉุงููพูููุช
<video>/<iframe>                โ  <Video> / <Embed> ฺฉุงููพูููุช
<audio>                         โ  <Audio> ฺฉุงููพูููุช
SVG inline                      โ  ูุงู ูุฌุฒุง ุง inline

ูุณุฑุฏู:
- ุชุตุงูุฑ ฺฉูพ ูโุดููุฏ ุจู: assets/images/{slug}/
- ูุงูโฺฏุฐุงุฑ: {slug}-fig-{number}.{ext}
- ุจูููโุณุงุฒ: WebP/AVIF ุจุฑุง ุชุตุงูุฑ ุฑุณุชุฑ
- SVG: ุจูููโุณุงุฒ ุจุง SVGO
- alt text: ุงุฌุจุงุฑ (ุงุฒ caption ุง AI)
```

##### ู) ูุถู / ุชุนุฑู / ุงุซุจุงุช

```
ูุฑูุฏ                           โ  ุฎุฑูุฌ MDX
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฟโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
LaTeX: \begin{theorem}          โ  <Theorem id="..." title="...">
LaTeX: \begin{definition}       โ  <Definition id="..." title="...">
LaTeX: \begin{proof}            โ  <Proof for="...">
LaTeX: \begin{example}          โ  <Example id="..." title="...">
LaTeX: \begin{lemma}            โ  <Theorem type="lemma" ...>
LaTeX: \begin{corollary}        โ  <Theorem type="corollary" ...>
tcolorbox (custom)              โ  ฺฉุงููพูููุช ูุชูุงุธุฑ
Admonition (MD/RST/AsciiDoc)   โ  <Admonition type="note|warning|...">

MD: > [!NOTE]                   โ  <Admonition type="note">
MD: > [!WARNING]                โ  <Admonition type="warning">
MD: > [!TIP]                    โ  <Admonition type="tip">
```

##### ู) ฺฉุฏ

```
ูุฑูุฏ                           โ  ุฎุฑูุฌ MDX
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฟโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
LaTeX: \begin{lstlisting}       โ  ```python {title="...",lines=true}
LaTeX: \begin{minted}           โ  ```python {title="..."}
LaTeX: \begin{verbatim}         โ  ```text
MD: ```python                   โ  ```python
HTML: <pre><code>               โ  ```language
MD: `inline`                    โ  `inline`
LaTeX: \texttt{...}             โ  `...`
LaTeX: \verb|...|               โ  `...`

โ ุฌูุช: ุจููฺฉโูุง ฺฉุฏ ููุดู LTR
   direction: ltr; text-align: left; unicode-bidi: isolate;
```

##### ุฒ) ููฺฉโูุง ู ุงุฑุฌุงุนุงุช

```
ูุฑูุฏ                           โ  ุฎุฑูุฌ MDX
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฟโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
\href{url}{text}                โ  [text](url)
\url{url}                       โ  [url](url)
\ref{label}                     โ  [ุดูุงุฑู](#label) ุง <InternalRef>
\cref{label}                    โ  <CrossRef id="label" />
\cite{key}                      โ  <Citation id="key" /> ุง [^cite-key]
\footnote{text}                 โ  [^fn-N] ... [^fn-N]: text
\endnote{text}                  โ  ุฌูุนโุขูุฑ ุฏุฑ ุงูุชูุง ุณูุฏ
[text](url)                     โ  [text](url) (ุญูุธ)
<a href="url">                  โ  [text](url)

โ ุงุฑุฌุงุนุงุช ุจู ูุตูโูุง:
  - \ref{ch2:thm:demorgan} โ
    [ูุถู ฑ.ฑ](/series-slug/ch02#thm-demorgan)
  - ููฺฉโูุง ูุณุจ ุจู ูุงูโูุง MDX
```

##### ุญ) ูพุงููุดุช ู ฺฉุชุงุจโูุงูู

```
ูพุงููุดุช:
โโโโโโ
LaTeX \footnote{text}     โ [^fn-1] ... [^fn-1]: text
LaTeX \LTRfootnote{text}  โ [^fn-1] ... [^fn-1]: text (LTR)
LaTeX \endnote{text}      โ ุฌูุนโุขูุฑ ุฏุฑ ุจุฎุด ยซูพโููุดุชโูุงยป
MD [^1]                   โ ุญูุธ
HTML <sup><a href="#fn">  โ [^fn-N]

ฺฉุชุงุจโูุงูู:
โโโโโโโโโ
LaTeX biblatex/bibtex     โ ุชุจุฏู .bib ุจู JSON
                          โ ุฑูุฏุฑ ุจุง <Bibliography> ฺฉุงููพูููุช
                          โ ุง ุชุจุฏู ุจู ูุณุช ูุฑุชุจ MD
APA/IEEE/... ุณุจฺฉ         โ ูุงุจู ุชูุธู
ุงุฑุฌุงุน \cite{key}         โ [ููุณูุฏู, ุณุงู] ุจุง ููฺฉ ุจู entry
```

##### ุท) ูุฏุฑุช RTL ู ูุงุฑุณ

```
ููุงุนุฏ ุญุงุช RTL/ูุงุฑุณ:
โโโโโโโโโโโโโโโโโโโโโโโ

1. ููโูุงุตูู (ZWNJ, U+200C):
   - ูุฑฺฏุฒ ุญุฐู ูุดูุฏ
   - ุฏุฑ ูุฑ ูุฑุญูู ุชุจุฏู ุจุฑุฑุณ ุดูุฏ
   - ุดูุงุฑุด ZWNJ ูุจู ู ุจุนุฏ ุชุจุฏู: ุจุงุฏ ุจุฑุงุจุฑ ุจุงุดุฏ
   - ุงฺฏุฑ ุงุฎุชูุงู > 0: ูุดุฏุงุฑ + ฺฏุฒุงุฑุด ูุญู ุญุฐู

2. ุฌูุชโุฏู:
   - ุจุฏูู ุงุตู: dir="rtl"
   - ุจููฺฉโูุง ฺฉุฏ: dir="ltr", unicode-bidi: isolate
   - ูุฑูููโูุง ุฑุงุถ: LTR (ุฎูุฏฺฉุงุฑ)
   - ูููุฏุงุฑูุง Mermaid: LTR container, RTL text labels
   - ุฌุฏุงูู: dir="rtl"
   - ุจููฺฉโูุง ุชูุงูโุงูฺฏูุณ: <div dir="ltr" lang="en">

3. ฺฏููู:
   - ูุงุฑุณ: ยซ...ยป  (U+00AB, U+00BB)
   - ูู "..." ุง '...'

4. ุงุนุฏุงุฏ:
   - ูุชู ูุงุฑุณ: ฐฑฒณดตถทธน (ุงุฎุชุงุฑ โ ูุงุจู ุชูุธู)
   - ฺฉุฏ/ุฑุงุถ: 0123456789 (ููุดู ูุงุชู)
   - ุชุงุฑุฎ ูุงุฑุณ: ฑดฐด/ฐด/ฒฒ

5. ุชุงูพูฺฏุฑุงู:
   - ูุงุตูู ูุจู ุงุฒ ยซ:ยป ู ยซุยป ู ยซ?ยป ู ยซ!ยป โ ุญุฐู (ุทุจู ุณูุช ูุงุฑุณ)
   - ูุงุตูู ุจุนุฏ ุงุฒ ยซ.ยป ู ยซ,ยป โ ุญูุธ
   - ูโ + ูุนู โ ููโูุงุตูู (ูู ูุงุตูู)
   - ยซูุงยป / ยซุงยป / ยซุชุฑยป / ยซุชุฑูยป โ ููโูุงุตูู

6. LaTeX ุฎุงุต:
   - \lr{...} โ <span dir="ltr">...</span>
   - \rl{...} โ <span dir="rtl">...</span>
   - \begin{latin} โ <div dir="ltr" lang="en">
   - \begin{persian} โ <div dir="rtl" lang="fa">
   - \LTRfootnote โ ูพุงููุดุช ุจุง dir="ltr"

7. Frontmatter:
   - lang: "fa"
   - dir: "rtl"
   - ููุดู ุญุงุถุฑ ุจุงุดูุฏ
```

#### ด.ณ.ฒ ููุงุนุฏ ุชุจุฏู ุงุฎุชุตุงุต ูุฑ ูุฑูุช

##### LaTeX โ MDX

```
ูพุฑุฏุงุฒุด ุชุฑุชุจ:
โโโโโโโโโโโโโโ

ฑ. ุชุญูู preamble:
   - ุงุณุชุฎุฑุงุฌ ูพฺฉุฌโูุง ู ุชูุธูุงุช
   - ุดูุงุณุง ูููุชโูุง
   - ุดูุงุณุง ูุญุทโูุง ุณูุงุฑุด (newtheorem, newtcbtheorem, etc.)
   - ุดูุงุณุง ุฏุณุชูุฑุงุช ุณูุงุฑุด (\newcommand)

ฒ. ุจุงุฒฺฏุดุง ูุงฺฉุฑููุง:
   - \newcommand โ ุจุงุฒููุณ inline
   - \input{file} โ ุงุฏุบุงู ูุงู
   - \include{file} โ ุงุฏุบุงู ูุงู

ณ. ุชุจุฏู ุณุงุฎุชุงุฑ:
   - \chapter โ # (H1)
   - \section โ ## (H2)
   - \subsection โ ### (H3)
   - \subsubsection โ #### (H4)
   - \paragraph โ ##### (H5)

ด. ุชุจุฏู ูุงูุจโุจูุฏ:
   - \textbf{} โ **...**
   - \emph{} / \textit{} โ *...*
   - \underline{} โ <u>...</u>
   - \sout{} โ ~~...~~
   - \texttt{} โ `...`
   - \textsc{} โ <span style="font-variant:small-caps">
   - \footnotesize / \small โ <small>

ต. ุชุจุฏู ูุญุทโูุง:
   - itemize โ - ูุณุช
   - enumerate โ 1. ูุณุช
   - description โ Definition List
   - figure โ <Figure>
   - table โ <table> ุง pipe table
   - equation/align/gather โ $$...$$
   - theorem/definition/proof โ ฺฉุงููพูููุชโูุง
   - lstlisting/minted โ ```code```
   - algorithm2e โ ุดุจูโฺฉุฏ ุง ฺฉุฏ
   - tikzpicture โ SVG/PNG
   - tcolorbox โ <Admonition> ุง <Box>

ถ. ุชุจุฏู ุงุฑุฌุงุนุงุช:
   - \label{} โ id
   - \ref{} / \cref{} โ ููฺฉ
   - \cite{} โ ุงุฑุฌุงุน
   - \footnote{} โ ูพุงููุดุช
   - \bibliography{} โ ฺฉุชุงุจโูุงูู

ท. ุญุฐู ุฏุณุชูุฑุงุช ุบุฑุถุฑูุฑ:
   - \usepackage{} โ ุญุฐู
   - \pagestyle{} โ ุญุฐู
   - \geometry{} โ ุญุฐู
   - \fancyhf{} โ ุญุฐู
   - ุชูุธูุงุช ุตูุญูโุจูุฏ โ ุญุฐู
```

##### HTML โ MDX

```
ูพุฑุฏุงุฒุด ุชุฑุชุจ:
โโโโโโโโโโโโโโ

ฑ. ุชุญูู <head>:
   - ุงุณุชุฎุฑุงุฌ <title>, <meta> โ frontmatter
   - ุดูุงุณุง CSS โ ุชุจุฏู ุจู className
   - ุดูุงุณุง <script> โ ุญุฐู ุง ุชุจุฏู

ฒ. ุชูุฒฺฉุงุฑ HTML:
   - ุญุฐู ุชฺฏโูุง ุบุฑุถุฑูุฑ (<div> ุชูุฏุฑุชู ุจุฏูู ูุนูุง)
   - ุชุจุฏู <br> โ newline
   - ุชุจุฏู &nbsp; โ ูุงุตูู
   - ุชุจุฏู HTML entities โ Unicode
   - ุญุฐู inline styles โ className

ณ. ุชุจุฏู ุณุงุฎุชุงุฑ:
   - <h1>-<h6> โ #-######
   - <p> โ ูพุงุฑุงฺฏุฑุงู
   - <strong>/<b> โ **...**
   - <em>/<i> โ *...*
   - <a href> โ [text](url)
   - <img> โ <Image>
   - <ul>/<ol> โ ูุณุช MD
   - <table> โ pipe table ุง <table> MDX
   - <blockquote> โ > ูููโููู
   - <pre><code> โ ```code```
   - <figure> โ <Figure>
   - <details> โ <Details> ฺฉุงููพูููุช
   - <sup>/<sub> โ <sup>/<sub>
   - <mark> โ <mark>
   - <kbd> โ <kbd>
   - <abbr> โ <abbr>
   - <time> โ <time>
   - <address> โ <address>

ด. ุชุจุฏู ูุฑูโูุง:
   - <form>, <input>, <select> โ <Form> ฺฉุงููพูููุช (ุง ุญุฐู)

ต. ุชุจุฏู ุฑุณุงูู:
   - <video>/<iframe> โ <Video>/<Embed>
   - <audio> โ <Audio>
   - <svg> โ ูุงู ูุฌุฒุง + <Image>

ถ. ุญูุธ dir/lang:
   - <div dir="ltr"> โ ุญูุธ
   - <span lang="en"> โ ุญูุธ
```

##### Markdown โ MDX

```
ูพุฑุฏุงุฒุด ุชุฑุชุจ:
โโโโโโ

ุงุฏุงูู ูพุฑุงููพุช ุฌุงูุน:

```markdown
##### Markdown โ MDX (ุงุฏุงูู)

```
ูพุฑุฏุงุฒุด ุชุฑุชุจ:
โโโโโโโโโโโโโโ

ฑ. ุชุญูู Frontmatter:
   - YAML (---) โ ุญูุธ ู ุชฺฉูู
   - TOML (+++) โ ุชุจุฏู ุจู YAML
   - ุงุนุชุจุงุฑุณูุฌ ู ุชฺฉูู ููุฏูุง ูุงูุต

ฒ. ุชุจุฏู ุนูุงุตุฑ:
   - ุงฺฉุซุฑ ุนูุงุตุฑ MD ูุณุชููุงู ุฏุฑ MDX ูุนุชุจุฑูุฏ โ ุญูุธ
   - GFM extensions โ ุจุฑุฑุณ ูพุดุชุจุงู ุฏุฑ MDX pipeline

ณ. ุชุจุฏูโูุง ุฎุงุต MDX:
   - ```mermaid โ <MermaidDiagram chart={`...`} />
   - ![alt](src) โ <Image src={src} alt={alt} />  (ุงุฎุชุงุฑ)
   - > [!NOTE] โ <Admonition type="note">
   - > [!WARNING] โ <Admonition type="warning">
   - > [!TIP] โ <Admonition type="tip">
   - > [!CAUTION] โ <Admonition type="caution">
   - > [!IMPORTANT] โ <Admonition type="important">
   - <details> โ <Details> ุง <Collapsible>

ด. ุงุถุงูู ฺฉุฑุฏู import ูุง:
   - ุจุฑุฑุณ ฺฉุงููพูููุชโูุง ุงุณุชูุงุฏูโุดุฏู
   - ุงุถุงูู ฺฉุฑุฏู import ุฎูุฏฺฉุงุฑ ุฏุฑ ุจุงูุง ูุงู:
     import Theorem from '@/components/Theorem';
     import MermaidDiagram from '@/components/MermaidDiagram';
     ...

ต. ุจุฑุฑุณ ุณุงุฒฺฏุงุฑ JSX:
   - class โ className
   - for โ htmlFor
   - style="..." โ style={{...}}
   - <!-- comment --> โ {/* comment */}
   - ุฎูุฏ-ุจุณุชูโุดููุฏู: <br> โ <br />
   - <img> โ <img /> ุง <Image />

ถ. ุญูุธ HTML ุฏุฑูู MD:
   - HTML ูุนุชุจุฑ โ ุญูุธ (MDX ุงุฒ HTML ูพุดุชุจุงู ูโฺฉูุฏ)
   - ุชุจุฏู ุจู JSX syntax ุฏุฑ ุตูุฑุช ูุงุฒ
```

##### DOCX โ MDX

```
ูพุฑุฏุงุฒุด ุชุฑุชุจ:
โโโโโโโโโโโโโโ

ฑ. ุงุณุชุฎุฑุงุฌ ูุญุชูุง:
   - ุงุณุชูุงุฏู ุงุฒ python-docx ุง pandoc
   - ุงุณุชุฎุฑุงุฌ Core Properties โ frontmatter
   - ุญูุธ ุณุงุฎุชุงุฑ Heading Levels

ฒ. ุชุจุฏู ุณุจฺฉโูุง:
   - Heading 1-6 โ # ุชุง ######
   - Normal โ ูพุงุฑุงฺฏุฑุงู
   - List Bullet โ - ูุณุช
   - List Number โ 1. ูุณุช
   - Quote โ > ูููโููู
   - Code โ ```code```
   - Table โ pipe table ุง <table>

ณ. ุชุจุฏู ูุงูุจโุจูุฏ:
   - Bold โ **...**
   - Italic โ *...*
   - Underline โ <u>...</u>
   - Strikethrough โ ~~...~~
   - Superscript โ <sup>...</sup>
   - Subscript โ <sub>...</sub>
   - Highlight โ <mark>...</mark>

ด. ุงุณุชุฎุฑุงุฌ ุชุตุงูุฑ:
   - ุชุตุงูุฑ embed ุดุฏู โ ุงุณุชุฎุฑุงุฌ ุจู ูพูุดู assets
   - ุชุจุฏู WMF/EMF โ PNG/SVG
   - ุญูุธ alt text

ต. ุชุจุฏู ูุฑูููโูุง:
   - OMML (Office Math) โ LaTeX โ $...$
   - MathType OLE โ LaTeX (ุฏุฑ ุตูุฑุช ุงูฺฉุงู)

ถ. ุชุจุฏู ุฌุฏุงูู:
   - Simple table โ pipe table
   - Merged cells โ <table> HTML
   - Table style โ CSS classes

ท. ุญูุธ RTL:
   - ุจุฑุฑุณ paragraph direction
   - ุจุฑุฑุณ run-level bidi
   - ุชูุธู dir attributes

ธ. ูพุงููุดุชโูุง:
   - Footnotes โ [^fn-N]
   - Endnotes โ ุจุฎุด ูพโููุดุช
```

##### PDF โ MDX

```
ูพุฑุฏุงุฒุด ุชุฑุชุจ:
โโโโโโโโโโโโโโ

โ PDF ูพฺุฏูโุชุฑู ูุฑูุช ุจุฑุง ุชุจุฏู ุงุณุช.
   ฺฉูุช ุฎุฑูุฌ ุจุณุชฺฏ ุจู ููุน PDF ุฏุงุฑุฏ.

ฑ. ุชุดุฎุต ููุน PDF:
   - PDF ูุชู (text-based): ุจูุชุฑู ฺฉูุช
   - PDF ุงุณฺฉูโุดุฏู (image-based): ูุงุฒ ุจู OCR
   - PDF ุชุฑฺฉุจ: ุจุฎุด ูุชูุ ุจุฎุด ุชุตูุฑ
   - PDF ุงุฒ LaTeX: ุจูุชุฑู ุญุงูุช (ุณุงุฎุชุงุฑ ุญูุธ ุดุฏู)

ฒ. ุงุณุชุฎุฑุงุฌ ูุชู:
   - ุงุจุฒุงุฑ ุงุตู: PyMuPDF (fitz) ุง pdfplumber
   - ุงุจุฒุงุฑ ุฌุงฺฏุฒู: pdftotext (poppler)
   - OCR: Tesseract + pytesseract (ุจุฑุง ุชุตุงูุฑ)
     โ ุจุง ุฒุจุงู ูุงุฑุณ: tesseract --oem 3 -l fas+eng

ณ. ุจุงุฒุณุงุฒ ุณุงุฎุชุงุฑ:
   - ุชุดุฎุต ุนูุงูู (ุจุฑ ุงุณุงุณ ุงูุฏุงุฒู ูููุช ู ุจููุฏ ุจูุฏู)
   - ุชุดุฎุต ูพุงุฑุงฺฏุฑุงูโูุง
   - ุชุดุฎุต ูุณุชโูุง
   - ุชุดุฎุต ุฌุฏุงูู (ุจุง camelot ุง tabula)
   - ุชุดุฎุต ูุฑูููโูุง (ุจุง Nougat ุง Mathpix)
   - ุชุดุฎุต ุชุตุงูุฑ (ุงุณุชุฎุฑุงุฌ embedded images)

ด. ุจุงุฒุณุงุฒ ูุฑูููโูุง:
   - ุงุจุฒุงุฑ ฑ: Nougat (Meta) โ ูุฏู ุชุฎุตุต PDFโLaTeX
   - ุงุจุฒุงุฑ ฒ: Mathpix API โ ุชุจุฏู ุชุตูุฑ ูุฑููู โ LaTeX
   - ุงุจุฒุงุฑ ณ: InftyReader
   - ุงุจุฒุงุฑ ด: AI (GPT-4 Vision) โ ุจุฑุง ููุงุฑุฏ ูพฺุฏู

ต. ุงุณุชุฎุฑุงุฌ ุชุตุงูุฑ:
   - PyMuPDF: page.get_images()
   - ุฐุฎุฑู ุจุง ฺฉูุช ุงุตู
   - ุชุนู ูุญู ุฏุฑ ูุชู

ถ. ูพุฑุฏุงุฒุด RTL:
   - ุชุดุฎุต ุฌูุช ูพุงุฑุงฺฏุฑุงู
   - ุงุตูุงุญ ุชุฑุชุจ ฺฉุงุฑุงฺฉุชุฑูุง (logical order vs visual order)
   - ุจุงุฒุณุงุฒ ููโูุงุตููโูุง (ููฺฉู ุงุณุช ุงุฒ ุฏุณุช ุฑูุชู ุจุงุดูุฏ)

ท. ุจุฑุฑุณ ฺฉูุช:
   - ููุงุณู ุชุนุฏุงุฏ ุตูุญุงุช
   - ููุงุณู ุชุนุฏุงุฏ ุชุตุงูุฑ
   - ููุงุณู ุชูุฑุจ ุชุนุฏุงุฏ ฺฉููุงุช
   - ุงูุชุงุฒ ุงุทููุงู (confidence score)

โ ูุญุฏูุฏุชโูุง:
   - ูุฑูููโูุง ูพฺุฏู ููฺฉู ุงุณุช ูุงุฏุฑุณุช ุชุจุฏู ุดููุฏ
   - ุฌุฏุงูู ูพฺุฏู ููฺฉู ุงุณุช ุดฺฉุณุชู ุดููุฏ
   - ููโูุงุตููโูุง ููฺฉู ุงุณุช ุงุฒ ุฏุณุช ุฑูุชู ุจุงุดูุฏ
   - ุชูุตู: PDF ุงุฒ LaTeX โ ุจูุชุฑ ุงุณุช ูุงู .tex ุงุตู ุชุจุฏู ุดูุฏ
```

##### RST โ MDX

```
ูพุฑุฏุงุฒุด ุชุฑุชุจ:
โโโโโโโโโโโโโโ

ฑ. ุชุญูู ุณุงุฎุชุงุฑ:
   - ุนููุงูโูุง (overline/underline) โ #-######
   - .. contents:: โ TOC
   - .. meta:: โ frontmatter

ฒ. ุชุจุฏู Directives:
   - .. note:: โ <Admonition type="note">
   - .. warning:: โ <Admonition type="warning">
   - .. tip:: โ <Admonition type="tip">
   - .. danger:: โ <Admonition type="danger">
   - .. admonition:: Title โ <Admonition title="Title">
   - .. code-block:: lang โ ```lang
   - .. math:: โ $$...$$
   - .. figure:: โ <Figure>
   - .. image:: โ <Image>
   - .. table:: โ <table>
   - .. csv-table:: โ pipe table
   - .. list-table:: โ pipe table
   - .. topic:: โ <Box>
   - .. sidebar:: โ <Sidebar>
   - .. epigraph:: โ <Blockquote>
   - .. pull-quote:: โ <Blockquote>
   - .. container:: class โ <div className="class">
   - .. raw:: html โ ุญูุธ HTML

ณ. ุชุจุฏู Roles:
   - :math:`...` โ $...$
   - :ref:`label` โ [text](#label)
   - :doc:`path` โ [text](path)
   - :download:`path` โ [text](path)
   - :abbr:`text (explanation)` โ <abbr title="explanation">text</abbr>
   - :kbd:`key` โ <kbd>key</kbd>

ด. ุชุจุฏู ูพุงููุดุช/ุงุฑุฌุงุน:
   - [#fn]_ โ [^fn]
   - [label]_ โ [text](#label) ุง [text](url)
   - .. [label] โ ุชุนุฑู ุงุฑุฌุงุน

ต. Field Lists:
   - :field: value โ ูุชุงุฏุชุง ุง definition list
```

##### AsciiDoc โ MDX

```
ูพุฑุฏุงุฒุด ุชุฑุชุจ:
โโโโโโโโโโโโโโ

ฑ. ุชุญูู Header:
   - = Title โ # (H1)
   - :attribute: โ frontmatter
   - Author line โ author metadata

ฒ. ุชุจุฏู ุณุงุฎุชุงุฑ:
   - == Section โ ## (H2)
   - === Subsection โ ### (H3)
   - .Title โ ุนููุงู ุจููฺฉ
   - [options] โ ุชูุธูุงุช ุจููฺฉ

ณ. ุชุจุฏู ุจููฺฉโูุง:
   - [source,lang]---- โ ```lang
   - [stem]++++ โ $$...$$
   - [NOTE]==== โ <Admonition type="note">
   - [WARNING]==== โ <Admonition type="warning">
   - [TIP]==== โ <Admonition type="tip">
   - [IMPORTANT]==== โ <Admonition type="important">
   - [CAUTION]==== โ <Admonition type="caution">
   - [quote,author]____ โ <Blockquote>
   - [%collapsible]==== โ <Details>
   - |=== table โ pipe table ุง <table>
   - image::path[] โ <Image>

ด. ุชุจุฏู Inline:
   - *bold* โ **bold**
   - _italic_ โ *italic*
   - `mono` โ `mono`
   - stem:[...] โ $...$
   - <<anchor>> โ [text](#anchor)
   - footnote:[text] โ [^fn]
   - btn:[text] โ <Button>
   - kbd:[key] โ <kbd>key</kbd>
   - menu:path[] โ breadcrumb
```

##### EPUB โ MDX

```
ูพุฑุฏุงุฒุด ุชุฑุชุจ:
โโโโโโโโโโโโโโ

ฑ. ุงุณุชุฎุฑุงุฌ:
   - EPUB = ZIP ุญุงู XHTML + CSS + ุชุตุงูุฑ + metadata
   - ุงุณุชุฎุฑุงุฌ content.opf โ ูุชุงุฏุชุง
   - ุงุณุชุฎุฑุงุฌ toc.ncx ุง nav.xhtml โ ููุฑุณุช ูุทุงูุจ

ฒ. ุชุจุฏู ูุตูโูุง:
   - ูุฑ ูุงู XHTML โ ฺฉ ูุงู MDX
   - ุง ุงุฏุบุงู ููู โ ฺฉ ูุงู MDX

ณ. ุชุจุฏู XHTML โ MDX:
   - ูุดุงุจู HTML โ MDX

ด. ูุฏุฑุช ุชุตุงูุฑ:
   - ุงุณุชุฎุฑุงุฌ ุงุฒ EPUB archive
   - ฺฉูพ ุจู ูพูุดู assets
```

##### Jupyter Notebook โ MDX

```
ูพุฑุฏุงุฒุด ุชุฑุชุจ:
โโโโโโโโโโโโโโ

ฑ. ุชุญูู .ipynb (JSON):
   - metadata โ frontmatter
   - cells โ ุจุฎุดโูุง ูุญุชูุง

ฒ. ุชุจุฏู ุณูููโูุง:
   - markdown cell โ ูุญุชูุง MDX ูุณุชูู
   - code cell โ ```python ... ```
   - code output (text) โ ุจููฺฉ ุฎุฑูุฌ
   - code output (image) โ <Image>
   - code output (HTML) โ ุชุจุฏู HTML

ณ. ูุฏุฑุช ุฎุฑูุฌโูุง:
   - stdout โ <Output type="stdout">
   - stderr โ <Output type="stderr">
   - display_data (image/png) โ ุงุณุชุฎุฑุงุฌ + <Image>
   - display_data (text/html) โ ุชุจุฏู HTML
   - execute_result โ <Output>
```

#### ด.ณ.ณ ุณุงุฎุชุงุฑ ุฎุฑูุฌ MDX

```
ุฎุฑูุฌ ููููู ุจุฑุง ฺฉ ููุงูู:
โโโโโโโโโโโโโโโโโโโโโโโโโโ

de-morgans-laws/
โโโ index.mdx                  โ ูุงู ุงุตู MDX
โโโ assets/
    โโโ diagram1.svg           โ ูููุฏุงุฑ ุชุจุฏูโุดุฏู ุงุฒ TikZ
    โโโ proof-tree.svg         โ ุฏุฑุฎุช ุงุซุจุงุช
    โโโ cover.webp             โ ุชุตูุฑ ุดุงุฎุต (ุจูููโุดุฏู)


ุฎุฑูุฌ ููููู ุจุฑุง ฺฉ ฺฉุชุงุจ:
โโโโโโโโโโโโโโโโโโโโโโโโโ

logic-foundations/
โโโ _series.json               โ ูุชุงุฏุชุง ูุฌููุนู
โโโ 00-introduction/
โ   โโโ index.mdx
โ   โโโ assets/
โโโ 01-propositional-logic/
โ   โโโ index.mdx
โ   โโโ assets/
โ       โโโ truth-table.svg
โ       โโโ demorgan-proof.svg
โโโ 02-predicate-logic/
โ   โโโ index.mdx
โ   โโโ assets/
โโโ bibliography.json          โ ฺฉุชุงุจโูุงูู ูุดุชุฑฺฉ
โโโ shared-assets/
    โโโ cover.webp
```

```mdx
{/* === ููููู ุฎุฑูุฌ MDX === */}

---
title: "ูุงููู ุฏููุฑฺฏุงู ู ฺฉุงุฑุจุฑุฏูุง ุขู"
titleEn: "De Morgan's Laws and Their Applications"
slug: "de-morgans-laws"
date: "2025-07-13"
author:
  name: "ููุฏ ุณุงูู"
  nameEn: "Mahdi Salem"
  email: "ali@example.com"
lang: "fa"
dir: "rtl"
type: "article"
tags: ["ููุทู", "ุฏููุฑฺฏุงู", "ุงุซุจุงุช", "ฺฏุฒุงุฑูโุง"]
tagsEn: ["logic", "de-morgan", "proof", "propositional"]
categories: ["ููุทู ุฑุงุถ"]
description: "ุจุฑุฑุณ ู ุงุซุจุงุช ููุงูู ุฏููุฑฺฏุงู ุฏุฑ ููุทู ฺฏุฒุงุฑูโุง ุจุง ุฌุฏูู ุงุฑุฒุด ู ุฑูุด ุงุณุชูุชุงุฌ ุทุจุน"
math: true
mermaid: true
codeHighlight: true
toc: true
sourceFormat: "latex"
sourceFile: "demorgan.tex"
convertedAt: "2025-07-13T15:30:42+03:30"
converterVersion: "FormatForge 1.0.0"
qualityScore: 95
---

import Theorem from '@/components/Theorem';
import Definition from '@/components/Definition';
import Proof from '@/components/Proof';
import Example from '@/components/Example';
import Admonition from '@/components/Admonition';
import Figure from '@/components/Figure';
import MermaidDiagram from '@/components/MermaidDiagram';
import CrossRef from '@/components/CrossRef';
import Citation from '@/components/Citation';

# ูุงููู ุฏููุฑฺฏุงู ู ฺฉุงุฑุจุฑุฏูุง ุขู

{/* ... ูุญุชูุง ุชุจุฏูโุดุฏู ... */}
```

#### ด.ณ.ด ููุงุด ูพุดุฑูุช ู ุฎุทุงูุง

```
๐ ุชุจุฏู: logic-book/ โ MDX
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

๐ ูุงู ฑ/ด: main.tex
  [โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ] 100%
  โ Frontmatter ุงุณุชุฎุฑุงุฌ ุดุฏ
  โ ณ ูุตู ุดูุงุณุง ุดุฏ
  โญ ูพุฑุฏุงุฒุด ูุตูโูุง ุจูโุตูุฑุช ูุฌุฒุง

๐ ูุงู ฒ/ด: chapter01.tex
  [โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ] 52%
  โ ุนูุงูู: ด ุจุฎุด ุชุจุฏู ุดุฏ
  โ ุฑุงุถ: ฑฒ ูุฑููู ุชุจุฏู ุดุฏ
  โ TikZ: ูููุฏุงุฑ ุฎุท ธต โ ุชุจุฏู ุจู SVG...
  [โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ] 78%
  โ TikZ โ SVG: assets/ch01-fig-01.svg (12 KB)
  โ ุฌุฏุงูู: ฒ ุฌุฏูู ุชุจุฏู ุดุฏ
  โ ูุถูโูุง: ณ ูุถู + ฒ ุชุนุฑู + ณ ุงุซุจุงุช
  โ ูพุงููุดุช: ด ูพุงููุดุช
  โ ุงุฑุฌุงุนุงุช: ถ ุงุฑุฌุงุน ูุชูุงุทุน
  [โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ] 100%
  โ chapter01.tex โ 01-introduction/index.mdx

๐ ูุงู ณ/ด: chapter02.tex
  [โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ] 30%
  โ ูุดุฏุงุฑ: ูุฑููู ุฎุท ฑตท โ \begin{align} ุจุฏูู \end{align}
    โ ุงุตูุงุญ ุฎูุฏฺฉุงุฑ: ุงุถุงูู ุดุฏ \end{aligned} (ุชุฃุฏุ [Y/n])
  [โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ] 100%
  โ chapter02.tex โ 02-propositional-logic/index.mdx

๐ ูุงู ด/ด: references.bib
  โ ฑต ูุฑุฌุน โ bibliography.json

๐ ุขูุงุฑ ููุง:
โโโโโโโโโโโโโโ
  ูุงูโูุง MDX ุชููุฏุดุฏู: ณ
  ุชุตุงูุฑ/SVG: ต ูุงู (ฑธฐ KB)
  ูุฑูููโูุง: ดฒ (ููู ูููู โ)
  ุฌุฏุงูู: ท (ููู ูููู โ)
  ูููุฏุงุฑูุง: ณ TikZโSVG (ููู ูููู โ)
  ฺฉุฏ: ด ุจููฺฉ (ููู ูููู โ)
  ุงุฑุฌุงุนุงุช: ฑธ (ฑถ ูููู โ, ฒ ูุดุฏุงุฑ โ)
  ููโูุงุตูู: ฒณด (ูุจู) โ ฒณด (ุจุนุฏ) โ ุจุฏูู ุชุบุฑ
  ุฒูุงู: ณธ ุซุงูู

  โ ูุดุฏุงุฑูุง:
    1. ฒ ุงุฑุฌุงุน ุจู ูุตู ณ ฺฉู ูููุฒ ุชุจุฏู ูุดุฏู
       โ ูพุดููุงุฏ: ุจุนุฏ ุงุฒ ุชุจุฏู ูุตู ณ ููฺฉโูุง ุงุตูุงุญ ุดููุฏ
    2. ูุฑููู ุฎุท ฑตท ุงุตูุงุญ ุฎูุฏฺฉุงุฑ ุดุฏ

  ุงุฏุงูู ุจู ูุฑุญูู ุชุณุชุ [Y/n]: โ
```

---

### โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
### STAGE 4: ุชุณุช ฺฉูุช ุฎุฑูุฌ
### โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

#### ด.ด.ฑ ุณุทูุญ ุชุณุช

```
ุณุทุญ ฑ: ุชุณุช ุณุงุฎุชุงุฑ (Structural Test)
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โ Frontmatter YAML ูุนุชุจุฑ ุงุณุช
โ ุชูุงู ููุฏูุง ุงุฌุจุงุฑ ุญุงุถุฑูุฏ
โ ุชูุงู import ูุง ูุฌูุฏ ุฏุงุฑูุฏ ู ุตุญุญโุงูุฏ
โ JSX syntax ูุนุชุจุฑ ุงุณุช (parse ุจุฏูู ุฎุทุง)
โ ุชูุงู ุชฺฏโูุง ุจุณุชู ุดุฏูโุงูุฏ
โ ุชูุงู ฺฉุงููพูููุชโูุง import ุดุฏูโุงูุฏ
โ ูุงู ุจุฏูู ุฎุทุง MDX compile ูโุดูุฏ
โ encoding ุฎุฑูุฌ UTF-8 ุงุณุช

ุณุทุญ ฒ: ุชุณุช ูุญุชูุง (Content Test)
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โ ุชุนุฏุงุฏ ุนูุงูู ูุฑูุฏ = ุชุนุฏุงุฏ ุนูุงูู ุฎุฑูุฌ
โ ุชุนุฏุงุฏ ูพุงุฑุงฺฏุฑุงูโูุง ุชูุฑุจุงู ุจุฑุงุจุฑ
โ ุชุนุฏุงุฏ ูุฑูููโูุง: ูุฑูุฏ = ุฎุฑูุฌ
โ ุชุนุฏุงุฏ ุชุตุงูุฑ: ูุฑูุฏ = ุฎุฑูุฌ
โ ุชุนุฏุงุฏ ุฌุฏุงูู: ูุฑูุฏ = ุฎุฑูุฌ
โ ุชุนุฏุงุฏ ุจููฺฉโูุง ฺฉุฏ: ูุฑูุฏ = ุฎุฑูุฌ
โ ุชุนุฏุงุฏ ููฺฉโูุง: ูุฑูุฏ โ ุฎุฑูุฌ
โ ุชุนุฏุงุฏ ูพุงููุดุชโูุง: ูุฑูุฏ = ุฎุฑูุฌ
โ ุชุนุฏุงุฏ ุงุฑุฌุงุนุงุช ฺฉุชุงุจโูุงูู: ูุฑูุฏ = ุฎุฑูุฌ
โ ุชุนุฏุงุฏ ZWNJ: ูุฑูุฏ = ุฎุฑูุฌ
โ ุชุนุฏุงุฏ ฺฉููุงุช: ุงุฎุชูุงู < ตูช

ุณุทุญ ณ: ุชุณุช ุฑุงุถ (Math Test)
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โ ุชูุงู ูุฑูููโูุง inline ุจุง KaTeX parse ูโุดููุฏ
โ ุชูุงู ูุฑูููโูุง display ุจุง KaTeX parse ูโุดููุฏ
โ \begin{aligned} / \end{aligned} ุฌูุช ูุณุชูุฏ
โ \begin{cases} / \end{cases} ุฌูุช ูุณุชูุฏ
โ \begin{pmatrix} / \end{pmatrix} ุฌูุช ูุณุชูุฏ
โ ุชูุงู ูุงฺฉุฑููุง LaTeX ุดูุงุฎุชูโุดุฏู ูุณุชูุฏ
โ \label โ id ุชุจุฏู ุดุฏู
โ \ref โ ููฺฉ ุชุจุฏู ุดุฏู

ุณุทุญ ด: ุชุณุช ูุงุฑุณ/RTL (Persian Test)
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โ dir="rtl" ุฏุฑ frontmatter ูุณุช
โ lang="fa" ุฏุฑ frontmatter ูุณุช
โ ููโูุงุตููโูุง ุญูุธ ุดุฏูโุงูุฏ (ุดูุงุฑุด ZWNJ)
โ ฺฏูููโูุง ยซยป ูุณุชูุฏ (ูู "")
โ ุจููฺฉโูุง ฺฉุฏ dir="ltr" ุฏุงุฑูุฏ
โ ุจููฺฉโูุง ุงูฺฏูุณ dir="ltr" ุฏุงุฑูุฏ
โ \lr{} โ <span dir="ltr"> ุชุจุฏู ุดุฏู
โ \begin{latin} โ <div dir="ltr"> ุชุจุฏู ุดุฏู
โ ูุชู ูุงุฑุณ ุฏุฑูู ูุฑููู ุญูุธ ุดุฏู (\text{ุงฺฏุฑ})

ุณุทุญ ต: ุชุณุช ููฺฉโูุง (Link Test)
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โ ุชูุงู ููฺฉโูุง ุฏุงุฎู (anchor) ูุฏู ุฏุงุฑูุฏ
โ ุชูุงู ูุงูโูุง ุชุตูุฑ ุงุฑุฌุงุนโุดุฏู ูุฌูุฏ ุฏุงุฑูุฏ
โ ุชูุงู ููฺฉโูุง ุจู ูุตูโูุง ุตุญุญโุงูุฏ
โ ููฺฉโูุง ุฎุงุฑุฌ ูุฑูุช ุตุญุญ ุฏุงุฑูุฏ (ุงุฎุชุงุฑ: HTTP check)

ุณุทุญ ถ: ุชุณุช ุจุตุฑ (Visual Test) โ ุงุฎุชุงุฑ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โ ุฑูุฏุฑ MDX ุฏุฑ headless browser (Playwright/Puppeteer)
โ ุงุณฺฉุฑูโุดุงุช ุฎูุฏฺฉุงุฑ
โ ููุงุณู ุจุตุฑ ุจุง PDF ุงุตู (ุงุฎุชุงุฑ)
โ ุจุฑุฑุณ ุฑูุฏุฑ ูุฑูููโูุง
โ ุจุฑุฑุณ ุฑูุฏุฑ ูููุฏุงุฑูุง
โ ุจุฑุฑุณ ุฌูุช RTL
```

#### ด.ด.ฒ ุงูุชุงุฒ ฺฉูุช (Quality Score)

```python
# ูุญุงุณุจู ุงูุชุงุฒ ฺฉูุช 0-100

quality_score = 0

# ุณุงุฎุชุงุฑ (25 ุงูุชุงุฒ)
structural_tests = [frontmatter_valid, jsx_valid, imports_valid,
                    encoding_valid, compiles_ok]
quality_score += (sum(structural_tests) / len(structural_tests)) * 25

# ูุญุชูุง (25 ุงูุชุงุฒ)
content_ratio = min(
    headings_ratio,    # ุชุนุฏุงุฏ ุนูุงูู ูุฑูุฏ/ุฎุฑูุฌ
    formulas_ratio,    # ุชุนุฏุงุฏ ูุฑูููโูุง ูุฑูุฏ/ุฎุฑูุฌ
    images_ratio,      # ุชุนุฏุงุฏ ุชุตุงูุฑ ูุฑูุฏ/ุฎุฑูุฌ
    tables_ratio,      # ุชุนุฏุงุฏ ุฌุฏุงูู ูุฑูุฏ/ุฎุฑูุฌ
    code_ratio,        # ุชุนุฏุงุฏ ฺฉุฏ ูุฑูุฏ/ุฎุฑูุฌ
    words_ratio,       # ุชุนุฏุงุฏ ฺฉููุงุช (ุชูุฑุจ)
)
quality_score += content_ratio * 25

# ุฑุงุถ (20 ุงูุชุงุฒ)
math_parse_rate = formulas_parseable / total_formulas
quality_score += math_parse_rate * 20

# ูุงุฑุณ (20 ุงูุชุงุฒ)
persian_tests = [rtl_set, lang_set, zwnj_preserved,
                 quotes_correct, bidi_correct]
quality_score += (sum(persian_tests) / len(persian_tests)) * 20

# ููฺฉโูุง (10 ุงูุชุงุฒ)
link_validity = valid_links / total_links
quality_score += link_validity * 10

# ุฏุฑุฌูโุจูุฏ:
# 90-100: ุนุงู โ โ ุขูุงุฏู ุงูุชุดุงุฑ
# 75-89:  ุฎูุจ ๐ก โ ุจุฑุฑุณ ุฏุณุช ุฌุฒุฆ
# 50-74:  ูุชูุณุท ๐ โ ูุงุฒ ุจู ุงุตูุงุญ
# 0-49:   ุถุนู ๐ด โ ุชุจุฏู ูุฌุฏุฏ
```

#### ด.ด.ณ ฺฏุฒุงุฑุด ุชุณุช

```
๐งช ฺฏุฒุงุฑุด ุชุณุช ฺฉูุช:
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

๐ ุงูุชุงุฒ ฺฉู: นต/ฑฐฐ โ ุนุงู

ุณุทุญ ฑ โ ุณุงุฎุชุงุฑ:
  โ Frontmatter YAML ูุนุชุจุฑ
  โ JSX syntax ูุนุชุจุฑ
  โ ุชูุงู import ูุง ุตุญุญ
  โ Encoding: UTF-8
  โ MDX compile: ูููู

ุณุทุญ ฒ โ ูุญุชูุง:
  โ ุนูุงูู: ฑฒ/ฑฒ (ฑฐฐูช)
  โ ูุฑูููโูุง: ดฒ/ดฒ (ฑฐฐูช)
  โ ุชุตุงูุฑ: ต/ต (ฑฐฐูช)
  โ ุฌุฏุงูู: ท/ท (ฑฐฐูช)
  โ ฺฉุฏ: ด/ด (ฑฐฐูช)
  โ ูพุงููุดุช: ธ/ธ (ฑฐฐูช)
  โ๏ธ ุงุฑุฌุงุนุงุช: ฑถ/ฑธ (ธนูช)
     โ ฒ ุงุฑุฌุงุน ุจู ูุตู ุชุจุฏูโูุดุฏู
  โ ฺฉููุงุช: ณ,ฒดต โ ณ,ฒตฑ (ุงุฎุชูุงู ฐ.ฒูช)

ุณุทุญ ณ โ ุฑุงุถ:
  โ KaTeX parse: ดฒ/ดฒ (ฑฐฐูช)
  โ ูุญุทโูุง ุชูุฏุฑุชู: ุตุญุญ
  โ ุงุฑุฌุงุนุงุช label/ref: ฑฒ/ฑฒ

ุณุทุญ ด โ ูุงุฑุณ/RTL:
  โ dir="rtl" โ
  โ lang="fa" โ
  โ ZWNJ: ฒณด/ฒณด (ฑฐฐูช ุญูุธ ุดุฏู)
  โ ฺฏููู ยซยป: ฑธ/ฑธ
  โ ุจููฺฉโูุง LTR: ถ/ถ ุตุญุญ
  โ \lr{} ุชุจุฏู: ฑด/ฑด

ุณุทุญ ต โ ููฺฉโูุง:
  โ ููฺฉโูุง ุฏุงุฎู: ฑด/ฑด
  โ๏ธ ููฺฉโูุง ุจูโูุตู: ฒ ูุนูู
  โ ุชุตุงูุฑ: ต/ต ููุฌูุฏ
  โ ููฺฉโูุง ุฎุงุฑุฌ: ด/ด ูุฑูุช ุตุญุญ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
  [D] ุงุฏุงูู ุจู ุงุณุชูุฑุงุฑ (Deploy)
  [V] ุชุณุช ุจุตุฑ (ูุงุฒ ุจู headless browser)
  [R] ุจุงุฒฺฏุดุช ู ุงุตูุงุญ ฒ ุงุฑุฌุงุน ูุนูู
  [E] ุจุงุฒ ฺฉุฑุฏู ูุงู MDX ุฏุฑ ูุฑุงุดฺฏุฑ
  [Q] ูุบู

  ุงูุชุฎุงุจ ุดูุง: โ
```

---

### โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
### STAGE 5: ุงุณุชูุฑุงุฑ ุฎุฑูุฌ
### โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

#### ด.ต.ฑ ุชูุธูุงุช ูุจโุณุงุช

```yaml
# config/website_config.yaml

website:
  name: "ุจูุงฺฏ ุฑุงุถ ูู"
  framework: "next"          # next | astro | gatsby | docusaurus | custom
  content_dir: "content/"    # ูุณุฑ ูุณุจ ูุญุชูุง
  assets_dir: "public/assets/"  # ูุณุฑ ูุณุจ asset ูุง
  base_url: "https://mysite.com"

  paths:
    articles: "content/articles/"
    books: "content/books/"
    proofs: "content/proofs/"
    images: "public/assets/images/"
    files: "public/assets/files/"

  naming:
    # ุงูฺฏู ูุงูโฺฏุฐุงุฑ ูพูุดูโูุง
    article_dir: "{slug}/"
    book_dir: "{series_slug}/{chapter_slug}/"
    # ุงูฺฏู ูุงู ูุงู ุงุตู
    main_file: "index.mdx"
    # ุงูฺฏู ูุงู ุชุตุงูุฑ
    image_file: "{slug}-{type}-{number}.{ext}"

  components:
    # ูุณุฑ ฺฉุงููพูููุชโูุง MDX
    theorem: "@/components/mdx/Theorem"
    definition: "@/components/mdx/Definition"
    proof: "@/components/mdx/Proof"
    example: "@/components/mdx/Example"
    admonition: "@/components/mdx/Admonition"
    figure: "@/components/mdx/Figure"
    mermaid: "@/components/mdx/MermaidDiagram"
    citation: "@/components/mdx/Citation"
    cross_ref: "@/components/mdx/CrossRef"

  optimization:
    convert_images_to_webp: true
    max_image_width: 1200
    svgo_optimize: true
    minify_html_in_mdx: false

  git:
    auto_commit: false       # commit ุฎูุฏฺฉุงุฑ ุจุนุฏ ุงุฒ ุงุณุชูุฑุงุฑ
    commit_message: "feat(content): add {title}"
    branch: "content/{slug}"
```

#### ด.ต.ฒ ูุฑุขูุฏ ุงุณุชูุฑุงุฑ

```
๐ ุงุณุชูุฑุงุฑ ุฎุฑูุฌ:
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

๐ ููุตุฏ: C:\Projects\my-blog\content\books\logic-foundations\

ูุฑุงุญู:
  โ ฑ. ุณุงุฎุช ุณุงุฎุชุงุฑ ูพูุดูโูุง
       โโโ logic-foundations/
           โโโ 00-introduction/
           โโโ 01-propositional-logic/
           โโโ 02-predicate-logic/

  โ ฒ. ฺฉูพ ูุงูโูุง MDX
       โโโ 00-introduction/index.mdx (8.2 KB)
       โโโ 01-propositional-logic/index.mdx (12.5 KB)
       โโโ 02-predicate-logic/index.mdx (10.1 KB)

  โ ณ. ฺฉูพ ู ุจูููโุณุงุฒ ุชุตุงูุฑ
       โโโ 00-introduction/assets/
       โ   โโโ cover.webp (45 KB โ 180 KB PNG, ทตูช ฺฉุงูุด)
       โโโ 01-propositional-logic/assets/
       โ   โโโ truth-table.svg (3 KB โ 5 KB, SVGO)
       โ   โโโ demorgan-proof.svg (8 KB)
       โโโ shared-assets/
           โโโ series-cover.webp (62 KB)

  โ ด. ุชููุฏ ูุงูโูุง ุฌุงูุจ
       โโโ _series.json (ูุชุงุฏุชุง ูุฌููุนู)
       โโโ bibliography.json (ฑต ูุฑุฌุน)

  โ ต. ุจุฑูุฒุฑุณุงู ููฺฉโูุง ูุณุจ
       โ ฑธ ููฺฉ ุจูโูุตู ุงุตูุงุญ ุดุฏ

  โ ถ. ุงุนุชุจุงุฑุณูุฌ ููุง
       โ ุชูุงู ูุงูโูุง ุฎูุงูุง ู ุณุงูู ูุณุชูุฏ
       โ ุชูุงู ุชุตุงูุฑ ุงุฑุฌุงุนโุดุฏู ูุฌูุฏ ุฏุงุฑูุฏ
       โ ุชูุงู ููฺฉโูุง ุฏุงุฎู ูุนุชุจุฑูุฏ

๐ ุฎูุงุตู:
  ูุงูโูุง MDX: ณ
  ุชุตุงูุฑ: ด (ฑฑธ KB ูุฌููุน)
  ูุงูโูุง JSON: ฒ
  ุญุฌู ฺฉู: ฑดน KB

  [O] ุจุงุฒ ฺฉุฑุฏู ูพูุดู ุฏุฑ Explorer
  [G] Git commit (branch: content/logic-foundations)
  [P] ูพุดโููุงุด ุฏุฑ ูุฑูุฑฺฏุฑ (next dev)
  [C] ุงุฏุงูู ุจู ฺฏุฒุงุฑุด
  [Q] ูพุงุงู

  ุงูุชุฎุงุจ ุดูุง: โ
```

---

### โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
### STAGE 6: ฺฏุฒุงุฑุด ูุฑฺฉุฒ
### โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

#### ด.ถ.ฑ ุณุงุฎุชุงุฑ ฺฏุฒุงุฑุด ูุฑฺฉุฒ

```yaml
# reports/central_log.yaml
# ุงู ูุงู ุชุงุฑุฎฺู ฺฉุงูู ุชูุงู ุชุจุฏูโูุง ุฑุง ูฺฏู ูโุฏุงุฑุฏ

version: "1.0"
last_updated: "2025-07-13T16:45:00+03:30"
total_conversions: 42
total_documents: 128
total_failures: 3

conversions:
  - id: "conv_20250713_153042"
    timestamp: "2025-07-13T15:30:42+03:30"
    status: "success"           # success | partial | failed
    
    input:
      path: "C:/Users/ali/Documents/logic-book/"
      type: "directory"
      structure: "multi_chapter_book"
      format: "latex"
      files_count: 7
      total_size_bytes: 245000
    
    output:
      path: "C:/Projects/my-blog/content/books/logic-foundations/"
      mdx_files: 3
      asset_files: 6
      total_size_bytes: 152000
      quality_score: 95
    
    metadata:
      title: "ูุจุงู ููุทู ุฑุงุถ ู ุงุซุจุงุชโูุง ุตูุฑ"
      slug: "logic-foundations"
      lang: "fa"
      type: "book"
      chapters: 3
    
    stats:
      duration_seconds: 38
      formulas_converted: 42
      images_converted: 5
      tables_converted: 7
      code_blocks: 4
      footnotes: 8
      cross_refs: 18
      zwnj_preserved: "234/234"
    
    warnings:
      - "ฒ ุงุฑุฌุงุน ุจู ูุตู ุชุจุฏูโูุดุฏู"
      - "ูุฑููู ุฎุท ฑตท ุงุตูุงุญ ุฎูุฏฺฉุงุฑ ุดุฏ"
    
    errors: []

  - id: "conv_20250712_091500"
    timestamp: "2025-07-12T09:15:00+03:30"
    status: "partial"
    # ...

# ุขูุงุฑ ุชุฌูุน
statistics:
  by_format:
    latex: { count: 25, success: 24, avg_quality: 92 }
    markdown: { count: 10, success: 10, avg_quality: 97 }
    html: { count: 4, success: 4, avg_quality: 88 }
    docx: { count: 2, success: 1, avg_quality: 75 }
    pdf: { count: 1, success: 0, avg_quality: 0 }
  
  by_language:
    fa: 18
    en: 12
    fa_en: 12
  
  by_type:
    article: 30
    book: 3
    chapter: 9
    proof: 0
  
  slugs_used:       # ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุชฺฉุฑุงุฑ
    - "de-morgans-laws"
    - "logic-foundations"
    - "logic-foundations/ch01-introduction"
    # ...
```

#### ด.ถ.ฒ ููุงุด ฺฏุฒุงุฑุด

```
๐ ฺฏุฒุงุฑุด ูุฑฺฉุฒ FormatForge:
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

๐ ุขูุงุฑ ฺฉู:
  ุชุจุฏูโูุง: ดฒ (ูููู: ณน | ูุงูุต: ฒ | ูุงูููู: ฑ)
  ุงุณูุงุฏ: ฑฒธ ูุงู MDX ุชููุฏุดุฏู
  ูุงูฺฏู ฺฉูุช: นฑ/ฑฐฐ

๐ ุขุฎุฑู ต ุชุจุฏู:
  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
  # โ ุชุงุฑุฎ       โ ุนููุงู                     โ ูุฑูุช โ ฺฉูุช โ ูุถุนุช
  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
  1 โ ฑดฐด/ฐด/ฒฒ โ ูุจุงู ููุทู ุฑุงุถ          โ LaTeXโ  นต  โ  โ
  2 โ ฑดฐด/ฐด/ฒฑ โ ููููู ูุงุฑฺฉโุฏุงูู            โ  MD  โ  นธ  โ  โ
  3 โ ฑดฐด/ฐด/ฒฑ โ ุตูุญู HTML ุชุณุช             โ HTML โ  ธธ  โ  โ
  4 โ ฑดฐด/ฐด/ฒฐ โ ููุงูู ููุทู ููุฌูุงุช          โ DOCX โ  ทต  โ  โ๏ธ
  5 โ ฑดฐด/ฐด/ฑน โ ุฌุฒูู ุขูุงูุฒ               โ  PDF โ  ดฒ  โ  โ

๐ ูููุฏุงุฑ ูุฑูุชโูุง:
  LaTeX    โโโโโโโโโโโโโโโโโโโโโโโโโ ถฐูช (25)
  Markdown โโโโโโโโโโโโโโโโโโโโโโโโ ฒดูช (10)
  HTML     โโโโโโโโโโโโโโโโโโโโโโโโ ฑฐูช (4)
  DOCX     โโโโโโโโโโโโโโโโโโโโโโโโ  ตูช (2)
  PDF      โโโโโโโโโโโโโโโโโโโโโโโโ  ฒูช (1)

  [D] ุฌุฒุฆุงุช ฺฉ ุชุจุฏู
  [E] ุฎุฑูุฌ CSV/JSON
  [S] ุฌุณุชุฌู
  [Q] ุจุงุฒฺฏุดุช

  ุงูุชุฎุงุจ ุดูุง: โ
```

---

## ต. ูุงุจุณุชฺฏโูุง ู ุงุจุฒุงุฑูุง ุฎุงุฑุฌ

### ต.ฑ ูุงุจุณุชฺฏโูุง Python

```
# requirements.txt

# === ูุณุชู ===
click>=8.1                    # CLI framework
rich>=13.7                    # ุชุฑููุงู ุฒุจุง
textual>=0.70                 # TUI framework (ุงุฎุชุงุฑ)
pyyaml>=6.0                   # YAML parsing
toml>=0.10                    # TOML parsing
pydantic>=2.5                 # ุงุนุชุจุงุฑุณูุฌ ุฏุงุฏู

# === ุชุดุฎุต ูุงู ===
python-magic>=0.4             # ุชุดุฎุต ููุน ูุงู
chardet>=5.2                  # ุชุดุฎุต encoding

# === ุชุจุฏูโฺฏุฑูุง ===
pypandoc>=1.13                # ุฑุงุจุท Python ุจุฑุง Pandoc
beautifulsoup4>=4.12          # ุชุญูู HTML
lxml>=5.1                     # ุชุญูู XML/HTML
python-docx>=1.1              # ุฎูุงูุฏู DOCX
pymupdf>=1.23                 # ุฎูุงูุฏู PDF (fitz)
pdfplumber>=0.11              # ุงุณุชุฎุฑุงุฌ ุฌุฏูู ุงุฒ PDF
ebooklib>=0.18                # ุฎูุงูุฏู EPUB
nbformat>=5.10                # ุฎูุงูุฏู Jupyter Notebooks

# === ุฑุงุถ ===
flatlatex>=0.15               # ุณุงุฏูโุณุงุฒ LaTeX
# ุง
pylatexenc>=2.10              # ุชุจุฏู LaTeX โ Unicode

# === ุชุตูุฑ ===
pillow>=10.2                  # ูพุฑุฏุงุฒุด ุชุตูุฑ
cairosvg>=2.7                 # SVG โ PNG
svgutils>=0.3                 # ูุฑุงุด SVG

# === AI (ุงุฎุชุงุฑ) ===
openai>=1.35                  # OpenAI API
anthropic>=0.30               # Anthropic API
google-generativeai>=0.5      # Google Gemini

# === ุชุณุช ===
playwright>=1.44              # ุชุณุช ุจุตุฑ ุจุง headless browser

# === ฺฏุฒุงุฑุด ===
jinja2>=3.1                   # ูุงูุจโุณุงุฒ ฺฏุฒุงุฑุด
tabulate>=0.9                 # ุฌุฏุงูู ูุชู
```

### ต.ฒ ุงุจุฒุงุฑูุง ุฎุงุฑุฌ

```
ุงุจุฒุงุฑ              โ ุงุณุชูุงุฏู                   โ ูุตุจ
โโโโโโโโโโโโโโโโโโโโฟโโโโโโโโโโโโโโโโโโโโโโโโโโโโฟโโโโโโโโโโโโโโโโโโโโโ
Pandoc             โ ุชุจุฏูโฺฏุฑ ุนููู            โ winget install Pandoc
XeLaTeX            โ ฺฉุงููพุงู LaTeX + TikZโSVG  โ TeX Live / MiKTeX
Biber              โ ฺฉุชุงุจโูุงูู LaTeX            โ ููุฑุงู TeX Live
dvisvgm            โ ุชุจุฏู TikZ โ SVG          โ ููุฑุงู TeX Live
ImageMagick        โ ุชุจุฏู/ุจูููโุณุงุฒ ุชุตูุฑ    โ winget install ImageMagick
SVGO               โ ุจูููโุณุงุฒ SVG             โ npm install -g svgo
cwebp              โ ุชุจุฏู ุจู WebP             โ ููุฑุงู libwebp
Tesseract OCR      โ OCR ุจุฑุง PDF ุงุณฺฉูโุดุฏู     โ winget install Tesseract
Node.js            โ ุงุฌุฑุง Mermaid CLI         โ winget install Node.js
mermaid-cli        โ ุฑูุฏุฑ Mermaid โ SVG/PNG    โ npm install -g @mermaid-js/mermaid-cli
Playwright         โ ุชุณุช ุจุตุฑ                  โ pip install playwright
```

---

## ถ. ุชูุธูุงุช ู ุณูุงุฑุดโุณุงุฒ

### ถ.ฑ ูุงู ุชูุธูุงุช ฺฉุงุฑุจุฑ

```yaml
# config/user_config.yaml

# === ุนููู ===
general:
  language: "fa"                    # ุฒุจุงู ุฑุงุจุท: fa | en
  verbose: true                     # ููุงุด ุฌุฒุฆุงุช ุจุดุชุฑ
  color: true                       # ุฎุฑูุฌ ุฑูฺฏ
  confirm_before_convert: true      # ุชุฃุฏ ูุจู ุงุฒ ุชุจุฏู
  confirm_before_deploy: true       # ุชุฃุฏ ูุจู ุงุฒ ุงุณุชูุฑุงุฑ
  auto_fix_warnings: false          # ุงุตูุงุญ ุฎูุฏฺฉุงุฑ ูุดุฏุงุฑูุง
  temp_dir: "~/.formatforge/temp/"
  log_dir: "~/.formatforge/logs/"
  report_file: "~/.formatforge/central_log.yaml"

# === ุงุณฺฉู ===
scanner:
  max_file_size_mb: 100             # ุญุฏุงฺฉุซุฑ ุงูุฏุงุฒู ูุงู
  supported_formats:
    - latex   # .tex
    - html    # .html, .htm, .xhtml
    - markdown # .md, .mdx, .markdown
    - docx    # .docx
    - pdf     # .pdf
    - rst     # .rst
    - asciidoc # .adoc, .asciidoc
    - epub    # .epub
    - notebook # .ipynb
  ignore_patterns:
    - "*.aux"
    - "*.log"
    - "*.synctex*"
    - "*.fls"
    - "*.fdb_latexmk"
    - ".git/"
    - "node_modules/"
    - "__pycache__/"
    - ".DS_Store"
    - "Thumbs.db"

# === ูุชุงุฏุชุง ===
metadata:
  default_author:
    name: "ููุฏ ุณุงูู"
    nameEn: "Mahdi Salem"
    email: "ali@example.com"
  default_lang: "fa"
  default_dir: "rtl"
  slug_max_length: 60
  slug_transliterate: true          # transliterate ูุงุฑุณ โ ูุงุชู
  ai_provider: "openai"            # openai | anthropic | google | ollama | none
  ai_model: "gpt-4o"
  ai_auto_complete:
    description: true
    tags: true
    title_en: true
    slug: true
  require_fields:
    - title
    - slug
    - date
    - lang
    - dir
    - author

# === ุชุจุฏู ===
conversion:
  # --- ุฑุงุถ ---
  math:
    engine: "katex"                 # katex | mathjax
    display_mode_delimiters: ["$$", "$$"]
    inline_mode_delimiters: ["$", "$"]
    throw_on_error: false
    macros: {}                      # ูุงฺฉุฑููุง ุณูุงุฑุด KaTeX

  # --- ูููุฏุงุฑ ---
  diagrams:
    tikz_to: "svg"                  # svg | png
    tikz_dpi: 300                   # DPI ุจุฑุง PNG
    mermaid_to: "component"         # component | svg | png
    mermaid_theme: "base"

  # --- ุชุตูุฑ ---
  images:
    optimize: true
    convert_to_webp: true
    max_width: 1200
    quality: 85
    svg_optimize: true

  # --- ฺฉุฏ ---
  code:
    add_line_numbers: false
    default_language: "text"
    highlight_theme: "github-dark"

  # --- ุฌุฏูู ---
  tables:
    complex_to_html: true           # ุฌุฏุงูู ุงุฏุบุงู โ HTML
    simple_to_markdown: true        # ุฌุฏุงูู ุณุงุฏู โ MD pipe

  # --- ูุงุฑุณ ---
  persian:
    preserve_zwnj: true             # ุญูุธ ููโูุงุตูู (ุบุฑูุงุจู ุชุบุฑ!)
    fix_arabic_yeh: true            # ุชุจุฏู ู โ 
    fix_arabic_keh: true            # ุชุจุฏู ู โ ฺฉ
    fix_spacing: true               # ุงุตูุงุญ ูุงุตููโฺฏุฐุงุฑ ูุงุฑุณ
    numerals: "persian"             # persian | latin | keep
    quotation_marks: "guillemet"    # guillemet ยซยป | standard ""

  # --- MDX ---
  mdx:
    component_style: "import"       # import | inline | global
    jsx_runtime: "react"            # react | preact
    mdx_version: 3                  # 2 | 3

# === ุชุณุช ===
testing:
  run_structural: true
  run_content: true
  run_math: true
  run_persian: true
  run_links: true
  run_visual: false                 # ูุงุฒ ุจู Playwright
  min_quality_score: 80             # ุญุฏุงูู ุงูุชุงุฒ ูุจูู
  visual_compare_with_source: false # ููุงุณู ุจุตุฑ ุจุง ุงุตู

# === ุงุณุชูุฑุงุฑ ===
deployment:
  target_dir: "C:/Projects/my-blog/"
  create_backup: true
  backup_dir: "~/.formatforge/backups/"
  overwrite_existing: "ask"         # ask | yes | no | rename
  post_deploy:
    open_in_editor: false
    editor_command: "code"          # VS Code
    run_dev_server: false
    dev_command: "npm run dev"
    git_commit: false
    git_push: false

# === ฺฏุฒุงุฑุด ===
reporting:
  format: "yaml"                    # yaml | json | csv | html
  keep_history: true
  max_history: 1000
  export_on_milestone: true         # ุฎุฑูุฌ ฺฏุฒุงุฑุด ูุฑ ฑฐ ุชุจุฏู
```

---

## ท. ุฏุณุชูุฑุงุช CLI

```bash
# === ูุตุจ ===
pip install formatforge
# ุง
pip install -e .  # ุงุฒ ูุฎุฒู

# === ุฑุงูููุง ===
formatforge --help
formatforge <command> --help

# === ุงุณฺฉู ===
formatforge scan ./path/to/input
formatforge scan ./article.tex
formatforge scan ./archive.zip
formatforge scan --recursive ./folder/

# === ุชุจุฏู ===
formatforge convert ./input.tex
formatforge convert ./input.tex --output ./output/
formatforge convert ./input.tex --format latex --quality-min 85
formatforge convert ./folder/ --batch --parallel 4

# === ุชุจุฏู ุชุนุงูู (wizard) ===
formatforge convert --interactive ./input/

# === ุชุณุช ===
formatforge test ./output/article/index.mdx
formatforge test ./output/ --recursive --visual
formatforge test ./output/ --report-format html

# === ุงุณุชูุฑุงุฑ ===
formatforge deploy ./output/ --target C:/Projects/my-blog/
formatforge deploy ./output/ --git-commit --git-push

# === ฺฏุฒุงุฑุด ===
formatforge report
formatforge report --last 10
formatforge report --export csv --output report.csv
formatforge report --stats
formatforge report --search "ููุทู"

# === ุชูุธูุงุช ===
formatforge config init                # ุณุงุฎุช ูุงู ุชูุธูุงุช
formatforge config show                # ููุงุด ุชูุธูุงุช ูุนู
formatforge config set conversion.math.engine katex
formatforge config website             # ุชูุธู ูุจโุณุงุช (wizard)

# === ฺฉุฌุง (all-in-one) ===
formatforge run ./input/ --output ./blog/content/
# ูุนุงุฏู: scan โ metadata โ precheck โ convert โ test โ deploy

# === ุจุฑุฑุณ ุณูุงูุช ===
formatforge doctor
# ุจุฑุฑุณ ูุตุจ ุจูุฏู ุชูุงู ูุงุจุณุชฺฏโูุง ู ุงุจุฒุงุฑูุง
```

---

## ธ. ูุฏุฑุช ุฎุทุง ู ุจุงุฒุงุจ

```
ุงุณุชุฑุงุชฺ ูุฏุฑุช ุฎุทุง:
โโโโโโโโโโโโโโโโโโโโโ

ฑ. ุฎุทุงูุง ูุงุจูโุงุตูุงุญ ุฎูุฏฺฉุงุฑ (Auto-fix):
   - Encoding ุงุดุชุจุงู โ ุชุจุฏู ุจู UTF-8 BOM
   - \begin ุจุฏูู \end โ ุงุถุงูู ฺฉุฑุฏู \end
   - ุชฺฏ HTML ุจุณุชูโูุดุฏู โ ุจุณุชู ุฎูุฏฺฉุงุฑ
   - ู ุนุฑุจ โ  ูุงุฑุณ
   - ู ุนุฑุจ โ ฺฉ ูุงุฑุณ
   โ ููู auto-fix ูุง ุซุจุช ู ฺฏุฒุงุฑุด ูโุดููุฏ

ฒ. ุฎุทุงูุง ูุงุฒููุฏ ุชุฃุฏ ฺฉุงุฑุจุฑ:
   - ูุฑููู ูุจูู (ฺูุฏ ุชูุณุฑ ููฺฉู)
   - ุชุตูุฑ ฺฏูุดุฏู (ุญุฐู ุงุฑุฌุงุนุ placeholderุ)
   - ุณุงุฎุชุงุฑ ูุจูู (ฺฉุชุงุจ ุง ููุงูุงุช ูุณุชููุ)
   โ ููุงุด ฺฏุฒููโูุง ู ุฏุฑุงูุช ุงูุชุฎุงุจ

ณ. ุฎุทุงูุง ูุณุฏูุฏฺฉููุฏู:
   - ูุงู ุฎุฑุงุจ / ุบุฑูุงุจู ุฎูุงูุฏู
   - encoding ฺฉุงููุงู ูุงุดูุงุฎุชู
   - PDF ุงุณฺฉูโุดุฏู ุจุฏูู OCR
   โ ูพุงู ุฎุทุง ูุงุถุญ + ูพุดููุงุฏ ุฑุงูโุญู

ด. ุจุงุฒุงุจ (Recovery):
   - ูุฑ ูุฑุญูู checkpoint ุฏุงุฑุฏ
   - ุฏุฑ ุตูุฑุช ุฎุทุง: ุจุงุฒฺฏุดุช ุจู ุขุฎุฑู checkpoint
   - ูุงูโูุง ูููุช ุชุง ุชุฃุฏ ููุง ุญูุธ ูโุดููุฏ
   - ุงูฺฉุงู ุงุฒ ุณุฑฺฏุฑ ุชุจุฏู ูุงุชูุงู:
     formatforge resume --id conv_20250713_153042
```

---

## น. ููุงุญุธุงุช ุนููฺฉุฑุฏ

```
ุจูููโุณุงุฒ ุนููฺฉุฑุฏ:
โโโโโโโโโโโโโโโโโโ

ฑ. ูพุฑุฏุงุฒุด ููุงุฒ:
   - ุชุจุฏู ูุตูโูุง ูุณุชูู ุจูโุตูุฑุช parallel
   - ุจูููโุณุงุฒ ุชุตุงูุฑ ุจูโุตูุฑุช parallel
   - ุชุนุฏุงุฏ thread ูุงุจู ุชูุธู

ฒ. ฺฉูุด (Caching):
   - ฺฉูุด ุชุจุฏู TikZ โ SVG (ุจุฑ ุงุณุงุณ hash ูุญุชูุง)
   - ฺฉูุด ุจูููโุณุงุฒ ุชุตูุฑ
   - ฺฉูุด ูุชุงุฌ AI (ุชฺฉูู ูุชุงุฏุชุง)
   - ูุณุฑ ฺฉูุด: ~/.formatforge/cache/

ณ. Lazy Loading:
   - ูุงุจุณุชฺฏโูุง ุณูฺฏู (playwright, AI SDKs) ููุท ุฏุฑ ุตูุฑุช ูุงุฒ import ุดููุฏ

ด. Memory Management:
   - PDF ูุง ุจุฒุฑฺฏ: ูพุฑุฏุงุฒุด ุตูุญูโุจูโุตูุญู
   - ุชุตุงูุฑ ุจุฒุฑฺฏ: streaming
```

---

## ฑฐ. ุชุณุชโูพุฐุฑ ู CI/CD

```python
# ุชุณุชโูุง ูุงุญุฏ ุจุง pytest

# test_scanner.py
def test_detect_latex_file():
    """ุชุดุฎุต ุตุญุญ ูุงู LaTeX"""

def test_detect_zip_with_book():
    """ุชุดุฎุต ฺฉุชุงุจ ฺูุฏูุตู ุฏุฑูู ZIP"""

def test_encoding_detection_utf8_bom():
    """ุชุดุฎุต ุตุญุญ UTF-8 BOM"""

# test_converter_latex.py
def test_demorgan_formula():
    """ุชุจุฏู ุตุญุญ ูุฑููู ุฏููุฑฺฏุงู"""

def test_theorem_environment():
    """ุชุจุฏู ูุญุท theorem ุจู ฺฉุงููพูููุช"""

def test_zwnj_preservation():
    """ุญูุธ ููโูุงุตูู ุฏุฑ ุชุจุฏู"""

def test_lr_command():
    """ุชุจุฏู \\lr{} ุจู <span dir='ltr'>"""

def test_tikz_to_svg():

ุงุฏุงูู ูพุฑุงููพุช ุฌุงูุน:

```markdown
# test_converter_latex.py (ุงุฏุงูู)

def test_tikz_to_svg():
    """ุชุจุฏู ูููุฏุงุฑ TikZ ุจู SVG"""

def test_bibliography_conversion():
    """ุชุจุฏู ฺฉุชุงุจโูุงูู biblatex ุจู JSON"""

def test_cross_references():
    """ุชุจุฏู ุงุฑุฌุงุนุงุช ูุชูุงุทุน \\ref ู \\cref"""

def test_footnotes_persian():
    """ุชุจุฏู ูพุงููุดุช ูุงุฑุณ ู LTRfootnote"""

def test_nested_environments():
    """ุชุจุฏู ูุญุทโูุง ุชูุฏุฑุชู (theorem ุฏุฑูู section)"""

def test_custom_commands():
    """ุจุงุฒฺฏุดุง \\newcommand ูุง ุณูุงุฑุด"""

def test_multi_chapter_book():
    """ุชุจุฏู ฺฉุชุงุจ ฺูุฏูุตู ุจุง \\input"""

def test_table_with_merged_cells():
    """ุชุจุฏู ุฌุฏูู ุจุง multirow/multicolumn"""

def test_wrapfigure():
    """ุชุจุฏู ุชุตูุฑ ฺฉูุงุฑ ูุชู"""

def test_algorithm2e():
    """ุชุจุฏู ูุญุท ุงูฺฏูุฑุชู"""

def test_color_boxes():
    """ุชุจุฏู tcolorbox ุจู Admonition"""

# test_converter_html.py
def test_html_meta_extraction():
    """ุงุณุชุฎุฑุงุฌ ูุชุงุฏุชุง ุงุฒ ุชฺฏโูุง meta"""

def test_html_dir_preservation():
    """ุญูุธ dir=rtl ู dir=ltr"""

def test_html_math_katex():
    """ุชุจุฏู ูุฑูููโูุง KaTeX/MathJax ุงุฒ HTML"""

def test_html_table_colspan():
    """ุชุจุฏู ุฌุฏูู ุจุง colspan/rowspan"""

def test_html_form_elements():
    """ุชุจุฏู ุนูุงุตุฑ ูุฑู"""

def test_html_media_elements():
    """ุชุจุฏู video/audio/iframe"""

def test_html_svg_inline():
    """ุชุจุฏู SVG ุฏุฑููโุฎุท"""

def test_html_details_summary():
    """ุชุจุฏู details/summary"""

# test_converter_md.py
def test_md_frontmatter_yaml():
    """ุชุญูู frontmatter YAML"""

def test_md_mermaid_to_component():
    """ุชุจุฏู ุจููฺฉ mermaid ุจู MermaidDiagram"""

def test_md_callouts():
    """ุชุจุฏู > [!NOTE] ุจู Admonition"""

def test_md_task_list():
    """ุชุจุฏู task list"""

def test_md_definition_list():
    """ุชุจุฏู definition list"""

def test_md_footnotes():
    """ุชุจุฏู ูพุงููุดุชโูุง"""

def test_md_jsx_compatibility():
    """ุจุฑุฑุณ ุณุงุฒฺฏุงุฑ JSX (classโclassName, etc.)"""

# test_converter_docx.py
def test_docx_heading_levels():
    """ุชุจุฏู ุณุทูุญ Heading"""

def test_docx_omml_to_latex():
    """ุชุจุฏู ูุฑููู OMML ุจู LaTeX"""

def test_docx_embedded_images():
    """ุงุณุชุฎุฑุงุฌ ุชุตุงูุฑ embed ุดุฏู"""

def test_docx_rtl_paragraphs():
    """ุญูุธ ุฌูุช RTL ูพุงุฑุงฺฏุฑุงูโูุง"""

# test_converter_pdf.py
def test_pdf_text_extraction():
    """ุงุณุชุฎุฑุงุฌ ูุชู ุงุฒ PDF ูุชู"""

def test_pdf_structure_detection():
    """ุชุดุฎุต ุนูุงูู ู ูพุงุฑุงฺฏุฑุงูโูุง"""

def test_pdf_table_extraction():
    """ุงุณุชุฎุฑุงุฌ ุฌุฏุงูู"""

def test_pdf_image_extraction():
    """ุงุณุชุฎุฑุงุฌ ุชุตุงูุฑ embed ุดุฏู"""

def test_pdf_formula_detection():
    """ุชุดุฎุต ู ุชุจุฏู ูุฑูููโูุง"""

# test_persian.py
def test_zwnj_count_preserved():
    """ุดูุงุฑุด ZWNJ ูุจู ู ุจุนุฏ ุจุงุฏ ุจุฑุงุจุฑ ุจุงุดุฏ"""

def test_arabic_yeh_to_persian():
    """ุชุจุฏู ู ุจู """

def test_arabic_keh_to_persian():
    """ุชุจุฏู ู ุจู ฺฉ"""

def test_guillemet_quotes():
    """ุจุฑุฑุณ ุงุณุชูุงุฏู ุงุฒ ฺฏููู ยซยป"""

def test_bidi_blocks():
    """ุจุฑุฑุณ ุตุญุช ุจููฺฉโูุง LTR ุฏุฑูู RTL"""

def test_persian_numerals():
    """ุชุจุฏู ุงุนุฏุงุฏ ูุงุชู ุจู ูุงุฑุณ (ุฏุฑ ุตูุฑุช ุชูุธู)"""

def test_persian_typography_spacing():
    """ุจุฑุฑุณ ูุงุตููโฺฏุฐุงุฑ ุตุญุญ ูุงุฑุณ"""

# test_quality.py
def test_quality_score_perfect_document():
    """ุณูุฏ ุจุฏูู ูุดฺฉู ุจุงุฏ ุงูุชุงุฒ >95 ุจฺฏุฑุฏ"""

def test_quality_score_with_issues():
    """ุณูุฏ ุจุง ูุดฺฉูุงุช ุดูุงุฎุชูโุดุฏู"""

def test_structural_validation():
    """ุงุนุชุจุงุฑุณูุฌ ุณุงุฎุชุงุฑ MDX"""

def test_link_validation():
    """ุงุนุชุจุงุฑุณูุฌ ุชูุงู ููฺฉโูุง"""

# test_e2e.py (End-to-End)
def test_full_pipeline_latex_article():
    """ุชุณุช ฺฉุงูู: ููุงูู LaTeX โ MDX"""

def test_full_pipeline_latex_book():
    """ุชุณุช ฺฉุงูู: ฺฉุชุงุจ LaTeX ฺูุฏูุตู โ MDX"""

def test_full_pipeline_html():
    """ุชุณุช ฺฉุงูู: ุตูุญู HTML โ MDX"""

def test_full_pipeline_markdown():
    """ุชุณุช ฺฉุงูู: ูุงู MD ุจุง Mermaid โ MDX"""

def test_full_pipeline_docx():
    """ุชุณุช ฺฉุงูู: ูุงู DOCX โ MDX"""

def test_full_pipeline_zip():
    """ุชุณุช ฺฉุงูู: ูุงู ZIP ุญุงู ูพุฑูฺู โ MDX"""

def test_full_pipeline_mixed_folder():
    """ุชุณุช ฺฉุงูู: ูพูุดู ุชุฑฺฉุจ โ MDX"""


# ูุงูโูุง ุชุณุช (fixtures)
# tests/test_files/ ุญุงู ูููููโูุง ุงุณุช ฺฉู ุฏุฑ ุงุจุชุฏุง ูฺฉุงููู ุณุงุฎุชู:
#   - sample-book.tex         (LaTeX ุฌุงูุน)
#   - sample-mermaid.md       (Markdown + Mermaid)
#   - sample-page.html        (HTML ุฌุงูุน)
#   - sample-page.rst         (RST)
#   - sample-page.adoc        (AsciiDoc)
#   - sample-book.docx        (DOCX)
#   - sample-book.pdf         (PDF)
```

```yaml
# .github/workflows/ci.yml  (ุง ูุนุงุฏู ุขู ุจุฑุง CI/CD ูุญู)

name: FormatForge CI

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]

jobs:
  test:
    runs-on: windows-latest
    strategy:
      matrix:
        python-version: ["3.11", "3.12"]

    steps:
      - uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: ${{ matrix.python-version }}

      - name: Install TeX Live
        run: |
          choco install texlive --params="'/scheme:full'"

      - name: Install Pandoc
        run: choco install pandoc

      - name: Install Node.js & Mermaid CLI
        uses: actions/setup-node@v4
        with:
          node-version: 20
      - run: npm install -g @mermaid-js/mermaid-cli

      - name: Install Python dependencies
        run: pip install -e ".[dev]"

      - name: Run tests
        run: pytest tests/ -v --cov=formatforge --cov-report=xml

      - name: Test with sample files
        run: |
          formatforge doctor
          formatforge convert tests/test_files/sample-book.tex --output tests/output/
          formatforge test tests/output/ --quality-min 85
```

---

## ฑฑ. ฺฉุงููพูููุชโูุง MDX ููุฑุฏ ูุงุฒ ุฏุฑ ูุจโุณุงุช

ุจุฑุง ุงูฺฉู ุฎุฑูุฌ MDX ุจูโุฏุฑุณุช ุฏุฑ ูุจโุณุงุช ุฑูุฏุฑ ุดูุฏุ ฺฉุงููพูููุชโูุง ุฒุฑ ุจุงุฏ ุฏุฑ ูพุฑูฺู ูุจ ููุฌูุฏ ุจุงุดูุฏ. ุงุจุฒุงุฑ FormatForge ูโุชูุงูุฏ ุงุณฺฉูุช ุงู ฺฉุงููพูููุชโูุง ุฑุง ุชููุฏ ฺฉูุฏ:

```bash
formatforge init-components --framework next --output ./components/mdx/
```

### ฑฑ.ฑ Theorem Component

```jsx
// components/mdx/Theorem.jsx
'use client';

const typeConfig = {
  theorem:    { label: 'ูุถู',      labelEn: 'Theorem',    color: '#1A73E8', bg: '#E3F2FD' },
  lemma:      { label: 'ูู',        labelEn: 'Lemma',      color: '#1565C0', bg: '#E3F2FD' },
  corollary:  { label: 'ูุชุฌู',     labelEn: 'Corollary',  color: '#0D47A1', bg: '#E3F2FD' },
  conjecture: { label: 'ุญุฏุณ',       labelEn: 'Conjecture', color: '#4A148C', bg: '#F3E5F5' },
  axiom:      { label: 'ุงุตู ููุถูุน', labelEn: 'Axiom',      color: '#B71C1C', bg: '#FFEBEE' },
};

export default function Theorem({
  id,
  type = 'theorem',
  title,
  titleEn,
  number,
  children,
}) {
  const config = typeConfig[type] || typeConfig.theorem;

  return (
    <div
      id={id}
      dir="rtl"
      className="theorem-box"
      style={{
        background: config.bg,
        borderRight: `5px solid ${config.color}`,
        borderRadius: '0 8px 8px 0',
        padding: '1rem 1.5rem',
        margin: '1.5rem 0',
      }}
    >
      <div
        className="theorem-title"
        style={{
          fontWeight: 700,
          color: config.color,
          marginBottom: '0.5rem',
          fontSize: '1.05em',
        }}
      >
        {config.label}
        {number && ` ${number}`}
        {title && ` โ ${title}`}
        {titleEn && (
          <span dir="ltr" style={{ fontSize: '0.9em', opacity: 0.8, marginRight: '0.5em' }}>
            ({titleEn})
          </span>
        )}
      </div>
      <div className="theorem-content">{children}</div>
    </div>
  );
}
```

### ฑฑ.ฒ Definition Component

```jsx
// components/mdx/Definition.jsx
export default function Definition({ id, title, titleEn, number, children }) {
  return (
    <div
      id={id}
      dir="rtl"
      className="definition-box"
      style={{
        background: '#E8F5E9',
        borderRight: '5px solid #00897B',
        borderRadius: '0 8px 8px 0',
        padding: '1rem 1.5rem',
        margin: '1.5rem 0',
      }}
    >
      <div style={{ fontWeight: 700, color: '#00897B', marginBottom: '0.5rem' }}>
        ุชุนุฑู{number && ` ${number}`}
        {title && ` โ ${title}`}
        {titleEn && (
          <span dir="ltr" style={{ fontSize: '0.9em', opacity: 0.8, marginRight: '0.5em' }}>
            ({titleEn})
          </span>
        )}
      </div>
      <div>{children}</div>
    </div>
  );
}
```

### ฑฑ.ณ Proof Component

```jsx
// components/mdx/Proof.jsx
'use client';
import { useState } from 'react';

export default function Proof({ id, forRef, title = 'ุงุซุจุงุช', collapsible = false, children }) {
  const [open, setOpen] = useState(!collapsible);

  const content = (
    <div
      id={id}
      className="proof-box"
      style={{
        background: '#FFFDE7',
        borderRight: '5px solid #FB8C00',
        borderRadius: '0 8px 8px 0',
        padding: '1rem 1.5rem',
        margin: '1.5rem 0',
      }}
    >
      <div style={{ fontWeight: 700, color: '#E65100', marginBottom: '0.5rem' }}>
        {title}
        {forRef && (
          <span style={{ fontSize: '0.9em', opacity: 0.8 }}>
            {' '}
            (ุจุฑุง <a href={`#${forRef}`}>โ</a>)
          </span>
        )}
      </div>
      <div>{children}</div>
      <div style={{ textAlign: 'left', fontSize: '1.2em', marginTop: '0.5rem' }}>โ</div>
    </div>
  );

  if (!collapsible) return content;

  return (
    <details open={open} onToggle={(e) => setOpen(e.target.open)}>
      <summary style={{ cursor: 'pointer', fontWeight: 700, color: '#E65100' }}>
        {open ? '๐ฝ' : 'โถ๏ธ'} {title}
      </summary>
      {content}
    </details>
  );
}
```

### ฑฑ.ด Admonition Component

```jsx
// components/mdx/Admonition.jsx

const types = {
  note:      { icon: '๐', label: 'ูฺฉุชู',    color: '#546E7A', bg: '#ECEFF1' },
  tip:       { icon: '๐ก', label: 'ุฑุงูููุง', color: '#2E7D32', bg: '#E8F5E9' },
  info:      { icon: 'โน๏ธ', label: 'ุงุทูุงุนุงุช', color: '#1565C0', bg: '#E3F2FD' },
  warning:   { icon: 'โ๏ธ', label: 'ูุดุฏุงุฑ',   color: '#EF6C00', bg: '#FFF3E0' },
  caution:   { icon: '๐ถ', label: 'ุงุญุชุงุท',  color: '#E65100', bg: '#FBE9E7' },
  danger:    { icon: '๐ซ', label: 'ุฎุทุฑ',     color: '#C62828', bg: '#FFEBEE' },
  important: { icon: 'โ', label: 'ููู',     color: '#6A1B9A', bg: '#F3E5F5' },
  example:   { icon: '๐', label: 'ูุซุงู',    color: '#7B1FA2', bg: '#F3E5F5' },
};

export default function Admonition({ type = 'note', title, children }) {
  const config = types[type] || types.note;
  const displayTitle = title || `${config.icon} ${config.label}`;

  return (
    <div
      dir="rtl"
      className={`admonition admonition-${type}`}
      style={{
        background: config.bg,
        borderRight: `5px solid ${config.color}`,
        borderRadius: '0 8px 8px 0',
        padding: '1rem 1.5rem',
        margin: '1.5rem 0',
      }}
    >
      <div style={{ fontWeight: 700, color: config.color, marginBottom: '0.5rem' }}>
        {displayTitle}
      </div>
      <div>{children}</div>
    </div>
  );
}
```

### ฑฑ.ต Figure Component

```jsx
// components/mdx/Figure.jsx
import Image from 'next/image';

export default function Figure({
  src,
  alt,
  caption,
  captionEn,
  number,
  width,
  height,
  float,       // "right" | "left" | undefined
  className,
}) {
  const floatStyle = float === 'right'
    ? { float: 'right', margin: '0 0 1rem 1.5rem', maxWidth: '40%' }
    : float === 'left'
    ? { float: 'left', margin: '0 1.5rem 1rem 0', maxWidth: '40%' }
    : {};

  return (
    <figure
      dir="rtl"
      className={`figure-box ${className || ''}`}
      style={{
        margin: '1.5rem 0',
        textAlign: 'center',
        ...floatStyle,
      }}
    >
      {src.endsWith('.svg') ? (
        // SVG: use img tag for better scaling
        // eslint-disable-next-line @next/next/no-img-element
        <img
          src={src}
          alt={alt}
          style={{
            maxWidth: '100%',
            borderRadius: '8px',
            boxShadow: '0 2px 8px rgba(0,0,0,0.1)',
          }}
        />
      ) : (
        <Image
          src={src}
          alt={alt}
          width={width || 700}
          height={height || 400}
          style={{
            maxWidth: '100%',
            height: 'auto',
            borderRadius: '8px',
            boxShadow: '0 2px 8px rgba(0,0,0,0.1)',
          }}
        />
      )}
      {(caption || number) && (
        <figcaption
          style={{
            color: '#616161',
            fontSize: '0.9em',
            marginTop: '0.5rem',
          }}
        >
          {number && <strong>ุดฺฉู {number}. </strong>}
          {caption}
          {captionEn && (
            <span dir="ltr" style={{ opacity: 0.7, marginRight: '0.5em' }}>
              โ {captionEn}
            </span>
          )}
        </figcaption>
      )}
    </figure>
  );
}
```

### ฑฑ.ถ MermaidDiagram Component

```jsx
// components/mdx/MermaidDiagram.jsx
'use client';
import { useEffect, useRef, useState, useId } from 'react';

let mermaidModule = null;
const getMermaid = async () => {
  if (!mermaidModule) {
    mermaidModule = (await import('mermaid')).default;
    mermaidModule.initialize({
      startOnLoad: false,
      theme: 'base',
      themeVariables: {
        fontFamily: '"Vazirmatn", "Tahoma", sans-serif',
        fontSize: '14px',
        primaryColor: '#E3F2FD',
        primaryTextColor: '#0D47A1',
        primaryBorderColor: '#1565C0',
        lineColor: '#1A73E8',
      },
      flowchart: { htmlLabels: true, curve: 'basis' },
      sequence: { mirrorActors: false },
      securityLevel: 'loose',
    });
  }
  return mermaidModule;
};

export default function MermaidDiagram({ chart, id: propId, caption, number }) {
  const autoId = useId();
  const id = propId || `mermaid-${autoId.replace(/:/g, '')}`;
  const containerRef = useRef(null);
  const [svg, setSvg] = useState('');
  const [error, setError] = useState(null);

  useEffect(() => {
    let cancelled = false;

    const render = async () => {
      try {
        const mermaid = await getMermaid();
        const { svg: renderedSvg } = await mermaid.render(id, chart.trim());
        if (!cancelled) {
          setSvg(renderedSvg);
          setError(null);
        }
      } catch (err) {
        if (!cancelled) {
          setError(err.message || 'ุฎุทุง ุฏุฑ ุฑูุฏุฑ ูููุฏุงุฑ');
          console.error('Mermaid render error:', err);
        }
      }
    };

    render();
    return () => { cancelled = true; };
  }, [chart, id]);

  if (error) {
    return (
      <div style={{
        background: '#FFEBEE', border: '1px solid #EF5350',
        borderRadius: 8, padding: '1rem', margin: '1.5rem 0',
        direction: 'ltr', textAlign: 'left',
      }}>
        <strong>โ ุฎุทุง ุฏุฑ ุฑูุฏุฑ ูููุฏุงุฑ:</strong>
        <pre style={{ fontSize: '0.85em', marginTop: '0.5rem' }}>{error}</pre>
        <details>
          <summary>ฺฉุฏ Mermaid</summary>
          <pre>{chart}</pre>
        </details>
      </div>
    );
  }

  return (
    <figure style={{ margin: '1.5rem 0', textAlign: 'center' }}>
      <div
        ref={containerRef}
        className="mermaid-container"
        style={{ direction: 'ltr', overflowX: 'auto' }}
        dangerouslySetInnerHTML={{ __html: svg }}
      />
      {(caption || number) && (
        <figcaption style={{ color: '#616161', fontSize: '0.9em', marginTop: '0.5rem' }}>
          {number && <strong>ูููุฏุงุฑ {number}. </strong>}
          {caption}
        </figcaption>
      )}
    </figure>
  );
}
```

### ฑฑ.ท Citation & Bibliography Components

```jsx
// components/mdx/Citation.jsx
export default function Citation({ id, data }) {
  // data = { author, year, title, ... } ุงุฒ bibliography.json
  return (
    <a
      href={`#ref-${id}`}
      className="citation"
      title={data ? `${data.author} (${data.year})` : id}
      style={{ color: '#00897B', textDecoration: 'none' }}
    >
      [{data ? `${data.author}, ${data.year}` : id}]
    </a>
  );
}

// components/mdx/Bibliography.jsx
export default function Bibliography({ entries }) {
  // entries = [{id, author, year, title, publisher, ...}, ...]
  return (
    <section id="bibliography" dir="rtl">
      <h2>๐ ฺฉุชุงุจโูุงูู</h2>
      <ol style={{ fontSize: '0.95em' }}>
        {entries.map((entry) => (
          <li key={entry.id} id={`ref-${entry.id}`}>
            {entry.lang === 'fa' ? (
              // ูุฑุฌุน ูุงุฑุณ
              <span>
                {entry.author} ({entry.year}).{' '}
                <cite style={{ fontStyle: 'italic' }}>{entry.title}</cite>.
                {entry.publisher && ` ${entry.publisher}.`}
              </span>
            ) : (
              // ูุฑุฌุน ุงูฺฏูุณ
              <span dir="ltr" lang="en">
                {entry.author} ({entry.year}).{' '}
                <cite style={{ fontStyle: 'italic' }}>{entry.title}</cite>.
                {entry.publisher && ` ${entry.publisher}.`}
                {entry.url && (
                  <>
                    {' '}
                    <a href={entry.url} target="_blank" rel="noopener noreferrer">
                      {new URL(entry.url).hostname}
                    </a>
                  </>
                )}
              </span>
            )}
          </li>
        ))}
      </ol>
    </section>
  );
}
```

### ฑฑ.ธ CrossRef Component

```jsx
// components/mdx/CrossRef.jsx

const typeLabels = {
  theorem: 'ูุถู',
  definition: 'ุชุนุฑู',
  example: 'ูุซุงู',
  lemma: 'ูู',
  figure: 'ุดฺฉู',
  table: 'ุฌุฏูู',
  equation: 'ุฑุงุจุทู',
  algorithm: 'ุงูฺฏูุฑุชู',
  chapter: 'ูุตู',
  section: 'ุจุฎุด',
};

export default function CrossRef({ id, type, number, text }) {
  const label = typeLabels[type] || '';
  const displayText = text || (label && number ? `${label} ${number}` : id);

  return (
    <a
      href={`#${id}`}
      className="cross-ref"
      style={{ color: '#1A73E8', textDecoration: 'none', borderBottom: '1px dashed #1A73E8' }}
    >
      {displayText}
    </a>
  );
}
```

### ฑฑ.น BilingualBlock Component

```jsx
// components/mdx/BilingualBlock.jsx

export default function BilingualBlock({
  dir = 'ltr',
  lang = 'en',
  className,
  style,
  children,
}) {
  return (
    <div
      dir={dir}
      lang={lang}
      className={`bilingual-block ${className || ''}`}
      style={{
        background: dir === 'ltr' ? '#F5F5F5' : 'transparent',
        padding: dir === 'ltr' ? '1.5rem' : '0',
        borderRadius: '8px',
        borderLeft: dir === 'ltr' ? '4px solid #1A73E8' : 'none',
        borderRight: dir === 'rtl' ? '4px solid #1A73E8' : 'none',
        margin: '1.5rem 0',
        unicodeBidi: 'isolate',
        ...style,
      }}
    >
      {children}
    </div>
  );
}
```

### ฑฑ.ฑฐ ุชููุฏ ุฎูุฏฺฉุงุฑ ฺฉุงููพูููุชโูุง

```bash
# ุฏุณุชูุฑ ุชููุฏ ฺฉุงููพูููุชโูุง MDX ุจุฑุง ูุจโุณุงุช ุดูุง
formatforge init-components \
  --framework next \
  --output ./components/mdx/ \
  --typescript \
  --with-css \
  --font "Vazirmatn" \
  --primary-color "#1A73E8" \
  --accent-color "#00897B"

# ุฎุฑูุฌ:
# components/mdx/
# โโโ Theorem.tsx
# โโโ Definition.tsx
# โโโ Proof.tsx
# โโโ Example.tsx
# โโโ Admonition.tsx
# โโโ Figure.tsx
# โโโ FigureGrid.tsx
# โโโ MermaidDiagram.tsx
# โโโ Citation.tsx
# โโโ Bibliography.tsx
# โโโ CrossRef.tsx
# โโโ BilingualBlock.tsx
# โโโ CodeBlock.tsx
# โโโ TableWrapper.tsx
# โโโ Details.tsx
# โโโ index.ts          โ re-exports ููู
# โโโ styles/
#     โโโ mdx-components.css
#     โโโ rtl-overrides.css
```

---

## ฑฒ. ููุดู ุฑุงู ุชูุณุนู (Roadmap)

```
ูุงุฒ ฑ โ MVP (ููุชู ฑ-ด):
โโโโโโโโโโโโโโโโโโโโโโโโ
โ CLI ูพุงู (scan, convert, test)
โ ุชุจุฏูโฺฏุฑ LaTeX โ MDX (ธฐูช ุนูุงุตุฑ)
โ ุชุจุฏูโฺฏุฑ Markdown โ MDX
โ ูุฏุฑุช ุฑุงุถ (KaTeX)
โ ูุฏุฑุช ูุงุฑุณ/RTL/ZWNJ
โ ุชุณุช ุณุงุฎุชุงุฑ ู ูุญุชูุง
โ ุงุณุชูุฑุงุฑ ุณุงุฏู (ฺฉูพ ูุงู)
โ ฺฏุฒุงุฑุด ูพุงู

ูุงุฒ ฒ โ ุจูุจูุฏ ุชุจุฏู (ููุชู ต-ธ):
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ุชุจุฏูโฺฏุฑ HTML โ MDX
โ ุชุจุฏูโฺฏุฑ DOCX โ MDX
โ ุชุจุฏูโฺฏุฑ RST โ MDX
โ ุชุจุฏูโฺฏุฑ AsciiDoc โ MDX
โ TikZ โ SVG
โ Mermaid โ ฺฉุงููพูููุช
โ ุฌุฏุงูู ูพฺุฏู (ุงุฏุบุงู/ุฑูฺฏ)
โ ฺฉุชุงุจโูุงูู (biblatex โ JSON)
โ ูพูุดุด นตูช+ ุนูุงุตุฑ LaTeX

ูุงุฒ ณ โ ููุดููุฏุณุงุฒ (ููุชู น-ฑฒ):
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ุชฺฉูู ูุชุงุฏุชุง ุจุง AI
โ ุชููุฏ slug ููุดููุฏ
โ ุชููุฏ ุฎูุงุตู/description
โ ุชููุฏ alt text ุชุตุงูุฑ
โ ูพุดููุงุฏ ุงุตูุงุญ ุฎุทุงูุง
โ ุชุจุฏูโฺฏุฑ PDF โ MDX (ูพุงู)
โ ุชุจุฏูโฺฏุฑ EPUB โ MDX
โ ุชุจุฏูโฺฏุฑ Jupyter โ MDX

ูุงุฒ ด โ ุชุณุช ู ฺฉูุช (ููุชู ฑณ-ฑถ):
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ุชุณุช ุจุตุฑ (Playwright)
โ ููุงุณู ุจุตุฑ ุฎุฑูุฌ ุจุง ุงุตู
โ ุงูุชุงุฒ ฺฉูุช ูพุดุฑูุชู
โ ฺฏุฒุงุฑุด HTML ุฒุจุง
โ ุจูููโุณุงุฒ ุนููฺฉุฑุฏ (parallel, cache)
โ TUI ุจุง Textual

ูุงุฒ ต โ ูพุดุฑูุชู (ููุชู ฑท+):
โโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ GUI (Tauri)
โ Watch mode (ุชุจุฏู ุฎูุฏฺฉุงุฑ ููฺฏุงู ุชุบุฑ ูุงู)
โ Plugin system (ุงูุฒูููโูุง ุณูุงุฑุด)
โ API server (ุชุจุฏู ุงุฒ ุทุฑู HTTP)
โ VS Code extension
โ ูพุดุชุจุงู ุงุฒ Typst
โ ุชุจุฏู ูุนฺฉูุณ (MDX โ LaTeX)
โ ุงูุชุดุงุฑ ุจูโุนููุงู ูพฺฉุฌ PyPI/npm
```

---

## ฑณ. ูุซุงู ฺฉุงูู: ุณูุงุฑู ูุงูุน

```
ุณูุงุฑู: ุชุจุฏู ฺฉุชุงุจ ยซูุจุงู ููุทู ุฑุงุถยป ุงุฒ LaTeX ุจู MDX
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

ูุฑูุฏ:
  C:\Users\ali\Documents\logic-book\
  โโโ main.tex              (ููุทู ูุฑูุฏุ 2 KB)
  โโโ preamble.sty          (ูพฺฉุฌโูุง ู ุชูุธูุงุชุ 3 KB)
  โโโ chapter01.tex          (ูุตู ฑ: ููุฏููุ 15 KB)
  โโโ chapter02.tex          (ูุตู ฒ: ููุทู ฺฏุฒุงุฑูโุงุ 22 KB)
  โโโ chapter03.tex          (ูุตู ณ: ููุทู ูุญูููุงุชุ 18 KB)
  โโโ chapter04.tex          (ูุตู ด: ูููุฏุงุฑูุงุ 12 KB)
  โโโ chapter05.tex          (ูุตู ต: ุฑุงูููุง LaTeXุ 8 KB)
  โโโ references.bib         (ฺฉุชุงุจโูุงููุ 4 KB)
  โโโ figures/
      โโโ mindmap.tikz       (ููุดู ุฐูู TikZุ 2 KB)
      โโโ flowchart.tikz     (ูููฺุงุฑุช TikZุ 1.5 KB)
      โโโ bar-chart.tikz     (ูููุฏุงุฑ ูููโุงุ 1 KB)
      โโโ proof-tree.tikz    (ุฏุฑุฎุช ุงุซุจุงุชุ 1 KB)
      โโโ cover.png          (ุฌูุฏ ฺฉุชุงุจุ 500 KB)

ุฏุณุชูุฑ:
  formatforge run "C:\Users\ali\Documents\logic-book\" \
    --output "C:\Projects\my-blog\content\books\" \
    --interactive

ุฎุฑูุฌ ููุง:
  C:\Projects\my-blog\content\books\logic-foundations\
  โโโ _series.json
  โโโ 00-introduction\
  โ   โโโ index.mdx          (11 KB)
  โ   โโโ assets\
  โ       โโโ mindmap.svg    (5 KB, ุงุฒ TikZ)
  โโโ 01-propositional-logic\
  โ   โโโ index.mdx          (18 KB)
  โ   โโโ assets\
  โ       โโโ truth-table-demorgan.svg  (3 KB)
  โ       โโโ flowchart.svg            (4 KB)
  โโโ 02-predicate-logic\
  โ   โโโ index.mdx          (14 KB)
  โ   โโโ assets\
  โ       โโโ proof-tree.svg (3 KB)
  โโโ 03-visuals\
  โ   โโโ index.mdx          (10 KB)
  โ   โโโ assets\
  โ       โโโ bar-chart.svg  (4 KB)
  โ       โโโ cover.webp     (85 KB, ุจููู ุงุฒ PNG)
  โโโ 04-latex-guide\
  โ   โโโ index.mdx          (7 KB)
  โโโ bibliography.json       (3 KB, 15 ูุฑุฌุน)
  โโโ shared-assets\
      โโโ series-cover.webp  (85 KB)

ุขูุงุฑ ุชุจุฏู:
  โฑ ุฒูุงู: ฑ ุฏููู ฑฒ ุซุงูู
  ๐ ฺฉูุช: นณ/ฑฐฐ
  ๐ ูุงู MDX: ต ูุตู
  ๐ผ ุชุตุงูุฑ: ถ SVG + ฑ WebP
  ๐ข ูุฑููู: ธท (ููู ูููู)
  ๐ ุฌุฏุงูู: ฑฒ (ููู ูููู)
  ๐จ ูููุฏุงุฑ TikZ: ต โ ต SVG
  ๐ ฺฉุฏ: ธ ุจููฺฉ
  ๐ ูพุงููุดุช: ฑต
  ๐ ุงุฑุฌุงุนุงุช: ณฒ (ณฐ ูููู, ฒ ุจูโูุตู ุงุตูุงุญโุดุฏู)
  ๐ ูุฑุงุฌุน: ฑต (biblatex โ JSON)
  โ ููโูุงุตูู: ดตถ/ดตถ โ
```

---

## ฑด. ุฎูุงุตู ููุง ู ฺฺฉโูุณุช ุณุงุฎุช

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ              FormatForge โ ฺฺฉโูุณุช ุณุงุฎุช                     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ
โ                                                              โ
โ  โ ูุฑุญูู ฑ: ุงุณฺฉู ู ุดูุงุณุง                                โ
โ    โ ุชุดุฎุต ูุฑูุช (magic bytes + extension + content)        โ
โ    โ ุชุดุฎุต encoding (UTF-8/BOM/Windows-1256)               โ
โ    โ ุชุดุฎุต ุณุงุฎุชุงุฑ (ุชฺฉโูุงู/ูพูุดู/ZIP/ฺฉุชุงุจ/ูุฌููุนู)          โ
โ    โ ุชุดุฎุต ุฒุจุงู (ูุงุฑุณ/ุงูฺฏูุณ/ุฏูุฒุจุงูู)                   โ
โ    โ ฺฏุฑุงู ูุงุจุณุชฺฏ (include/input/images)                    โ
โ    โ ุชุฃุฏ ุชุนุงูู ุงุฒ ฺฉุงุฑุจุฑ                                  โ
โ                                                              โ
โ  โ ูุฑุญูู ฒ: ูุชุงุฏุชุง                                        โ
โ    โ ุงุณุชุฎุฑุงุฌ ุงุฒ น ูุฑูุช ูุฎุชูู                                โ
โ    โ ุดููุง Pydantic ุจุฑุง ุงุนุชุจุงุฑุณูุฌ                        โ
โ    โ ุชููุฏ slug ููุดููุฏ (ูุงุฑุณ โ ูุงุชู)                     โ
โ    โ ุชฺฉูู ุจุง AI (ุงุฎุชุงุฑ)                                 โ
โ    โ ฺฉุชุง slug (ุจุฑุฑุณ ุจุง ฺฏุฒุงุฑุด ูุฑฺฉุฒ)                   โ
โ    โ ุชุฃุฏ ุชุนุงูู                                          โ
โ                                                              โ
โ  โ ูุฑุญูู ฒ.ต: ูพุดโุจุฑุฑุณ                                    โ
โ    โ ุจุฑุฑุณ encoding ู ZWNJ                                 โ
โ    โ ุจุฑุฑุณ ุณุงุฎุชุงุฑ ู syntax                                  โ
โ    โ ุจุฑุฑุณ ูุงุจุณุชฺฏโูุง (ุชุตุงูุฑ/ูุงูโูุง)                     โ
โ    โ ุจุฑุฑุณ ูุฑูููโูุง (KaTeX pre-parse)                       โ
โ    โ ุชุจุฏู ุขุฒูุงุด (ฑฐูช)                                  โ
โ    โ ุชุฎูู ุฒูุงู ู ุญุฌู                                       โ
โ    โ ฺฏุฒุงุฑุด + ุชุฃุฏ                                          โ
โ                                                              โ
โ  โ ูุฑุญูู ณ: ุชุจุฏู                                          โ
โ    โ น ุชุจุฏูโฺฏุฑ (LaTeX/HTML/MD/DOCX/PDF/RST/Adoc/EPUB/NB) โ
โ    โ ูพุฑุฏุงุฒุดฺฏุฑ ุฑุงุถ (โ KaTeX syntax)                       โ
โ    โ ูพุฑุฏุงุฒุดฺฏุฑ ูููุฏุงุฑ (TikZโSVG, MermaidโComponent)        โ
โ    โ ูพุฑุฏุงุฒุดฺฏุฑ ุฌุฏูู (ุณุงุฏูโMD, ูพฺุฏูโHTML)                 โ
โ    โ ูพุฑุฏุงุฒุดฺฏุฑ ุชุตูุฑ (ุจูููโุณุงุฒ/WebP/SVGO)                 โ
โ    โ ูพุฑุฏุงุฒุดฺฏุฑ ฺฉุฏ (syntax highlight metadata)               โ
โ    โ ูพุฑุฏุงุฒุดฺฏุฑ ููฺฉ/ุงุฑุฌุงุน/ูพุงููุดุช/ฺฉุชุงุจโูุงูู                โ
โ    โ ูพุฑุฏุงุฒุดฺฏุฑ RTL/ูุงุฑุณ (ZWNJ/bidi/typography)            โ
โ    โ ุชุจุฏู ูุถู/ุชุนุฑู/ุงุซุจุงุช โ ฺฉุงููพูููุช                    โ
โ    โ ุชููุฏ import ูุง ุฎูุฏฺฉุงุฑ                                 โ
โ    โ ููุงุด ูพุดุฑูุช + ุฎุทุงูุง                                   โ
โ                                                              โ
โ  โ ูุฑุญูู ด: ุชุณุช ฺฉูุช                                      โ
โ    โ ุชุณุช ุณุงุฎุชุงุฑ (YAML/JSX/MDX compile)                    โ
โ    โ ุชุณุช ูุญุชูุง (ุดูุงุฑุด ุนูุงุตุฑ)                              โ
โ    โ ุชุณุช ุฑุงุถ (KaTeX parse)                               โ
โ    โ ุชุณุช ูุงุฑุณ (ZWNJ/bidi/quotes)                          โ
โ    โ ุชุณุช ููฺฉโูุง (ุฏุงุฎู/ุฎุงุฑุฌ/ุชุตุงูุฑ)                      โ
โ    โ ุชุณุช ุจุตุฑ (Playwright โ ุงุฎุชุงุฑ)                        โ
โ    โ ุงูุชุงุฒ ฺฉูุช (0-100)                                  โ
โ                                                              โ
โ  โ ูุฑุญูู ต: ุงุณุชูุฑุงุฑ                                        โ
โ    โ ุณุงุฎุช ุณุงุฎุชุงุฑ ูพูุดู                                       โ
โ    โ ฺฉูพ MDX + assets                                      โ
โ    โ ุจูููโุณุงุฒ ุชุตุงูุฑ                                      โ
โ    โ ุจุฑูุฒุฑุณุงู ููฺฉโูุง ูุณุจ                                โ
โ    โ ุชููุฏ ูุงูโูุง ุฌุงูุจ (series.json, bibliography.json) โ
โ    โ ุงุนุชุจุงุฑุณูุฌ ููุง                                      โ
โ    โ Git commit (ุงุฎุชุงุฑ)                                   โ
โ                                                              โ
โ  โ ูุฑุญูู ถ: ฺฏุฒุงุฑุด                                          โ
โ    โ ุซุจุช ุฏุฑ central_log                                     โ
โ    โ ุขูุงุฑ ุชุฌูุน                                              โ
โ    โ ุซุจุช slug (ุฌููฺฏุฑ ุงุฒ ุชฺฉุฑุงุฑ)                           โ
โ    โ ุฎุฑูุฌ YAML/JSON/CSV/HTML                               โ
โ                                                              โ
โ  โ ุฒุฑุณุงุฎุช                                                   โ
โ    โ CLI ุจุง Click + Rich                                    โ
โ    โ ุชูุธูุงุช YAML                                           โ
โ    โ ูุฏุฑุช ุฎุทุง ู ุจุงุฒุงุจ                                   โ
โ    โ ูพุฑุฏุงุฒุด ููุงุฒ                                            โ
โ    โ ฺฉูุด (TikZ, ุชุตุงูุฑ, AI)                                โ
โ    โ ุชุณุชโูุง ูุงุญุฏ ู E2E                                     โ
โ    โ CI/CD                                                   โ
โ    โ ูุณุชูุฏุณุงุฒ                                               โ
โ    โ ฺฉุงููพูููุชโูุง MDX + init-components                     โ
โ                                                              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ
โ  ๐ ูฺฉุงุช ุญุงุช ูุงุฑุณ:                                      โ
โ    โธ ููโูุงุตูู (ZWNJ) ูุฑฺฏุฒ ุญุฐู ูุดูุฏ                        โ
โ    โธ encoding ููุดู UTF-8 (ุชุฑุฌุญุงู BOM)                     โ
โ    โธ dir="rtl" + lang="fa" ููุดู ุฏุฑ frontmatter             โ
โ    โธ ุจููฺฉโูุง ฺฉุฏ/ุฑุงุถ/ูููุฏุงุฑ: dir="ltr"                   โ
โ    โธ ฺฏููู ยซยป ูู ""                                         โ
โ    โธ ุดูุงุฑุด ZWNJ ูุจู ู ุจุนุฏ ุชุจุฏู ุจุงุฏ ุจุฑุงุจุฑ ุจุงุดุฏ           โ
โ    โธ ูโ ู ูโฺฉ ุงุตูุงุญ ุดูุฏ                                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ฑต. ูุญูู ุงุณุชูุงุฏู ุงุฒ ุงู ูพุฑุงููพุช

### ุจุฑุง ุดุฑูุน ุชูุณุนู:

```
ุงู ูพุฑุงููพุช ุฑุง ุจู ฺฉ LLM ุจุฏูุฏ ู ุจฺฏูุฏ:

"ูุทูุงู ุจุฑ ุงุณุงุณ ุงู ูุดุฎุตุงุชุ ฺฉุฏ ูุงฺูู [ูุงู ูุงฺูู] ุฑุง
ุจููุณ. ุงุฒ Python 3.11+ ุงุณุชูุงุฏู ฺฉู. ุชุณุชโูุง ูุงุญุฏ
ูู ุจููุณ."

ูุซุงูโูุง:
1. "ฺฉุฏ core/scanner/file_detector.py ุฑุง ุจููุณ"
2. "ฺฉุฏ core/converters/latex_to_mdx.py ุฑุง ุจููุณ"
3. "ฺฉุฏ core/persian/zwnj_handler.py ุฑุง ุจููุณ"
4. "ฺฉุฏ core/quality/math_test.py ุฑุง ุจููุณ"
5. "ฺฉุฏ cli/commands/convert.py ุฑุง ุจููุณ"
```

### ุจุฑุง ฺฏุณุชุฑุด:

```
"ุจุฑ ุงุณุงุณ ูุดุฎุตุงุช ูพุฑุงููพุช ุงุตูุ
[ูุงุจูุช X] ุฑุง ุงุถุงูู ฺฉู / [ุจุฎุด Y] ุฑุง ุจูุจูุฏ ุจุฏู.
ุณุงุฒฺฏุงุฑ ุจุง ุจูู ุณุณุชู ุญูุธ ุดูุฏ."
```
```

---

## ุฎูุงุตู

ุงู ูพุฑุงููพุช ุดุงูู **ุชูุงู** ุฌุฒุฆุงุช ูู ููุฑุฏ ูุงุฒ ุจุฑุง ุณุงุฎุช ุงุจุฒุงุฑ ุชุจุฏู ูุฑูุช ุดูุงุณุช:

| ุจุฎุด | ูุญุชูุง |
|:----|:------|
| **ูุนูุงุฑ** | ุณุงุฎุชุงุฑ ูุงฺููุงุฑ ถ ูุฑุญููโุง |
| **Stage 1** | ุงุณฺฉูุฑ ูุฑูุฏ (ฑฐ ุณูุงุฑู) + ุชุฃุฏ ุชุนุงูู |
| **Stage 2** | ูุชุงุฏุชุง (ุดููุง TypeScript + ุงุณุชุฎุฑุงุฌ น ูุฑูุช + AI + slug) |
| **Stage 2.5** | ูพุดโุจุฑุฑุณ (ต ุฏุณุชู ุจุฑุฑุณ + ุชุจุฏู ุขุฒูุงุด) |
| **Stage 3** | ุชุจุฏู (น ูุฑูุช ร ธ+ ูพุฑุฏุงุฒุดฺฏุฑ + ููุงุนุฏ RTL/ูุงุฑุณ) |
| **Stage 4** | ุชุณุช (ถ ุณุทุญ + ุงูุชุงุฒ ฺฉูุช ฐ-ฑฐฐ) |
| **Stage 5** | ุงุณุชูุฑุงุฑ (ุณุงุฎุชุงุฑ ูพูุดู + ุจูููโุณุงุฒ + ููฺฉโุฏู) |
| **Stage 6** | ฺฏุฒุงุฑุด ูุฑฺฉุฒ YAML |
| **ูุงุจุณุชฺฏโูุง** | Python packages + ุงุจุฒุงุฑูุง ุฎุงุฑุฌ |
| **ุชูุธูุงุช** | ูุงู YAML ฺฉุงูู ุจุง ฑฐฐ+ ุขูพุดู |
| **CLI** | ฑต+ ุฏุณุชูุฑ |
| **ฺฉุงููพูููุชโูุง** | ฑฒ ฺฉุงููพูููุช React/MDX |
| **ุชุณุช** | ดฐ+ ุชุณุช ูุงุญุฏ + E2E + CI/CD |
| **ููุดู ุฑุงู** | ต ูุงุฒุ ฑท+ ููุชู |
| **ูฺฉุงุช ูุงุฑุณ** | ท ูุงููู ุญุงุช RTL/ZWNJ/bidi |

---

## Conversation 3
*(2 segments merged)*
*Model: claude-opus-4-6*

<!-- ๐ง MANUAL INTERVENTION NEEDED -->
> **Review needed:** Overlap detection flagged some areas

### Request

ุจู ูุธุฑ ูุทุน ุดุฏู ุงุณุช.
ุงฺฏุฑ ูุทุน ุดุฏู ุงุฏุงูู ุจุฏู ู ููุง ฺฉู ู ฺฉ ุณุงุฎุชุงุฑ ูพุดููุงุฏ:
ุงุฑุงุฆู ุจุฏู ฺฉู ุงู ุณู ููุน ูุงู ุฑุง ุงุจุชุฏุง ฺฉุงูู ุชุจุฏู ฺฉูุฏ. ุนู ุชุฑุฌุญ ูพุงุฏูโุณุงุฒ ุชูุงู ูุงุจูุชโูุง ูุฑู ุงูุฒุงุฑ + ุชูุณุนูโ ูุบุฒ ูุฑู ุงูุฒุงุฑ ุจุฑุง ุชุจุฏู ูุงูโูุง ูุงุชฺฉุณ ูุงุฑฺฉ ุฏุงูู ู html ุจุงุดุฏ. 
ุนู ฺฉ ูุงุฒุจูุฏ ู ูุฏู ุงุฌุฑุง ุจุฑุง ุงู ููู ูพุดููุงุฏ ฺฉู ุจู ุดฺฉู ฺฉู ุจู ูุญุฏูุฏุชโูุง ฺุช ู ุชูฺฉู ุชูุฌู ฺฉูุฏ. 


ููููู

### Response

# ููุงโุณุงุฒ ูพุฑุงููพุช + ูุฏู ุงุฌุฑุง ูพุงุฏูโุณุงุฒ

ูพุฑุงููพุช ุงุตู **ฺฉุงูู** ุจูุฏ โ ุจุฎุด ฑต (ูุญูู ุงุณุชูุงุฏู) ุขุฎุฑู ุจุฎุด ุจูุฏ. ุงฺฉููู **ูุฏู ุงุฌุฑุง** ุฑุง ุงุฑุงุฆู ูโุฏูู.

---

## ุงุณุชุฑุงุชฺ ูพุงุฏูโุณุงุฒ ุจุง LLM (ูุฏุฑุช ูุญุฏูุฏุช ุชูฺฉู)

### ูุดฺฉู ุงุตู

> ูพุฑุงููพุช ุฌุงูุน ุญุฏูุฏ **ณฐ,ฐฐฐ+ ุชูฺฉู** ุงุณุช. ุงุฑุณุงู ฺฉุฌุง ุขู + ุฏุฑุฎูุงุณุช ฺฉุฏ = **ุณุฑุฑุฒ ุชูฺฉู** ู ุฎุฑูุฌ ูุงูุต.

### ุฑุงูโุญู: **ูุฏู ฺฏูุชฺฏู ูุงูโุง (Layered Conversation Model)**

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ           SYSTEM PROMPT (ุซุงุจุช ุฏุฑ ูุฑ ฺุช)          โ
โ   ุฎูุงุตู ูุนูุงุฑ + ููุงุนุฏ ูุงุฑุณ + ุดููุง ุฎุฑูุฌ     โ
โ   (~2000 ุชูฺฉู)                                   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ         CONTEXT FILE (ุงุฑุณุงู ุฏุฑ ุงุจุชุฏุง ฺุช)        โ
โ   ูุดุฎุตุงุช ูุงฺูู ูุนู + interface ูุง               โ
โ   (~1500 ุชูฺฉู)                                   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ              USER PROMPT (ุฏุฑุฎูุงุณุช)                โ
โ   "ฺฉุฏ ูุงู X ุฑุง ุจููุณ"                          โ
โ   (~500 ุชูฺฉู)                                    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ           ASSISTANT RESPONSE (ุฎุฑูุฌ)             โ
โ   ฺฉุฏ + ุชุณุช + ุชูุถุญ                               โ
โ   (~4000-8000 ุชูฺฉู)                              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
ูุฌููุน ูุฑ ุชุนุงูู: ~8000-12000 ุชูฺฉู โ ุงูู
```

---

## System Prompt ุซุงุจุช (ุฏุฑ ูุฑ ฺุช ุงุณุชูุงุฏู ุดูุฏ)

```markdown
# System Prompt โ FormatForge

ุชู ฺฉ ุชูุณุนูโุฏููุฏู ุงุฑุดุฏ Python ูุณุช ฺฉู ุงุจุฒุงุฑ FormatForge ุฑุง ูโุณุงุฒ.

## ุฎูุงุตู ูพุฑูฺู
ุงุจุฒุงุฑ CLI ุจุฑุง ุชุจุฏู ุงุณูุงุฏ (LaTeX, MD, HTML) ุจู MDX ูุงุฑุณ.
ูพูุชูุฑู: Windows | Python 3.11+ | CLI ุจุง Click+Rich

## ููุงุนุฏ ุญุงุช ูุงุฑุณ (ุฏุฑ ุชูุงู ฺฉุฏูุง ุฑุนุงุช ุดูุฏ)
1. ZWNJ (U+200C) ูุฑฺฏุฒ ุญุฐู ูุดูุฏ โ ุดูุงุฑุด ูุจู/ุจุนุฏ
2. Encoding: UTF-8 (ุชุฑุฌุญุงู BOM)
3. dir="rtl" + lang="fa" ุฏุฑ frontmatter
4. ุจููฺฉโูุง ฺฉุฏ/ุฑุงุถ/ูููุฏุงุฑ: dir="ltr"
5. ฺฏููู ยซยป ูู ""
6. ูโ ู ูโฺฉ ุงุตูุงุญ ุดูุฏ
7. \lr{} โ <span dir="ltr"> | \begin{latin} โ <div dir="ltr">

## ุณุงุฎุชุงุฑ ูพุฑูฺู
formatforge/
โโโ cli/commands/          # Click commands
โโโ core/scanner/          # ุงุณฺฉูุฑ ูุฑูุฏ
โโโ core/metadata/         # ูุชุงุฏุชุง ู frontmatter
โโโ core/converters/       # ุชุจุฏูโฺฏุฑูุง (base.py + ูุฑ ูุฑูุช)
โโโ core/processors/       # ูพุฑุฏุงุฒุดฺฏุฑูุง ุชุฎุตุต (math, table, image, rtl, ...)
โโโ core/persian/          # ูุงฺูู ูุงุฑุณ (zwnj, bidi, typography)
โโโ core/quality/          # ุชุณุช ฺฉูุช
โโโ core/deployer/         # ุงุณุชูุฑุงุฑ ุฎุฑูุฌ
โโโ ai/                    # ูุงฺูู AI (ุงุฎุชุงุฑ)
โโโ config/                # ุชูุธูุงุช YAML
โโโ templates/             # ูุงูุจโูุง Jinja2 ุจุฑุง MDX
โโโ tests/                 # pytest

## ุณุจฺฉ ฺฉุฏููุณ
- Type hints ฺฉุงูู
- Docstring ูุงุฑุณ+ุงูฺฏูุณ
- ูุฑ ูุงู < 300 ุฎุท
- ูุฑ ุชุงุจุน < 40 ุฎุท
- Pydantic ุจุฑุง ูุฏูโูุง
- Error handling ุจุง custom exceptions
- Logging ุจุง loguru ุง logging
- ุชุณุชโูุง ฺฉูุงุฑ ฺฉุฏ (tests/test_<module>.py)
```

---

## ูุงุฒุจูุฏ ุงุฌุฑุง (ฑฒ ุงุณูพุฑูุช โ ูุฑ ุงุณูพุฑูุช โ ณ-ต ุฑูุฒ)

### ููุง ฺฉู

```
ุงุณูพุฑูุช โ ูุฏู                          โ ูุงฺููโูุง               โ ฺุชโูุง LLM
โโโโโโโโโฟโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฟโโโโโโโโโโโโโโโโโโโโโโโฟโโโโโโโโโ
  S01   โ ุฒุฑุณุงุฎุช ู ูุฏูโูุง ุฏุงุฏู       โ models, config, CLI   โ  5-6
  S02   โ ุงุณฺฉูุฑ ูุฑูุฏ                  โ scanner/*             โ  4-5
  S03   โ ูุงฺูู ูุงุฑุณ                  โ persian/*             โ  4-5
  S04   โ ูพุฑุฏุงุฒุดฺฏุฑูุง ูพุงู             โ processors (math,code)โ  5-6
  S05   โ ูพุฑุฏุงุฒุดฺฏุฑูุง ูพุดุฑูุชู          โ processors (tbl,imgโฆ) โ  5-6
  S06   โ ุชุจุฏูโฺฏุฑ Markdown โ MDX       โ md_to_mdx            โ  4-5
  S07   โ ุชุจุฏูโฺฏุฑ HTML โ MDX           โ html_to_mdx          โ  5-6
  S08   โ ุชุจุฏูโฺฏุฑ LaTeX โ MDX (ูพุงู)  โ latex_to_mdx (ฑ)     โ  6-7
  S09   โ ุชุจุฏูโฺฏุฑ LaTeX โ MDX (ูพุดุฑูุชู)โ latex_to_mdx (ฒ)    โ  5-6
  S10   โ ุชุณุช ฺฉูุช + ูุชุงุฏุชุง          โ quality/*, metadata/* โ  5-6
  S11   โ ุงุณุชูุฑุงุฑ + ฺฏุฒุงุฑุด              โ deployer/*, reports/  โ  4-5
  S12   โ ฺฉูพุงุฑฺูโุณุงุฒ + E2E           โ CLI final, E2E tests โ  4-5
โโโโโโโโโฟโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฟโโโโโโโโโโโโโโโโโโโโโโโฟโโโโโโโโโ
 ูุฌููุน  โ ณถ-ดธ ุฑูุฒ                    โ ~50 ูุงู Python      โ  ~60 ฺุช
```

---

### ุงุณูพุฑูุช S01: ุฒุฑุณุงุฎุช ู ูุฏูโูุง ุฏุงุฏู

**ูุฏู:** ุงุณฺฉูุช ูพุฑูฺู + ูุฏูโูุง Pydantic + CLI ูพุงู + ุชูุธูุงุช

#### ฺุช ฑ: ุณุงุฎุชุงุฑ ูพุฑูฺู ู setup

```
[Context] ูุดุฎุตุงุช ุณุงุฎุชุงุฑ ูพุฑูฺู ุงุฒ ูพุฑุงููพุช ุงุตู (ุจุฎุด ณ.ฒ)

[Prompt]
ูุงูโูุง ุฒุฑ ุฑุง ุจุณุงุฒ:
1. pyproject.toml (ุจุง ุชูุงู ูุงุจุณุชฺฏโูุง)
2. formatforge/__init__.py
3. formatforge/cli/__main__.py (Click CLI ูพุงู ุจุง ุฏุณุชูุฑุงุช ุฎุงู)
4. formatforge/exceptions.py (custom exceptions)
5. Makefile ุง justfile ุจุฑุง ุฏุณุชูุฑุงุช ุชูุณุนู
```

#### ฺุช ฒ: ูุฏูโูุง ุฏุงุฏู (Pydantic)

```
[Context] ุดููุง ูุชุงุฏุชุง ุงุฒ ูพุฑุงููพุช ุงุตู (ุจุฎุด ด.ฒ.ฑ) + ScanReport (ุจุฎุด ด.ฑ.ณ)

[Prompt]
ูุงูโูุง ุฒุฑ ุฑุง ุจุณุงุฒ:
1. formatforge/models/metadata.py
   - DocumentMetadata (Pydantic v2 model)
   - AuthorInfo, SeriesInfo, AssetInfo
2. formatforge/models/scan_report.py
   - ScanReport, DocumentInfo, AssetInfo, Warning
3. formatforge/models/conversion_result.py
   - ConversionResult, ConversionStats, QualityReport
4. formatforge/models/__init__.py (re-exports)

ุชูุงู ููุฏูุง ุจุง type hints ู validator ู ููุงุฏุฑ ูพุดโูุฑุถ.
ููุฏูุง ูุงุฑุณ: title, description, tags โ str ุจุง ุงุนุชุจุงุฑุณูุฌ ZWNJ
```

#### ฺุช ณ: ุชูุธูุงุช (Config)

```
[Context] ูุงู ุชูุธูุงุช ุงุฒ ูพุฑุงููพุช ุงุตู (ุจุฎุด ถ.ฑ)

[Prompt]
ูุงูโูุง ุฒุฑ ุฑุง ุจุณุงุฒ:
1. formatforge/config/schema.py
   - AppConfig (Pydantic Settings)
   - ScannerConfig, MetadataConfig, ConversionConfig
   - PersianConfig, TestingConfig, DeploymentConfig
2. formatforge/config/loader.py
   - load_config(path) โ AppConfig
   - merge_configs(default, user) โ AppConfig
   - get_config() โ singleton
3. config/default_config.yaml (ููุงุฏุฑ ูพุดโูุฑุถ)
```

#### ฺุช ด: CLI ูพุงู

```
[Context] ุฏุณุชูุฑุงุช CLI ุงุฒ ูพุฑุงููพุช ุงุตู (ุจุฎุด ท)

[Prompt]
formatforge/cli/ ุฑุง ฺฉุงูู ฺฉู:
1. cli/__main__.py โ ฺฏุฑูู ุงุตู Click
2. cli/commands/scan.py โ ุฏุณุชูุฑ scan (skeleton)
3. cli/commands/convert.py โ ุฏุณุชูุฑ convert (skeleton)
4. cli/commands/test_cmd.py โ ุฏุณุชูุฑ test (skeleton)
5. cli/commands/deploy.py โ ุฏุณุชูุฑ deploy (skeleton)
6. cli/commands/report.py โ ุฏุณุชูุฑ report (skeleton)
7. cli/commands/doctor.py โ ุฏุณุชูุฑ doctor (ุจุฑุฑุณ ูุงุจุณุชฺฏโูุง)
8. cli/commands/run.py โ ุฏุณุชูุฑ run (all-in-one)

ูุฑ ุฏุณุชูุฑ: Click command ุจุง options ุตุญุญ + Rich console output
doctor: ุจุฑุฑุณ ูุตุจ pandoc, xelatex, node, mermaid-cli, etc.
```

#### ฺุช ต: ฺฉูุงุณ ูพุงู ุชุจุฏูโฺฏุฑ

```
[Context] ุฎูุงุตู ูุนูุงุฑ ุชุจุฏู ุงุฒ ูพุฑุงููพุช (ุจุฎุด ด.ณ)

[Prompt]
ูุงูโูุง ุฒุฑ ุฑุง ุจุณุงุฒ:
1. formatforge/core/converters/base.py
   - BaseConverter (abstract class)
     - detect(file_path) โ bool
     - extract_metadata(file_path) โ DocumentMetadata
     - convert(file_path, config) โ ConversionResult
     - validate_output(result) โ QualityReport
   - ConverterRegistry (registry pattern)
     - register(format, converter_class)
     - get_converter(format) โ BaseConverter
     - detect_format(file_path) โ str

2. formatforge/core/processors/base.py
   - BaseProcessor (abstract)
     - process(content, context) โ str
   - ProcessorPipeline
     - add(processor)
     - run(content, context) โ str
```

#### ฺุช ถ: Logger ู Utilities

```
[Prompt]
1. formatforge/utils/logger.py
   - setup_logger(verbose, log_file)
   - ูุฑูุช ูุงุฑุณโูพุณูุฏ (RTL-safe)

2. formatforge/utils/file_utils.py
   - read_file_safe(path) โ (content, encoding, has_bom)
   - write_file_utf8_bom(path, content)
   - detect_encoding(path) โ str
   - count_zwnj(text) โ int
   - ensure_directory(path)

3. formatforge/utils/text_utils.py
   - slugify(text, lang) โ str
   - truncate(text, max_len) โ str
   - is_persian(text) โ bool
   - is_mixed_language(text) โ bool

4. ุชุณุชโูุง ูุงุญุฏ ุจุฑุง ูุฑ ุณู ูุงู
```

---

### ุงุณูพุฑูุช S02: ุงุณฺฉูุฑ ูุฑูุฏ

#### ฺุช ฑ: ุชุดุฎุต ูุฑูุช ูุงู

```
[Context] ุฌุฏูู ูุฑูุชโูุง ู ุงูฺฏูุฑุชู ุดูุงุณุง ุงุฒ ูพุฑุงููพุช (ุจุฎุด ด.ฑ.ฒ)

[Prompt]
formatforge/core/scanner/file_detector.py:
- detect_format(path) โ str
  ุจุฑ ุงุณุงุณ: ูพุณููุฏ + magic bytes + ุชุญูู ูุญุชูุง
  ูุฑูุชโูุง: latex, html, markdown, docx, pdf, rst, asciidoc, epub, notebook
- detect_encoding(path) โ EncodingInfo(name, has_bom, confidence)
- detect_language(content) โ LanguageInfo(primary, has_persian, has_english)

+ tests/test_file_detector.py ุจุง ูุงูโูุง ูุงูุน
```

#### ฺุช ฒ: ุชุญูู ุณุงุฎุชุงุฑ

```
[Context] ุงูฺฏูุฑุชู ุดูุงุณุง ุณุงุฎุชุงุฑ ุงุฒ ูพุฑุงููพุช (ุจุฎุด ด.ฑ.ฒ)

[Prompt]
formatforge/core/scanner/structure_analyzer.py:
- analyze_directory(path) โ StructureAnalysis
  - ุชุดุฎุต: single_doc | independent_articles | multi_chapter_book | related_collection
- analyze_latex_project(path) โ LatexProjectInfo
  - ูพุฏุง ฺฉุฑุฏู main file
  - ุชุญูู \input/\include
  - ุชุญูู \bibliography
  - ุณุงุฎุช dependency graph
- analyze_markdown_collection(path) โ list[DocInfo]
- find_assets(path) โ list[AssetInfo]
  - ุชุตุงูุฑุ ูููุชโูุงุ CSSุ bib
```

#### ฺุช ณ: ูุฏุฑุช ุขุฑุดู

```
[Prompt]
formatforge/core/scanner/archive_handler.py:
- extract_archive(path, temp_dir) โ ExtractedArchive
  - ูพุดุชุจุงู: ZIP, RAR (ุงุฎุชุงุฑ), 7Z (ุงุฎุชุงุฑ), TAR.GZ
  - ุชุดุฎุต encoding ูุงู ูุงูโูุง (ูุงุฑุณ)
  - ุจุงุฒฺฏุดุช: ูุณุฑ ุงุณุชุฎุฑุงุฌ + ูุณุช ูุงูโูุง
- cleanup_temp(path)
- is_archive(path) โ bool
```

#### ฺุช ด: ุงุณฺฉูุฑ ุงุตู + ุชุนุงูู

```
[Context] ุฎุฑูุฌ ScanReport ู ุฑุงุจุท ุชุนุงูู ุงุฒ ูพุฑุงููพุช (ุจุฎุด ด.ฑ.ณ ู ด.ฑ.ด)

[Prompt]
1. formatforge/core/scanner/scanner.py:
   - Scanner class
     - scan(input_path) โ ScanReport
     - ฺฉูพุงุฑฺูโุณุงุฒ file_detector + structure_analyzer + archive_handler

2. formatforge/cli/commands/scan.py (ุชฺฉูู):
   - ููุงุด ุฒุจุง ScanReport ุจุง Rich
   - ุชุฃุฏ ุชุนุงูู (T/E/F/A/Q)
   - ุงุตูุงุญ ุฎูุฏฺฉุงุฑ encoding

+ tests/test_scanner.py
```

---

### ุงุณูพุฑูุช S03: ูุงฺูู ูุงุฑุณ

**ุงู ุงุณูพุฑูุช ุญุงุชโุชุฑู ุงุณุช โ ุชูุงู ุชุจุฏูโฺฏุฑูุง ุงุฒ ุขู ุงุณุชูุงุฏู ูโฺฉููุฏ.**

#### ฺุช ฑ: ูุฏุฑุช ููโูุงุตูู (ZWNJ)

```
[Context] ููุงุนุฏ ZWNJ ุงุฒ ูพุฑุงููพุช (ุจุฎุด ด.ณ.ฑ โ ุท)

[Prompt]
formatforge/core/persian/zwnj_handler.py:
- ZWNJ = '\u200c'
- count_zwnj(text) โ int
- validate_zwnj_preserved(before, after) โ ZWNJReport
  - count_before, count_after, positions_lost
- find_zwnj_positions(text) โ list[int]
- fix_common_zwnj_issues(text) โ str
  - "ู ุฑูู" โ "ูโุฑูู"
  - "ฺฉุชุงุจ ูุง" โ "ฺฉุชุงุจโูุง"
  - (ุจุง ุฏฺฉุดูุฑ ูพุดููุฏ/ูพุณููุฏ ูุงุฑุณ)
- protect_zwnj(text) โ (protected_text, restoration_map)
  - ุฌุงฺฏุฒู ZWNJ ุจุง placeholder ูุจู ุงุฒ ูพุฑุฏุงุฒุด
- restore_zwnj(text, map) โ str
  - ุจุงุฒฺฏุฑุฏุงูุฏู ZWNJ ูุง

PERSIAN_PREFIXES = ["ู", "ูู", "ุจุฑ", "ุฏุฑ", "ุจ", ...]
PERSIAN_SUFFIXES = ["ูุง", "ูุง", "ุง", "ุงู", "ุงุช", "ุงุด",
                     "ุชุฑ", "ุชุฑู", "ฺฏุฑ", "ูุฑ", ...]

+ tests/test_zwnj_handler.py ุจุง ฒฐ+ ููุฑุฏ ุชุณุช
```

#### ฺุช ฒ: ูุฏุฑุช ุฏูุฌูุช (BiDi)

```
[Prompt]
formatforge/core/persian/bidi_handler.py:
- wrap_rtl_block(content) โ str
  - ุงุถุงูู ฺฉุฑุฏู dir="rtl" ุจู ุจููฺฉ ูุงุฑุณ
- wrap_ltr_block(content) โ str
  - ุงุถุงูู ฺฉุฑุฏู dir="ltr" ุจู ุจููฺฉ ุงูฺฏูุณ/ฺฉุฏ
- detect_block_direction(text) โ "rtl" | "ltr" | "mixed"
- split_bidi_segments(text) โ list[BidiSegment]
  - BidiSegment(text, direction, lang)
- convert_latex_lr(text) โ str
  - \lr{text} โ <span dir="ltr">text</span>
  - \rl{text} โ <span dir="rtl">text</span>
  - \begin{latin}...\end{latin} โ <div dir="ltr" lang="en">...</div>
  - \begin{persian}...\end{persian} โ <div dir="rtl" lang="fa">...</div>
  - \LTRfootnote{} โ ูพุงููุดุช ุจุง dir="ltr"

+ tests/test_bidi_handler.py
```

#### ฺุช ณ: ุชุงูพูฺฏุฑุงู ูุงุฑุณ

```
[Prompt]
formatforge/core/persian/typography.py:
- fix_arabic_characters(text) โ str
  - ู โ  (U+064A โ U+06CC)
  - ู โ ฺฉ (U+0643 โ U+06A9)
  - ูช โ ูช (ุงุตูุงุญ ุฏุฑุตุฏ ุนุฑุจ)
- fix_persian_quotes(text) โ str
  - "text" โ ยซtextยป
  - 'text' โ ยซtextยป (ูุงุจู ุชูุธู)
- fix_persian_spacing(text) โ str
  - ุญุฐู ูุงุตูู ูุจู ุงุฒ : ุ ุ !
  - ุงุถุงูู ูุงุตูู ุจุนุฏ ุงุฒ . , : ุ
- convert_numerals(text, target="persian") โ str
  - 0-9 โ ฐ-น
  - ููุท ุฏุฑ ูุชู ูุงุฑุณ (ูู ุฏุฑ ฺฉุฏ/ุฑุงุถ/URL)
- normalize_persian(text) โ str
  - ุชุฑฺฉุจ ุชูุงู ุงุตูุงุญุงุช ุจุงูุง
- PersianTextProcessor class
  - process(text, config: PersianConfig) โ str

+ tests/test_typography.py ุจุง ณฐ+ ููุฑุฏ ุชุณุช
```

#### ฺุช ด: ูพุฑุฏุงุฒุดฺฏุฑ RTL ุจุฑุง MDX

```
[Prompt]
formatforge/core/processors/rtl_processor.py:
- RTLProcessor(BaseProcessor)
  - process(mdx_content, context) โ str
  ูุธุงู:
    1. ุงุทููุงู ุงุฒ dir="rtl" ุฏุฑ frontmatter
    2. ุงุทููุงู ุงุฒ lang="fa" ุฏุฑ frontmatter
    3. ุงุถุงูู ฺฉุฑุฏู dir="ltr" ุจู ุจููฺฉโูุง ฺฉุฏ
    4. ุงุถุงูู ฺฉุฑุฏู dir="ltr" ุจู ุจููฺฉโูุง ุฑุงุถ display
    5. ุดูุงุณุง ู wrap ุจููฺฉโูุง ุชูุงูโุงูฺฏูุณ
    6. ุญูุธ ZWNJ (ุดูุงุฑุด ูุจู/ุจุนุฏ)
    7. ุงุตูุงุญ ุชุงูพูฺฏุฑุงู ูุงุฑุณ (ุงฺฏุฑ ูุนุงู ุจุงุดุฏ)
    8. ุงุตูุงุญ ฺฉุงุฑุงฺฉุชุฑูุง ุนุฑุจ (ุงฺฏุฑ ูุนุงู ุจุงุดุฏ)

+ tests/test_rtl_processor.py
```

---

### ุงุณูพุฑูุช S04: ูพุฑุฏุงุฒุดฺฏุฑูุง ูพุงู

#### ฺุช ฑ: ูพุฑุฏุงุฒุดฺฏุฑ ุฑุงุถ

```
[Context] ููุงุนุฏ ุชุจุฏู ุฑุงุถ ุงุฒ ูพุฑุงููพุช (ุจุฎุด ด.ณ.ฑ โ ุงูู)

[Prompt]
formatforge/core/processors/math_processor.py:
- MathProcessor(BaseProcessor)
  - process(content, context) โ str

ูุธุงู:
1. ุดูุงุณุง ูุฑูููโูุง inline: $...$ ู \(...\)
2. ุดูุงุณุง ูุฑูููโูุง display:
   - $$...$$ ู \[...\]
   - \begin{equation}...\end{equation}
   - \begin{align}...\end{align}
   - \begin{gather}...\end{gather}
   - \begin{multline}...\end{multline}
3. ุชุจุฏู LaTeX environments:
   - equation โ $$...$$ (ุจุง ุญูุธ label)
   - align โ $$\begin{aligned}...$$
   - cases, pmatrix, bmatrix โ ุญูุธ ุฏุฑูู $$
4. ุชุจุฏู \label{eq:x} โ {/* label: eq-x */} ุง id
5. ุชุจุฏู \ref{eq:x} โ ููฺฉ
6. ุจุงุฒฺฏุดุง ูุงฺฉุฑููุง ุฑุงุถ ุณูุงุฑุด (\newcommand)
7. ุงุนุชุจุงุฑุณูุฌ ุจุง KaTeX parse (ุงุฎุชุงุฑ)
8. ุญูุธ \text{ูุงุฑุณ} ุฏุฑูู ูุฑููู

- extract_math_blocks(text) โ list[MathBlock]
  - MathBlock(content, type, label, line_number)
- validate_math_syntax(latex) โ (bool, error_message)
- count_math_blocks(text) โ MathStats

+ tests/test_math_processor.py ุจุง ูููููโูุง:
  - ูุฑููู ุณุงุฏู inline
  - ูุฑููู display
  - align ุจุง ฺูุฏ ุฎุท
  - cases
  - ูุงุชุฑุณ
  - ูุฑููู ุจุง \text{ูุงุฑุณ}
  - ูุงฺฉุฑู ุณูุงุฑุด
```

#### ฺุช ฒ: ูพุฑุฏุงุฒุดฺฏุฑ ฺฉุฏ

```
[Context] ููุงุนุฏ ุชุจุฏู ฺฉุฏ ุงุฒ ูพุฑุงููพุช (ุจุฎุด ด.ณ.ฑ โ ู)

[Prompt]
formatforge/core/processors/code_processor.py:
- CodeProcessor(BaseProcessor)
  - process(content, context) โ str

ูุธุงู:
1. ุชุจุฏู LaTeX listings/minted/verbatim โ ```lang
2. ุชุจุฏู HTML <pre><code> โ ```lang
3. ุชุดุฎุต ุฒุจุงู (ุงุฒ class/language attribute)
4. ุญูุธ ุดูุงุฑู ุฎุทูุท (ุงุฎุชุงุฑ)
5. ุญูุธ ุนููุงู (caption โ title)
6. ุญูุธ label โ id
7. ุงุทููุงู ุงุฒ direction: ltr
8. ุชุจุฏู inline: \texttt{} ู \verb|| โ `...`

- extract_code_blocks(text, format) โ list[CodeBlock]
- detect_language(code) โ str (heuristic)

+ tests/test_code_processor.py
```

#### ฺุช ณ: ูพุฑุฏุงุฒุดฺฏุฑ ููฺฉ ู ุงุฑุฌุงุนุงุช

```
[Context] ููุงุนุฏ ุชุจุฏู ููฺฉ ุงุฒ ูพุฑุงููพุช (ุจุฎุด ด.ณ.ฑ โ ุฒ)

[Prompt]
formatforge/core/processors/link_processor.py:
- LinkProcessor(BaseProcessor)

ูุธุงู:
1. \href{url}{text} โ [text](url)
2. \url{url} โ [url](url)
3. \ref{label} โ [ุดูุงุฑู](#label) (ุจุง ุชุนู ุดูุงุฑู)
4. \cref{label} โ [ููุน ุดูุงุฑู](#label)
5. \cite{key} โ [ููุณูุฏู, ุณุงู](#ref-key)
6. \footnote{text} โ [^fn-N] ... [^fn-N]: text
7. \LTRfootnote{text} โ [^fn-N] (ุจุง dir="ltr")
8. HTML <a href> โ [text](url)
9. ุชุจุฏู ููฺฉโูุง ุจู ูุตูโูุง (relative paths)
10. ุฌูุนโุขูุฑ ุงุฑุฌุงุนุงุช (labels โ targets map)

- collect_labels(text, format) โ dict[str, LabelInfo]
- collect_citations(text, format) โ list[str]
- collect_footnotes(text, format) โ list[FootnoteInfo]
- resolve_cross_references(content, labels_map) โ str

+ tests/test_link_processor.py
```

#### ฺุช ด: ูพุฑุฏุงุฒุดฺฏุฑ ูพุงููุดุช ู ฺฉุชุงุจโูุงูู

```
[Context] ููุงุนุฏ ฺฉุชุงุจโูุงูู ุงุฒ ูพุฑุงููพุช (ุจุฎุด ด.ณ.ฑ โ ุญ)

[Prompt]
formatforge/core/processors/bibliography_processor.py:
- BibliographyProcessor

ูุธุงู:
1. ุฎูุงูุฏู ูุงู .bib (pybtex ุง bibtexparser)
2. ุชุจุฏู ุจู JSON: list[BibEntry]
   - BibEntry(id, type, author, title, year, publisher, url, lang, ...)
3. ุชุดุฎุต ุฒุจุงู ูุฑุฌุน (ูุงุฑุณ/ุงูฺฏูุณ)
4. ุชุจุฏู \cite{key} โ <Citation id="key" />
5. ุชููุฏ bibliography.json
6. ุชููุฏ ุจุฎุด ฺฉุชุงุจโูุงูู MDX (ุงุฎุชุงุฑ)

formatforge/core/processors/footnote_processor.py:
- FootnoteProcessor

ูุธุงู:
1. ุงุณุชุฎุฑุงุฌ \footnote{} ุงุฒ LaTeX
2. ุงุณุชุฎุฑุงุฌ \LTRfootnote{} (ุจุง ุญูุธ dir)
3. ุงุณุชุฎุฑุงุฌ \endnote{} โ ุฌูุนโุขูุฑ ุฏุฑ ุงูุชูุง
4. ุชุจุฏู ุจู ูุฑูุช MD: [^fn-N]
5. ุดูุงุฑูโฺฏุฐุงุฑ ุฎูุฏฺฉุงุฑ
6. ุญูุธ ูุญุชูุง ูุงุฑุณ/ุงูฺฏูุณ

+ tests/ ุจุฑุง ูุฑ ุฏู
```

---

### ุงุณูพุฑูุช S05: ูพุฑุฏุงุฒุดฺฏุฑูุง ูพุดุฑูุชู

#### ฺุช ฑ: ูพุฑุฏุงุฒุดฺฏุฑ ุฌุฏูู

```
[Context] ููุงุนุฏ ุชุจุฏู ุฌุฏูู ุงุฒ ูพุฑุงููพุช (ุจุฎุด ด.ณ.ฑ โ ุฌ)

[Prompt]
formatforge/core/processors/table_processor.py:
- TableProcessor(BaseProcessor)

ูุธุงู:
1. ุชุญูู LaTeX tabular/tabularx/longtable โ TableModel
   - TableModel(headers, rows, caption, label, merged_cells, styles)
2. ุชุญูู HTML <table> โ TableModel
3. ุชุตููโฺฏุฑ ุฎุฑูุฌ:
   - ุณุงุฏู (ุจุฏูู ุงุฏุบุงู) โ Markdown pipe table
   - ูพฺุฏู (colspan/rowspan/ุฑูฺฏ) โ <table> HTML ุฏุฑูู MDX
4. ุชุจุฏู LaTeX:
   - \multirow{n}{width}{text}
   - \multicolumn{n}{align}{text}
   - \rowcolors{}{}{} โ CSS classes
   - \toprule/\midrule/\bottomrule โ border styles
   - \caption{} โ <caption>
5. ุญูุธ dir="rtl" ุจุฑุง ุฌุฏุงูู ูุงุฑุณ
6. ุญูุธ ูุฑูููโูุง $...$ ุฏุฑูู ุณููู

- parse_latex_table(text) โ TableModel
- parse_html_table(html) โ TableModel
- render_markdown_table(model) โ str
- render_html_table(model) โ str

+ tests/test_table_processor.py ุจุง:
  - ุฌุฏูู ุณุงุฏู
  - ุฌุฏูู ุจุง multirow/multicolumn
  - ุฌุฏูู ุฑูฺฏ
  - ุฌุฏูู ุจุง ูุฑููู
  - ุฌุฏูู ูุงุฑุณ
```

#### ฺุช ฒ: ูพุฑุฏุงุฒุดฺฏุฑ ุชุตูุฑ

```
[Context] ููุงุนุฏ ุชุจุฏู ุชุตูุฑ ุงุฒ ูพุฑุงููพุช (ุจุฎุด ด.ณ.ฑ โ ุฏ)

[Prompt]
formatforge/core/processors/image_processor.py:
- ImageProcessor(BaseProcessor)

ูุธุงู:
1. ุดูุงุณุง ุงุฑุฌุงุนุงุช ุชุตูุฑ:
   - LaTeX: \includegraphics{path}
   - MD: ![alt](path)
   - HTML: <img src="path">
2. ุงุณุชุฎุฑุงุฌ caption ู alt text
3. ุชุจุฏู ุจู <Figure> component (ุง ![])
4. ูุฏุฑุช wrapfigure โ float style
5. ูุฏุฑุช subfigure โ <FigureGrid>
6. ุจูููโุณุงุฒ (ุงฺฏุฑ ูุนุงู):
   - PNG/JPG โ WebP (Pillow)
   - SVG โ SVGO optimize (subprocess)
   - ูุญุฏูุฏ ฺฉุฑุฏู max width
7. ฺฉูพ ูุงูโูุง ุจู assets/
8. ุจุฑูุฒุฑุณุงู ูุณุฑูุง ุฏุฑ MDX

- find_image_references(text, format) โ list[ImageRef]
- optimize_image(path, config) โ OptimizedImage
- copy_assets(refs, source_dir, target_dir) โ AssetMap

+ tests/test_image_processor.py
```

#### ฺุช ณ: ูพุฑุฏุงุฒุดฺฏุฑ ูููุฏุงุฑ (TikZ + Mermaid)

```
[Context] ููุงุนุฏ ุชุจุฏู ูููุฏุงุฑ ุงุฒ ูพุฑุงููพุช (ุจุฎุด ด.ณ.ฑ โ ุจ)

[Prompt]
formatforge/core/processors/diagram_processor.py:
- DiagramProcessor(BaseProcessor)

ูุธุงู:
1. ุดูุงุณุง ุจููฺฉโูุง TikZ:
   - \begin{tikzpicture}...\end{tikzpicture}
   - \begin{pgfplot}...\end{pgfplot}
2. ุชุจุฏู TikZ โ SVG:
   - ุณุงุฎุช ูุงู .tex ูููุช (standalone class)
   - ฺฉุงููพุงู ุจุง xelatex
   - ุชุจุฏู ุจุง dvisvgm
   - ุฐุฎุฑู SVG
3. ุดูุงุณุง ุจููฺฉโูุง Mermaid:
   - MD: ```mermaid ... ```
   - HTML: <div class="mermaid">
4. ุชุจุฏู Mermaid โ <MermaidDiagram> component
5. (ุงุฎุชุงุฑ) ุฑูุฏุฑ Mermaid โ SVG ุจุง mermaid-cli

- extract_tikz_blocks(text) โ list[TikZBlock]
- compile_tikz_to_svg(tikz_code, config) โ str (path to SVG)
- extract_mermaid_blocks(text, format) โ list[MermaidBlock]
- convert_mermaid_to_component(block) โ str

+ tests/test_diagram_processor.py
```

#### ฺุช ด: ูพุฑุฏุงุฒุดฺฏุฑ Admonition ู ูุญุทโูุง ุฎุงุต

```
[Prompt]
formatforge/core/processors/admonition_processor.py:
- AdmonitionProcessor(BaseProcessor)

ูุธุงู:
1. LaTeX tcolorbox / custom environments โ <Admonition>
2. LaTeX theorem/definition/proof/example โ <Theorem>/<Definition>/<Proof>
3. MD callouts: > [!NOTE], > [!WARNING], ... โ <Admonition>
4. HTML custom boxes (.note, .warning, ...) โ <Admonition>
5. RST admonitions: .. note::, .. warning:: โ <Admonition>
6. details/summary โ <Details>
7. ูฺฏุงุดุช ูุญุทโูุง LaTeX ุจู ฺฉุงููพูููุชโูุง:

ENVIRONMENT_MAP = {
    'theorem': ('Theorem', {}),
    'lemma': ('Theorem', {'type': 'lemma'}),
    'corollary': ('Theorem', {'type': 'corollary'}),
    'definition': ('Definition', {}),
    'example': ('Example', {}),
    'proof': ('Proof', {}),
    'remark': ('Admonition', {'type': 'note'}),
    'warningbox': ('Admonition', {'type': 'warning'}),
    'notebox': ('Admonition', {'type': 'note'}),
    # tcolorbox ุณูุงุฑุด โ ุจุฑ ุงุณุงุณ ุนููุงู/ุฑูฺฏ ุชุดุฎุต
}

+ tests/test_admonition_processor.py
```

---

### ุงุณูพุฑูุช S06: ุชุจุฏูโฺฏุฑ Markdown โ MDX

#### ฺุช ฑ: ุชุจุฏูโฺฏุฑ ุงุตู MD

```
[Context] ููุงุนุฏ MDโMDX ุงุฒ ูพุฑุงููพุช (ุจุฎุด ด.ณ.ฒ โ Markdown โ MDX)

[Prompt]
formatforge/core/converters/md_to_mdx.py:
- MarkdownToMDXConverter(BaseConverter)

  def detect(path) โ bool
  def extract_metadata(path) โ DocumentMetadata
  def convert(path, config) โ ConversionResult

ูพุฑุฏุงุฒุด ุชุฑุชุจ:
1. ุฎูุงูุฏู ูุงู + ุจุฑุฑุณ encoding
2. ุชุญูู frontmatter (YAML/TOML)
3. ุชฺฉูู metadata
4. ุงุฌุฑุง ProcessorPipeline:
   - MathProcessor
   - CodeProcessor
   - TableProcessor
   - ImageProcessor
   - DiagramProcessor (Mermaid)
   - AdmonitionProcessor (callouts)
   - LinkProcessor
   - FootnoteProcessor
   - RTLProcessor
5. ุชุจุฏูโูุง JSX:
   - class โ className
   - for โ htmlFor
   - style="..." โ style={{...}}
   - <!-- --> โ {/* */}
   - self-closing tags: <br> โ <br />
6. ุชููุฏ import ูุง
7. ุณุงุฎุช frontmatter ููุง
8. ุชุฑฺฉุจ: frontmatter + imports + content
9. ุดูุงุฑุด ZWNJ (before/after)

+ tests/test_md_to_mdx.py ุจุง ูุงู sample-mermaid.md
```

#### ฺุช ฒ: ุชุจุฏูโูุง JSX ู Import Generator

```
[Prompt]
formatforge/core/converters/jsx_utils.py:
- convert_html_to_jsx(html) โ str
  - class โ className
  - for โ htmlFor
  - style="color:red" โ style={{color:'red'}}
  - <!-- --> โ {/* */}
  - <br> โ <br />
  - <img> โ <img />
  - <hr> โ <hr />
  - tabindex โ tabIndex
  - onclick โ onClick (etc.)

- generate_imports(content) โ str
  - ุงุณฺฉู ูุญุชูุง ุจุฑุง ฺฉุงููพูููุชโูุง ุงุณุชูุงุฏูโุดุฏู
  - ุชููุฏ import statements ุจุฑ ุงุณุงุณ config

COMPONENT_PATTERNS = {
    '<Theorem': 'Theorem',
    '<Definition': 'Definition',
    '<Proof': 'Proof',
    '<Admonition': 'Admonition',
    '<Figure': 'Figure',
    '<MermaidDiagram': 'MermaidDiagram',
    '<Citation': 'Citation',
    '<CrossRef': 'CrossRef',
    '<BilingualBlock': 'BilingualBlock',
}

+ tests/test_jsx_utils.py
```

#### ฺุช ณ: ุชุณุช E2E ูุงุฑฺฉโุฏุงูู

```
[Prompt]
tests/test_e2e_markdown.py:

ุชุณุช ฺฉุงูู ุชุจุฏู ูุงู sample-mermaid.md:
1. ุฎูุงูุฏู ูุงู ููููู
2. ุงุฌุฑุง MarkdownToMDXConverter
3. ุจุฑุฑุณ:
   - frontmatter ุตุญุญ
   - imports ุตุญุญ
   - ุฑุงุถ: ฑต+ ูุฑููู parseable
   - Mermaid: ฑธ ูููุฏุงุฑ โ <MermaidDiagram>
   - ุฌุฏุงูู: ต+ ุฌุฏูู ุตุญุญ
   - callouts: ต ููุน โ <Admonition>
   - ฺฉุฏ: ถ+ ุจููฺฉ ุจุง ุฒุจุงู ุตุญุญ
   - ูพุงููุดุช: ณ ูพุงููุดุช
   - ููฺฉโูุง: ต+ ููฺฉ ุตุญุญ
   - ZWNJ: ุดูุงุฑุด ุญูุธ ุดุฏู
   - JSX: classโclassName, etc.
   - dir="rtl" ุฏุฑ frontmatter
```

---

### ุงุณูพุฑูุช S07: ุชุจุฏูโฺฏุฑ HTML โ MDX

#### ฺุช ฑ: ุชุญููโฺฏุฑ HTML

```
[Context] ููุงุนุฏ HTMLโMDX ุงุฒ ูพุฑุงููพุช (ุจุฎุด ด.ณ.ฒ โ HTML โ MDX)

[Prompt]
formatforge/core/converters/html_to_mdx.py:
- HTMLToMDXConverter(BaseConverter)

  def convert(path, config) โ ConversionResult:

ูพุฑุฏุงุฒุด ุชุฑุชุจ:
1. ุฎูุงูุฏู + ุชุดุฎุต encoding
2. parse ุจุง BeautifulSoup
3. ุงุณุชุฎุฑุงุฌ metadata ุงุฒ <head>:
   - <title>, <meta name/property>, OG tags
4. ุชูุฒฺฉุงุฑ HTML:
   - ุญุฐู <script> (ุจุฌุฒ math/mermaid)
   - ุญุฐู <style> โ ุงุณุชุฎุฑุงุฌ CSS classes
   - ุญุฐู div ุชูุฏุฑุชู ุจโูุนูุง
5. ุชุจุฏู ุณุงุฎุชุงุฑ:
   - <h1>-<h6> โ #-######
   - <p> โ ูพุงุฑุงฺฏุฑุงู
   - <strong>/<b> โ **...**
   - <em>/<i> โ *...*
   - <a href> โ [text](url)
   - <ul>/<ol> โ ูุณุช
   - <blockquote> โ > ูููโููู
   - <pre><code> โ ```code```
   - <table> โ pipe table / HTML table
   - <figure> โ <Figure>
   - <details> โ <Details>
   - <dl>/<dt>/<dd> โ definition list
6. ุชุจุฏู ุนูุงุตุฑ ุฎุงุต:
   - <mark>, <kbd>, <abbr>, <time>, <address>
   - <sup>, <sub>, <ins>, <del>
   - <progress>, <meter>
   - <video>, <audio>, <iframe>
   - <svg> โ ูุงู ูุฌุฒุง
7. ุงุฌุฑุง ProcessorPipeline
8. JSX conversion + imports
9. ZWNJ check

+ tests/test_html_to_mdx.py
```

#### ฺุช ฒ: ุชุจุฏู ุนูุงุตุฑ ูพฺุฏู HTML

```
[Prompt]
ุงุฏุงูู html_to_mdx.py โ ูุชุฏูุง ฺฉูฺฉ:

- convert_table_element(tag) โ str
  - ุชุดุฎุต: ุณุงุฏู/ุงุฏุบุงู
  - ุณุงุฏู โ MD pipe table
  - ุงุฏุบุงู โ HTML <table> JSX-compatible

- convert_form_element(tag) โ str
  - <form> โ comment + placeholder

- convert_media_element(tag) โ str
  - <video> โ <Video> component
  - <audio> โ <Audio> component
  - <iframe> โ <Embed> component

- convert_svg_element(tag) โ str
  - inline SVG โ extract to file + <Image>

- convert_math_from_html(tag) โ str
  - KaTeX rendered spans โ $LaTeX$
  - MathJax rendered โ $LaTeX$
  - MathML โ LaTeX (ุจุง pylatexenc)

- extract_css_to_classnames(html) โ (cleaned_html, classname_map)

+ tests/test_html_elements.py
```

#### ฺุช ณ: ุชุณุช E2E ุงฺโุชโุงูโุงู

```
[Prompt]
tests/test_e2e_html.py:

ุชุณุช ฺฉุงูู ุชุจุฏู ูุงู sample-page.html:
1. ุชูุงู ุจุฎุดโูุง: header, TOC, chapters 1-8, footnotes, bibliography
2. ุจุฑุฑุณ:
   - metadata ุงุฒ <head>
   - ธ+ ุฌุฏูู (ุดุงูู ุงุฏุบุงู)
   - ธ+ ูููุฏุงุฑ Mermaid
   - ฑฐ+ ูุฑููู ุฑุงุถ
   - ต+ ุจููฺฉ ฺฉุฏ
   - ุชุตุงูุฑ (img, svg, placeholder)
   - ูุฏุฆู ู ุตูุช
   - ุนูุงุตุฑ ุฎุงุต: mark, kbd, abbr, details, progress
   - ูุฑู
   - RTL/LTR blocks
   - ูพุงููุดุชโูุง
   - ฺฉุชุงุจโูุงูู
   - ZWNJ ุญูุธ ุดุฏู
```

---

### ุงุณูพุฑูุช S08: ุชุจุฏูโฺฏุฑ LaTeX โ MDX (ูพุงู)

#### ฺุช ฑ: ุชุญููโฺฏุฑ LaTeX (Parser)

```
[Context] ููุงุนุฏ LaTeXโMDX ุงุฒ ูพุฑุงููพุช (ุจุฎุด ด.ณ.ฒ โ LaTeX โ MDX)

[Prompt]
formatforge/core/converters/latex_parser.py:
- LatexParser
  - parse(content) โ LatexDocument
  - LatexDocument:
      preamble: PreambleInfo
      body: list[LatexNode]

  - PreambleInfo:
      document_class: str
      packages: list[PackageInfo]
      custom_commands: dict[str, str]
      custom_environments: dict[str, EnvInfo]
      fonts: FontConfig
      title, author, date

  - LatexNode (union type):
      TextNode, CommandNode, EnvironmentNode, MathNode,
      CommentNode, GroupNode

- parse_preamble(text) โ PreambleInfo
- parse_body(text) โ list[LatexNode]
- expand_macros(nodes, commands) โ list[LatexNode]
- resolve_inputs(nodes, base_dir) โ list[LatexNode]
  - \input{file} โ ูุญุชูุง ูุงู
  - \include{file} โ ูุญุชูุง ูุงู

+ tests/test_latex_parser.py
```

#### ฺุช ฒ: ุชุจุฏู ุณุงุฎุชุงุฑ LaTeX

```
[Prompt]
formatforge/core/converters/latex_to_mdx.py (ุจุฎุด ฑ):
- LaTeXToMDXConverter(BaseConverter)

  def convert(path, config) โ ConversionResult:

ูุฑุญูู ฑ-ณ:
1. ุฎูุงูุฏู ูุงู(ูุง)
2. parse ุจุง LatexParser
3. ุจุงุฒฺฏุดุง \input/\include
4. ุจุงุฒฺฏุดุง \newcommand ูุง

ูุฑุญูู ด โ ุชุจุฏู ุณุงุฎุชุงุฑ:
- \chapter{title} โ # title
- \section{title} โ ## title
- \subsection{title} โ ### title
- \subsubsection{title} โ #### title
- \paragraph{title} โ ##### title
- \textbf{text} โ **text**
- \emph{text} / \textit{text} โ *text*
- \underline{text} โ <u>text</u>
- \sout{text} โ ~~text~~
- \texttt{text} โ `text`
- \textsc{text} โ <span style="fontVariant:'small-caps'">
- \begin{itemize} โ - ูุณุช
- \begin{enumerate} โ 1. ูุณุช
- \begin{description} โ definition list
- \begin{quote} / \begin{quotation} โ > ูููโููู
- ุฎุท ุฎุงู โ ูพุงุฑุงฺฏุฑุงู ุฌุฏุฏ
- ~ โ non-breaking space
- \\ โ ุฎุท ุฌุฏุฏ
- \clearpage, \newpage โ ---
- \maketitle โ ุญุฐู (ุงุทูุงุนุงุช ุฏุฑ frontmatter)
- \tableofcontents โ ุญุฐู (TOC ุฎูุฏฺฉุงุฑ)

- convert_node(node) โ str (recursive)
- convert_command(cmd) โ str
- convert_environment(env) โ str
- convert_text(text) โ str (escape JSX chars)

+ tests/test_latex_structure.py
```

#### ฺุช ณ: ุชุจุฏู ูุญุทโูุง LaTeX

```
[Prompt]
ุงุฏุงูู latex_to_mdx.py (ุจุฎุด ฒ):

ุชุจุฏู ูุญุทโูุง:
- \begin{theorem}[title]{label} โ <Theorem id="label" title="title">
- \begin{definition}... โ <Definition>
- \begin{proof}... โ <Proof>
- \begin{example}... โ <Example>
- newtcbtheorem environments โ ุชุดุฎุต ููุน + ุชุจุฏู
- \begin{figure}...\caption{text}\label{fig:x}
  โ <Figure src="..." caption="text" id="fig-x">
- \begin{wrapfigure}{l}{0.4\textwidth}
  โ <Figure float="left" width="40%">
- \begin{subfigure}... โ <FigureGrid>
- \begin{table}...\caption{}
  โ <table> ุจุง caption
- \begin{sidewaystable}
  โ <div className="landscape-table"><table>
- \begin{algorithm}[H]... โ ุดุจูโฺฉุฏ ุง ฺฉุฏ
- \begin{lstlisting}[language=python]
  โ ```python
- \begin{minted}{python}
  โ ```python

ูุฏุฑุช tcolorbox:
- ุดูุงุณุง ููุน ุงุฒ: colframe color, title, style name
- ูฺฏุงุดุช ุจู Admonition / Theorem / Box ููุงุณุจ

+ tests/test_latex_environments.py
```

#### ฺุช ด: ุงุณุชุฎุฑุงุฌ Metadata ุงุฒ LaTeX

```
[Prompt]
ุจุฎุด metadata ุฏุฑ latex_to_mdx.py:

def extract_metadata(path) โ DocumentMetadata:
  1. parse preamble
  2. ุงุณุชุฎุฑุงุฌ:
     - \title{} โ title
     - \author{} โ author
     - \date{} โ date
     - \begin{abstract} โ description
     - \hypersetup{pdftitle=..., pdfauthor=...}
     - ฺฉุงููุชโูุง ุณุงุฎุชุงุฑุงูุชู: % Title: ...
  3. ุชุดุฎุต ุฒุจุงู:
     - ูุฌูุฏ xepersian โ fa
     - ูุฌูุฏ ูุชู ูุงุฑุณ โ fa
     - ูุฌูุฏ babel[english] โ en
  4. ุชุดุฎุต ูฺฺฏโูุง:
     - math: ูุฌูุฏ $, equation, align
     - code: ูุฌูุฏ lstlisting, minted
     - tikz: ูุฌูุฏ tikzpicture
     - bibliography: ูุฌูุฏ \bibliography ุง \printbibliography
  5. ุชููุฏ slug ุงุฒ ุนููุงู

+ tests/test_latex_metadata.py
```

---

### ุงุณูพุฑูุช S09: ุชุจุฏูโฺฏุฑ LaTeX โ MDX (ูพุดุฑูุชู)

#### ฺุช ฑ: ูุฏุฑุช ฺฉุชุงุจ ฺูุฏูุตู

```
[Prompt]
formatforge/core/converters/latex_book_converter.py:
- LaTeXBookConverter

ูุธุงู:
1. ุชุดุฎุต ุณุงุฎุชุงุฑ ฺฉุชุงุจ:
   - main.tex ุจุง \input{chapter01}
   - ุง ูุงูโูุง ch01.tex, ch02.tex ูุณุชูู
2. ุชุจุฏู ูุฑ ูุตู ุจู ฺฉ ูุงู MDX ูุฌุฒุง
3. ุชููุฏ _series.json:
   {
     "title": "ูุจุงู ููุทู ุฑุงุถ",
     "slug": "logic-foundations",
     "chapters": [
       {"order": 0, "slug": "00-introduction", "title": "ููุฏูู"},
       {"order": 1, "slug": "01-propositional-logic", "title": "ููุทู ฺฏุฒุงุฑูโุง"},
       ...
     ],
     "bibliography": "bibliography.json"
   }
4. ุงุตูุงุญ ุงุฑุฌุงุนุงุช ุจู ูุตูโูุง:
   - \ref{ch2:thm:demorgan}
   โ [ูุถู ฑ.ฑ](/logic-foundations/01-propositional-logic#thm-demorgan)
5. ูุฏุฑุช assets ูุดุชุฑฺฉ vs ุงุฎุชุตุงุต ูุฑ ูุตู
6. ุชููุฏ bibliography.json ูุดุชุฑฺฉ

+ tests/test_latex_book.py
```

#### ฺุช ฒ: ุญุฐู ุฏุณุชูุฑุงุช ุบุฑุถุฑูุฑ LaTeX

```
[Prompt]
formatforge/core/converters/latex_cleaner.py:
- LaTeXCleaner

ูุณุช ฺฉุงูู ุฏุณุชูุฑุงุช ูุงุจู ุญุฐู:
- ุตูุญูโุจูุฏ: \geometry, \pagestyle, \fancyhf, \headrulewidth, ...
- ูููุช (ุจุฑุง ูุจ): \settextfont, \setlatintextfont, \setdigitfont, ...
- ูพฺฉุฌโูุง: ุชูุงู \usepackage{} (ุงุทูุงุนุงุชุดุงู ุงุณุชุฎุฑุงุฌ ุดุฏู)
- ุชูุธูุงุช: \pgfplotsset, \usetikzlibrary (ูฺฏุฑ ุจุฑุง TikZโSVG)
- ุดูุงุฑูุฏูโูุง: \setcounter, \newcounter
- ูุถุง ุนููุฏ: \vspace, \vfill, \bigskip, \medskip, \smallskip
- ูุถุง ุงูู: \hspace, \hfill, \quad, \qquad (ุจุนุถ ุญูุธ)
- ุตูุญูโุดฺฉู: \clearpage, \newpage โ ---
- ุฎุงู: \phantom, \hphantom, \vphantom
- ุฑูฺฏ ุชุนุฑู: \definecolor (ุงุทูุงุนุงุช ุงุณุชุฎุฑุงุฌ ุดุฏู)
- Layout: \begin{center} โ style, \centering โ style

- clean(content) โ str
- REMOVABLE_COMMANDS: set[str]
- CONVERTIBLE_COMMANDS: dict[str, Callable]

+ tests/test_latex_cleaner.py
```

#### ฺุช ณ: TikZ โ SVG Pipeline

```
[Prompt]
formatforge/core/processors/tikz_compiler.py:
- TikZCompiler

ูุธุงู:
1. ุณุงุฎุช ูุงู standalone .tex:
   \documentclass[tikz,border=5pt]{standalone}
   \usepackage{pgfplots}\pgfplotsset{compat=1.18}
   \usepackage{fontspec}
   \usepackage{xepersian}
   \settextfont{Vazirmatn}
   \begin{document}
   [TikZ code here]
   \end{document}

2. ฺฉุงููพุงู: xelatex โ PDF
3. ุชุจุฏู: dvisvgm ุง pdf2svg โ SVG
4. ุจูููโุณุงุฒ SVG (SVGO)
5. ฺฉูุด ุจุฑ ุงุณุงุณ hash ูุญุชูุง

- compile_tikz(code, config) โ SVGResult
- create_standalone_tex(code, packages) โ str
- compile_tex_to_pdf(tex_path) โ pdf_path
- convert_pdf_to_svg(pdf_path) โ svg_path
- optimize_svg(svg_path) โ svg_path
- get_cache_key(code) โ str
- check_cache(key) โ Optional[str]

+ tests/test_tikz_compiler.py
```

#### ฺุช ด: ุชุณุช E2E ูุงุชฺฉุณ

```
[Prompt]
tests/test_e2e_latex.py:

ุชุณุช ฺฉุงูู ุชุจุฏู ูุงู sample-book.tex:

1. ุชุดุฎุต: ฺฉุชุงุจ LaTeX ูุงุฑุณ-ุงูฺฏูุณ
2. ุงุณุชุฎุฑุงุฌ metadata:
   - ุนููุงู ูุงุฑุณ + ุงูฺฏูุณ
   - ููุณูุฏู
   - xepersian detected โ lang=fa
3. ุชุจุฏู ต ูุตู:
   - ูุตู ฑ: ููุฏูู (ุชุนุฑู + ูุถู + ุงุซุจุงุช + ูุซุงู)
   - ูุตู ฒ: ุฌุฏูู ุงุฑุฒุด (ุฌุฏุงูู + ุนููฺฏุฑูุง)
   - ูุตู ณ: ููุทู ูุญูููุงุช (ุงุซุจุงุช + ุฏุฑุฎุช + ุงูฺฏูุฑุชู)
   - ูุตู ด: ูููุฏุงุฑูุง (TikZโSVG + pgfplots + wrapfigure + subfigure)
   - ูุตู ต: ุฑุงูููุง (longtable + lstlisting)
4. ุจุฑุฑุณ:
   - ธท+ ูุฑููู (equation, align, cases, pmatrix)
   - ฑฒ+ ุฌุฏูู (tabular, longtable, sidewaystable)
   - ถ+ ูููุฏุงุฑ TikZ โ SVG
   - ด+ ุจููฺฉ ฺฉุฏ
   - ธ+ ูุถู/ุชุนุฑู/ุงุซุจุงุช โ ฺฉุงููพูููุช
   - ฑต+ ุงุฑุฌุงุน ูุชูุงุทุน
   - ธ+ ูพุงููุดุช
   - ฑต ูุฑุฌุน โ bibliography.json
   - ZWNJ: ุดูุงุฑุด ุญูุธ ุดุฏู
   - \lr{}, \begin{latin}: ุชุจุฏู ุตุญุญ
   - ฺฉุชุงุจโูุงูู: .bib โ JSON
   - frontmatter ฺฉุงูู
   - imports ุตุญุญ
```

---

### ุงุณูพุฑูุช S10: ุชุณุช ฺฉูุช + ูุชุงุฏุชุง

#### ฺุช ฑ: ุชุณุชโูุง ฺฉูุช

```
[Context] ุณุทูุญ ุชุณุช ุงุฒ ูพุฑุงููพุช (ุจุฎุด ด.ด.ฑ)

[Prompt]
formatforge/core/quality/ โ ฺฉุงูู:

1. structural_test.py:
   - test_frontmatter_valid(mdx) โ bool
   - test_jsx_syntax(mdx) โ bool
   - test_imports_valid(mdx) โ bool
   - test_encoding(path) โ bool
   - test_mdx_compiles(mdx) โ bool

2. content_test.py:
   - compare_element_counts(source, output) โ ContentReport
   - count_headings, count_formulas, count_images,
     count_tables, count_code_blocks, count_footnotes,
     count_words

3. math_test.py:
   - test_katex_parse(mdx) โ MathTestReport
   - extract_and_validate_all_formulas(mdx)

4. rtl_test.py:
   - test_dir_rtl_set(mdx) โ bool
   - test_lang_fa_set(mdx) โ bool
   - test_zwnj_preserved(source, output) โ ZWNJReport
   - test_quotes_correct(mdx) โ bool
   - test_ltr_blocks_correct(mdx) โ bool

5. link_test.py:
   - test_internal_links(mdx) โ LinkReport
   - test_asset_links(mdx, assets_dir) โ LinkReport
   - test_cross_chapter_links(mdx_files) โ LinkReport

6. quality_score.py:
   - calculate_quality_score(source, output, reports) โ int (0-100)
   - (ุงูฺฏูุฑุชู ุงุฒ ุจุฎุด ด.ด.ฒ ูพุฑุงููพุช)
```

#### ฺุช ฒ: ูุชุงุฏุชุง + AI Completer

```
[Context] ูุดุฎุตุงุช ูุชุงุฏุชุง ุงุฒ ูพุฑุงููพุช (ุจุฎุด ด.ฒ)

[Prompt]
1. formatforge/core/metadata/extractor.py:
   - extract_metadata(path, format) โ DocumentMetadata
   - (dispatch ุจู extractor ููุงุณุจ ุจุฑ ุงุณุงุณ ูุฑูุช)

2. formatforge/core/metadata/slug_generator.py:
   - generate_slug(title, lang, existing_slugs) โ str
   - transliterate_persian(text) โ str (Finglish)
   - ensure_unique(slug, existing) โ str

3. formatforge/core/metadata/validator.py:
   - validate_metadata(meta) โ ValidationResult
   - check_required_fields(meta) โ list[str]
   - check_slug_format(slug) โ bool

4. formatforge/ai/metadata_ai.py:
   - AIMetadataCompleter
     - complete_description(content) โ str
     - complete_tags(content) โ list[str]
     - complete_title_en(title_fa) โ str
     - suggest_slug(title) โ str
     - complete_all(content, partial_meta) โ DocumentMetadata
   - ูพุดุชุจุงู: openai, anthropic, ollama, none

+ tests/ ุจุฑุง ูุฑ ูุงฺูู
```

#### ฺุช ณ: Pre-flight Check (Stage 2.5)

```
[Context] ุจุฑุฑุณโูุง ูพุด ุงุฒ ุชุจุฏู ุงุฒ ูพุฑุงููพุช (ุจุฎุด ด.ฒ.ต)

[Prompt]
formatforge/core/quality/preflight.py:
- PreflightChecker

  def check(scan_report, config) โ PreflightReport:

ุจุฑุฑุณโูุง:
1. encoding_check(files) โ list[Issue]
2. structure_check(files, format) โ list[Issue]
3. dependency_check(files, assets) โ list[Issue]
4. content_check(files) โ list[Issue]
   - math syntax validation
   - table structure validation
5. trial_conversion(file, converter) โ TrialResult
   - ุชุจุฏู ฑฐูช ุงูู
   - ุจุฑุฑุณ ุฎุฑูุฌ
6. estimate_conversion(scan_report) โ Estimate
   - ุฒูุงู ุชูุฑุจ
   - ุญุฌู ุชูุฑุจ ุฎุฑูุฌ

- PreflightReport:
    issues: list[Issue]
    estimate: Estimate
    readiness_score: int (0-100)
    can_proceed: bool

+ CLI integration: ููุงุด ุฒุจุง ุจุง Rich
```

---

### ุงุณูพุฑูุช S11: ุงุณุชูุฑุงุฑ + ฺฏุฒุงุฑุด

#### ฺุช ฑ: ุงุณุชูุฑุงุฑ ุฎุฑูุฌ

```
[Context] ูุฑุขูุฏ ุงุณุชูุฑุงุฑ ุงุฒ ูพุฑุงููพุช (ุจุฎุด ด.ต)

[Prompt]
1. formatforge/core/deployer/file_organizer.py:
   - organize_output(result, config) โ OrganizedOutput
   - ุณุงุฎุช ุณุงุฎุชุงุฑ ูพูุดู (article vs book)
   - ูุงูโฺฏุฐุงุฑ ูุงูโูุง ุทุจู ุงูฺฏู

2. formatforge/core/deployer/asset_manager.py:
   - copy_assets(source, target, optimize) โ AssetReport
   - optimize_images(assets, config)
   - update_paths_in_mdx(mdx, path_map) โ str

3. formatforge/core/deployer/deployer.py:
   - Deployer
     - deploy(organized, target_dir, config) โ DeployReport
     - backup_existing(target_dir)
     - validate_deployment(target_dir)
     - generate_ancillary_files(_series

<!-- POSSIBLE OVERLAP DETECTED (similarity: 99%) - REVIEW BELOW -->

ุงุฏุงูู ู ููุงโุณุงุฒ ูุฏู ุงุฌุฑุง:

```markdown
### ุงุณูพุฑูุช S11: ุงุณุชูุฑุงุฑ + ฺฏุฒุงุฑุด (ุงุฏุงูู)

#### ฺุช ฑ (ุงุฏุงูู): ุงุณุชูุฑุงุฑ ุฎุฑูุฌ

3. formatforge/core/deployer/deployer.py:
   - Deployer
     - deploy(organized, target_dir, config) โ DeployReport
     - backup_existing(target_dir)
     - validate_deployment(target_dir)
     - generate_ancillary_files:
         _series.json (ุจุฑุง ฺฉุชุงุจ)
         bibliography.json
     - update_cross_chapter_links(mdx_files)
     - git_operations (ุงุฎุชุงุฑ):
         create_branch(name)
         stage_files(paths)
         commit(message)

   - DeployReport:
       target_dir: str
       mdx_files: list[str]
       asset_files: list[str]
       total_size: int
       links_updated: int
       warnings: list[str]

+ tests/test_deployer.py
```

#### ฺุช ฒ: ฺฏุฒุงุฑุด ูุฑฺฉุฒ

```
[Context] ุณุงุฎุชุงุฑ ฺฏุฒุงุฑุด ุงุฒ ูพุฑุงููพุช (ุจุฎุด ด.ถ)

[Prompt]
1. formatforge/reports/central_log.py:
   - CentralLog
     - __init__(log_path)
     - add_conversion(result: ConversionResult) โ str (conv_id)
     - get_conversion(conv_id) โ ConversionEntry
     - get_recent(n) โ list[ConversionEntry]
     - search(query) โ list[ConversionEntry]
     - get_statistics() โ Statistics
     - is_slug_used(slug) โ bool
     - register_slug(slug, conv_id)
     - export(format="yaml"|"json"|"csv") โ str

   - ConversionEntry(Pydantic):
       id, timestamp, status, input, output,
       metadata, stats, warnings, errors

   - Statistics:
       total_conversions, success_rate,
       by_format, by_language, by_type,
       avg_quality, slugs_used

2. formatforge/reports/report_engine.py:
   - ReportEngine
     - generate_summary(log) โ str (Rich formatted)
     - generate_html_report(log) โ str
     - generate_detail(conv_id) โ str

+ tests/test_central_log.py
```

#### ฺุช ณ: CLI Commands ุชฺฉูู

```
[Prompt]
ุชฺฉูู CLI commands:

1. formatforge/cli/commands/deploy.py:
   - @click.command()
   - @click.argument('source')
   - @click.option('--target', '-t')
   - @click.option('--git-commit/--no-git-commit')
   - @click.option('--open-editor/--no-open-editor')
   - ููุงุด ูพุดุฑูุช ุจุง Rich Progress
   - ุชุฃุฏ ุชุนุงูู ูุจู ุงุฒ ุงุณุชูุฑุงุฑ

2. formatforge/cli/commands/report.py:
   - report list --last N
   - report show CONV_ID
   - report stats
   - report search QUERY
   - report export --format csv --output FILE

3. formatforge/cli/commands/run.py (all-in-one):
   - ุงุฌุฑุง ุชุฑุชุจ: scan โ metadata โ preflight โ convert โ test โ deploy
   - @click.option('--interactive/--batch')
   - @click.option('--quality-min', default=80)
   - @click.option('--auto-fix/--no-auto-fix')
   - Rich Progress ุจุง ูุฑุงุญู
   - ุฎูุงุตู ููุง

+ ุชุณุช integration ุจุฑุง run command
```

---

### ุงุณูพุฑูุช S12: ฺฉูพุงุฑฺูโุณุงุฒ + E2E

#### ฺุช ฑ: Pipeline ฺฉูพุงุฑฺู

```
[Prompt]
formatforge/core/pipeline.py:
- ConversionPipeline

  def __init__(config: AppConfig)

  def run(
      input_path: str,
      output_path: str,
      interactive: bool = True,
      quality_min: int = 80,
      auto_fix: bool = False,
  ) โ PipelineResult:

    ูุฑุงุญู:
    โโโโโโ
    1. scanner.scan(input_path)
       โ ScanReport
       โ ุชุฃุฏ (ุงฺฏุฑ interactive)

    2. metadata.extract_and_complete(scan_report)
       โ list[DocumentMetadata]
       โ ุชุฃุฏ (ุงฺฏุฑ interactive)

    3. preflight.check(scan_report, metadata)
       โ PreflightReport
       โ ุงุตูุงุญ ุฎูุฏฺฉุงุฑ (ุงฺฏุฑ auto_fix)
       โ ุชุฃุฏ (ุงฺฏุฑ interactive)

    4. for each document:
         converter = registry.get_converter(format)
         result = converter.convert(path, config)
         โ ConversionResult + ููุงุด ูพุดุฑูุช

    5. quality.test_all(results)
       โ QualityReport
       โ ุงฺฏุฑ score < quality_min: ูุดุฏุงุฑ

    6. deployer.deploy(results, output_path, config)
       โ DeployReport

    7. central_log.add_conversion(...)
       โ ฺฏุฒุงุฑุด ููุง

  - PipelineResult:
      scan: ScanReport
      metadata: list[DocumentMetadata]
      preflight: PreflightReport
      conversions: list[ConversionResult]
      quality: QualityReport
      deployment: DeployReport
      log_id: str
      total_duration: float

+ tests/test_pipeline.py
```

#### ฺุช ฒ: ุชุณุชโูุง E2E ฺฉุงูู

```
[Prompt]
tests/test_e2e_full.py:

ุณูุงุฑู ฑ: ุชฺฉ ููุงูู LaTeX
  ูุฑูุฏ: sample-book.tex (ูุงู ูุง)
  ุฎุฑูุฌ: ูพูุดู MDX ุจุง ต ูุตู
  ุจุฑุฑุณ: ุชูุงู ตฐ+ ุนูุตุฑ

ุณูุงุฑู ฒ: ุชฺฉ ููุงูู Markdown
  ูุฑูุฏ: sample-mermaid.md (ูุงู ูุง)
  ุฎุฑูุฌ: ุชฺฉ ูุงู MDX
  ุจุฑุฑุณ: ฑธ ููุน Mermaid + ุฑุงุถ + ุฌุฏุงูู

ุณูุงุฑู ณ: ุตูุญู HTML
  ูุฑูุฏ: sample-page.html (ูุงู ูุง)
  ุฎุฑูุฌ: ุชฺฉ ูุงู MDX
  ุจุฑุฑุณ: ุฑุณุงูู + ูุฑู + ุนูุงุตุฑ ุฎุงุต HTML

ุณูุงุฑู ด: ูพูุดู ุชุฑฺฉุจ
  ูุฑูุฏ: ูพูุดู ุดุงูู .tex + .md + .html
  ุฎุฑูุฌ: ูพูุดูโูุง MDX ูุฌุฒุง
  ุจุฑุฑุณ: ูุฑ ูุงู ูุณุชูู ุชุจุฏู ุดุฏู

ุณูุงุฑู ต: ูุงู ZIP
  ูุฑูุฏ: sample-book.zip (ุญุงู ูพุฑูฺู LaTeX)
  ุฎุฑูุฌ: ูพูุดู MDX
  ุจุฑุฑุณ: ุงุณุชุฎุฑุงุฌ + ุชุจุฏู + ุงุณุชูุฑุงุฑ

ุณูุงุฑู ถ: Pipeline ฺฉุงูู
  ูุฑูุฏ: sample-book.tex
  ุฎุฑูุฌ: deploy ุดุฏู ุฏุฑ target_dir
  ุจุฑุฑุณ: ุชูุงู ถ ูุฑุญูู + ฺฏุฒุงุฑุด ูุฑฺฉุฒ

ูุฑ ุณูุงุฑู:
  - assert quality_score >= 85
  - assert zwnj_count_before == zwnj_count_after
  - assert all_math_parseable
  - assert all_images_exist
  - assert all_links_valid
  - assert frontmatter_valid
  - assert jsx_compiles
```

#### ฺุช ณ: Doctor + Init Components

```
[Prompt]
1. formatforge/cli/commands/doctor.py (ุชฺฉูู):
   - ุจุฑุฑุณ ุชูุงู ูุงุจุณุชฺฏโูุง:
     โ/โ Python 3.11+
     โ/โ pandoc
     โ/โ xelatex (TeX Live / MiKTeX)
     โ/โ biber
     โ/โ dvisvgm
     โ/โ node.js
     โ/โ mermaid-cli (@mermaid-js/mermaid-cli)
     โ/โ ImageMagick
     โ/โ SVGO
     โ/โ Tesseract OCR (ุงุฎุชุงุฑ)
   - ุจุฑุฑุณ ูููุชโูุง:
     โ/โ Vazirmatn
     โ/โ IRLotus (ุงุฎุชุงุฑ)
   - ุจุฑุฑุณ ุชูุธูุงุช:
     โ/โ config file exists
     โ/โ target directory writable
   - ูพุดููุงุฏ ูุตุจ ุจุฑุง ูุฑ ููุฑุฏ ูุงููุฌูุฏ

2. formatforge/cli/commands/init_components.py:
   - ุชููุฏ ฺฉุงููพูููุชโูุง MDX:
     --framework: next | astro | gatsby
     --typescript / --javascript
     --output: ูุณุฑ ุฎุฑูุฌ
   - ฺฉุงููพูููุชโูุง ุงุฒ templates/ ฺฉูพ ู ุณูุงุฑุด ูโุดููุฏ
   - CSS ุชููุฏ ูโุดูุฏ

3. README.md ู CONTRIBUTING.md

+ tests/test_doctor.py
```

#### ฺุช ด: ูุณุชูุฏุณุงุฒ ููุง

```
[Prompt]
1. docs/README.md โ ูุณุชูุฏ ุงุตู:
   - ูุตุจ
   - ุดุฑูุน ุณุฑุน
   - ูุซุงูโูุง
   - ุชูุธูุงุช
   - ูุฑูุชโูุง ูพุดุชุจุงูโุดุฏู

2. docs/PERSIAN_GUIDE.md โ ุฑุงูููุง ูุงุฑุณ:
   - ูฺฉุงุช ZWNJ
   - ุชูุธูุงุช RTL
   - ูููุชโูุง
   - ุชุงูพูฺฏุฑุงู

3. docs/CONVERSION_RULES.md โ ููุงุนุฏ ุชุจุฏู:
   - ุฌุฏูู ูฺฏุงุดุช ูุฑ ูุฑูุช
   - ูุญุฏูุฏุชโูุง
   - Troubleshooting

4. docs/COMPONENTS.md โ ูุณุชูุฏ ฺฉุงููพูููุชโูุง:
   - ูุฑ ฺฉุงููพูููุช: props, ูุซุงู, screenshot
```

---

## ุฌุฏูู ุฎูุงุตู: ูุงูโูุงุ ฺุชโูุงุ ู ุงูููุช

```
ูุงู                                    โ ุงุณูพุฑูุช โ ฺุช โ ุงูููุช โ ูุงุจุณุชฺฏ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฟโโโโโโโโโโฟโโโโโฟโโโโโโโโโฟโโโโโโโโ
pyproject.toml                          โ  S01    โ 1  โ  P0    โ โ
models/metadata.py                      โ  S01    โ 2  โ  P0    โ โ
models/scan_report.py                   โ  S01    โ 2  โ  P0    โ โ
models/conversion_result.py             โ  S01    โ 2  โ  P0    โ โ
config/schema.py + loader.py            โ  S01    โ 3  โ  P0    โ models
cli/__main__.py + commands (skeleton)   โ  S01    โ 4  โ  P0    โ config
converters/base.py                      โ  S01    โ 5  โ  P0    โ models
processors/base.py                      โ  S01    โ 5  โ  P0    โ models
utils/logger.py + file_utils.py         โ  S01    โ 6  โ  P0    โ โ
utils/text_utils.py                     โ  S01    โ 6  โ  P0    โ โ
exceptions.py                           โ  S01    โ 1  โ  P0    โ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฟโโโโโโโโโโฟโโโโโฟโโโโโโโโโฟโโโโโโโโ
scanner/file_detector.py                โ  S02    โ 1  โ  P0    โ utils
scanner/structure_analyzer.py           โ  S02    โ 2  โ  P0    โ file_detector
scanner/archive_handler.py              โ  S02    โ 3  โ  P1    โ utils
scanner/scanner.py                      โ  S02    โ 4  โ  P0    โ all scanner
cli/commands/scan.py (complete)         โ  S02    โ 4  โ  P0    โ scanner
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฟโโโโโโโโโโฟโโโโโฟโโโโโโโโโฟโโโโโโโโ
persian/zwnj_handler.py                 โ  S03    โ 1  โ  P0    โ โ
persian/bidi_handler.py                 โ  S03    โ 2  โ  P0    โ โ
persian/typography.py                   โ  S03    โ 3  โ  P0    โ โ
processors/rtl_processor.py             โ  S03    โ 4  โ  P0    โ persian/*
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฟโโโโโโโโโโฟโโโโโฟโโโโโโโโโฟโโโโโโโโ
processors/math_processor.py            โ  S04    โ 1  โ  P0    โ base
processors/code_processor.py            โ  S04    โ 2  โ  P0    โ base
processors/link_processor.py            โ  S04    โ 3  โ  P0    โ base
processors/bibliography_processor.py    โ  S04    โ 4  โ  P1    โ link
processors/footnote_processor.py        โ  S04    โ 4  โ  P0    โ link
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฟโโโโโโโโโโฟโโโโโฟโโโโโโโโโฟโโโโโโโโ
processors/table_processor.py           โ  S05    โ 1  โ  P0    โ base
processors/image_processor.py           โ  S05    โ 2  โ  P0    โ base
processors/diagram_processor.py         โ  S05    โ 3  โ  P1    โ base
processors/admonition_processor.py      โ  S05    โ 4  โ  P0    โ base
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฟโโโโโโโโโโฟโโโโโฟโโโโโโโโโฟโโโโโโโโ
converters/md_to_mdx.py                 โ  S06    โ 1  โ  P0    โ processors
converters/jsx_utils.py                 โ  S06    โ 2  โ  P0    โ โ
test_e2e_markdown.py                    โ  S06    โ 3  โ  P0    โ md_to_mdx
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฟโโโโโโโโโโฟโโโโโฟโโโโโโโโโฟโโโโโโโโ
converters/html_to_mdx.py              โ  S07    โ 1  โ  P0    โ processors
converters/html_elements.py            โ  S07    โ 2  โ  P1    โ html_to_mdx
test_e2e_html.py                       โ  S07    โ 3  โ  P0    โ html_to_mdx
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฟโโโโโโโโโโฟโโโโโฟโโโโโโโโโฟโโโโโโโโ
converters/latex_parser.py              โ  S08    โ 1  โ  P0    โ โ
converters/latex_to_mdx.py (structure)  โ  S08    โ 2  โ  P0    โ parser
converters/latex_to_mdx.py (envs)      โ  S08    โ 3  โ  P0    โ structure
converters/latex_metadata.py            โ  S08    โ 4  โ  P0    โ parser
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฟโโโโโโโโโโฟโโโโโฟโโโโโโโโโฟโโโโโโโโ
converters/latex_book_converter.py      โ  S09    โ 1  โ  P1    โ latex_to_mdx
converters/latex_cleaner.py             โ  S09    โ 2  โ  P0    โ โ
processors/tikz_compiler.py             โ  S09    โ 3  โ  P1    โ โ
test_e2e_latex.py                       โ  S09    โ 4  โ  P0    โ all latex
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฟโโโโโโโโโโฟโโโโโฟโโโโโโโโโฟโโโโโโโโ
quality/* (6 files)                     โ  S10    โ 1  โ  P0    โ models
metadata/extractor.py                   โ  S10    โ 2  โ  P0    โ models
metadata/slug_generator.py              โ  S10    โ 2  โ  P0    โ persian
metadata/validator.py                   โ  S10    โ 2  โ  P0    โ models
ai/metadata_ai.py                       โ  S10    โ 2  โ  P2    โ config
quality/preflight.py                    โ  S10    โ 3  โ  P0    โ quality
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฟโโโโโโโโโโฟโโโโโฟโโโโโโโโโฟโโโโโโโโ
deployer/file_organizer.py              โ  S11    โ 1  โ  P0    โ models
deployer/asset_manager.py               โ  S11    โ 1  โ  P0    โ image_proc
deployer/deployer.py                    โ  S11    โ 1  โ  P0    โ organizer
reports/central_log.py                  โ  S11    โ 2  โ  P0    โ models
reports/report_engine.py                โ  S11    โ 2  โ  P1    โ central_log
cli/commands (deploy,report,run)        โ  S11    โ 3  โ  P0    โ deployer
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฟโโโโโโโโโโฟโโโโโฟโโโโโโโโโฟโโโโโโโโ
core/pipeline.py                        โ  S12    โ 1  โ  P0    โ ALL
test_e2e_full.py                        โ  S12    โ 2  โ  P0    โ pipeline
cli/commands/doctor.py (complete)       โ  S12    โ 3  โ  P1    โ โ
cli/commands/init_components.py         โ  S12    โ 3  โ  P1    โ templates
docs/*                                  โ  S12    โ 4  โ  P1    โ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฟโโโโโโโโโโฟโโโโโฟโโโโโโโโโฟโโโโโโโโ
ูุฌููุน ูุงูโูุง: ~55                     โ ฑฒ ุงุณูพุฑูุช โ ~60 ฺุช โ       โ
```

---

## ุงูฺฏู ูุฑ ฺุช ุจุง LLM (Template)

ูุฑ ฺุช ุงุฒ ุงู ุณุงุฎุชุงุฑ ุซุงุจุช ูพุฑู ฺฉูุฏ:

### ูุงูุจ ูพุงู ุงูู ูุฑ ฺุช

```markdown
# [System Prompt ุซุงุจุช โ ููุงู ุจุฎุด ุจุงูุง]

---

## Context: [ูุงู ูุงฺูู]

### ูุงูโูุง ฺฉู ูุจูุงู ุณุงุฎุชูโุงู (interface ูุง):
```python
# ุฎูุงุตู interface ูุงูโูุง ูุงุจุณุชู
# ูุซุงู:
class BaseConverter(ABC):
    @abstractmethod
    def detect(self, path: str) -> bool: ...
    @abstractmethod
    def convert(self, path: str, config: AppConfig) -> ConversionResult: ...

class DocumentMetadata(BaseModel):
    title: str
    slug: str
    lang: Literal["fa", "en", "fa-en"]
    dir: Literal["rtl", "ltr"] = "rtl"
    # ... (ุฎูุงุตู ููุฏูุง)
```

### ูุงูโูุง ฺฉู ุงูุงู ุจุงุฏ ุจุณุงุฒู:
1. `formatforge/core/converters/md_to_mdx.py`
2. `tests/test_md_to_mdx.py`

### ูุดุฎุตุงุช ุฏูู:
[ุจุฎุด ูุฑุจูุทู ุงุฒ ูพุฑุงููพุช ุงุตู โ ฺฉูพโุดุฏู]

### ููููู ูุฑูุฏ/ุฎุฑูุฌ:
```
ูุฑูุฏ: ```mermaid\nflowchart TD\n  A-->B\n```
ุฎุฑูุฌ: <MermaidDiagram chart={`flowchart TD\n  A-->B`} />
```

### ูุทูุงู:
1. ฺฉุฏ ฺฉุงูู ูุงู(ูุง) ุฑุง ุจููุณ
2. type hints ฺฉุงูู
3. docstring ูุงุฑุณ+ุงูฺฏูุณ
4. error handling
5. ุชุณุชโูุง ูุงุญุฏ (pytest) ุจุง ุญุฏุงูู ต ููุฑุฏ
6. ุชูุถุญ ุชุตููุงุช ุทุฑุงุญ (ุงฺฏุฑ ฺูุฏ ฺฏุฒูู ุจูุฏ)
```

### ูุงูุจ ูพุงูโูุง ุงุฏุงูู ุฏุฑ ููุงู ฺุช

```markdown
ุฎูุจ ุจูุฏ. ูุทูุงู:
1. [ูุชุฏ X] ุฑุง ุงุถุงูู ฺฉู
2. ุชุณุช ุจุฑุง [ุณูุงุฑู Y] ุจููุณ
3. [ุจุงฺฏ Z] ุฑุง ุงุตูุงุญ ฺฉู
```

---

## ูฺฉุงุช ุนูู ูุฏุฑุช ฺุชโูุง

### โ ุจุงุฏูุง

```
1. ูุฑ ฺุช = ฺฉ ูุงฺูู ูุดุฎุต (ฑ-ฒ ูุงู)
2. System Prompt ุซุงุจุช ุฏุฑ ุงุจุชุฏุง ูุฑ ฺุช
3. Interface ูุงูโูุง ูุงุจุณุชู ุฑุง ฺฉูพ ฺฉูุฏ (ูู ฺฉู ูุงู)
4. ููููู ูุฑูุฏ/ุฎุฑูุฌ ูุงูุน ุจุฏูุฏ
5. ุจูุงูุงุตูู ฺฉุฏ ุฑุง ุชุณุช ฺฉูุฏ ูุจู ุงุฒ ุฑูุชู ุจู ฺุช ุจุนุฏ
6. ุงฺฏุฑ ุฎุฑูุฌ ูุงูุต ุจูุฏ: "ุงุฏุงูู ุจุฏู" (ูู ุดุฑูุน ูุฌุฏุฏ)
7. ูุชุงุฌ ูุฑ ฺุช ุฑุง ุฏุฑ ฺฉ ูุงู CHANGELOG.md ุซุจุช ฺฉูุฏ
8. ูุฑ ฺุช ุฑุง ุจุง "ุชุณุชโูุง ุฑุง ุงุฌุฑุง ฺฉุฑุฏูุ ด/ต ูพุงุณ ุดุฏ. ุชุณุช ณ ุฎุทุง X ุฏุงุฑุฏ."
   ุดุฑูุน ฺฉูุฏ (ุฏุฑ ุตูุฑุช ุฑูุน ุจุงฺฏ)
```

### โ ูุจุงุฏูุง

```
1. ฺฉู ูพุฑุงููพุช ณฐK ุชูฺฉู ุฑุง ฺฉุฌุง ุงุฑุณุงู ูฺฉูุฏ
2. ุจุด ุงุฒ ฒ ูุงู ุฏุฑ ฺฉ ฺุช ุฏุฑุฎูุงุณุช ูฺฉูุฏ
3. ุจุฏูู ุชุณุชุ ุจู ูุงฺูู ุจุนุฏ ูุฑูุฏ
4. ฺฉุฏ ูุจู ุฑุง ูุฌุฏุฏ ุชููุฏ ูฺฉูุฏ โ ููุท import ฺฉูุฏ
5. ุฏุฑ ฺฉ ฺุชุ context ูุงฺูู ุฏฺฏุฑ ุฑุง ูุงุฑุฏ ูฺฉูุฏ
```

### ๐ ูุฑูุช ุซุจุช ูพุดุฑูุช

```yaml
# progress.yaml โ ุจุนุฏ ุงุฒ ูุฑ ฺุช ุจุฑูุฒุฑุณุงู ุดูุฏ

sprint: S06
chat: 2
date: "2025-07-15"

completed:
  - file: "converters/md_to_mdx.py"
    status: "done"
    tests: "5/5 passed"
    notes: "Mermaid conversion OK, callouts OK"
  
  - file: "converters/jsx_utils.py"
    status: "done"
    tests: "8/8 passed"

in_progress:
  - file: "test_e2e_markdown.py"
    status: "partial"
    blockers: "Mermaid rendering needs mermaid-cli installed"

next_chat:
  sprint: S06
  chat: 3
  target: "test_e2e_markdown.py completion"
  context_needed:
    - "md_to_mdx.py interface"
    - "sample-mermaid.md (first 50 lines)"
```

---

## ูููุฏุงุฑ ูุงุจุณุชฺฏ ุณุงุฎุช (Build Order)

```
S01 โโโ models + config + CLI skeleton + base classes + utils
  โ
  โโโ S02 โโโ scanner (file_detector โ structure โ archive โ scanner)
  โ
  โโโ S03 โโโ persian (zwnj โ bidi โ typography โ rtl_processor)
  โ     โ
  โ     โโโโ
  โ        โ
  โโโ S04 โโคโโ processors/base (math โ code โ link โ footnote โ bibliography)
  โ        โ
  โ     โโโโ
  โ     โ
  โโโ S05 โโโ processors/advanced (table โ image โ diagram โ admonition)
  โ     โ
  โ     โโโโโโโโโโโโโโโโโโโโโโโ
  โ     โ                     โ
  โโโ S06 โโโ MDโMDX          โ
  โ     โ                     โ
  โโโ S07 โโโ HTMLโMDX        โ
  โ     โ                     โ
  โโโ S08 โโโ LaTeXโMDX (base)โ
  โ     โ                     โ
  โโโ S09 โโโ LaTeXโMDX (adv) โ
  โ     โ                     โ
  โ     โโโโโโโโโโโโโโโโโโโโโโโ
  โ              โ
  โโโ S10 โโโ quality + metadata + preflight
  โ              โ
  โโโ S11 โโโ deployer + reports + CLI commands
  โ              โ
  โโโ S12 โโโ pipeline + E2E + doctor + docs
```

---

## ููุทูโูุง ุจุฑุฑุณ (Checkpoints)

```
ุจุนุฏ ุงุฒ S03: โ ูุงฺูู ูุงุฑุณ ฺฉุงูู โ ุชุณุช ูุณุชูู ZWNJ/bidi
ุจุนุฏ ุงุฒ S05: โ ุชูุงู ูพุฑุฏุงุฒุดฺฏุฑูุง โ ุชุณุช ูุณุชูู ูุฑ ฺฉุฏุงู
ุจุนุฏ ุงุฒ S06: โ ุงููู ุชุจุฏูโฺฏุฑ ฺฉุงูู (MDโMDX) โ E2E ุชุณุช
ุจุนุฏ ุงุฒ S09: โ ุณู ุชุจุฏูโฺฏุฑ ุงุตู (MD+HTML+LaTeX) โ E2E ุชุณุช
ุจุนุฏ ุงุฒ S12: โ ูุญุตูู ฺฉุงูู โ Full E2E + Doctor + Deploy
```

---

## ุณุงุฎุชุงุฑ ูุงู ููุง ูพุฑูฺู

```
formatforge/
โ
โโโ pyproject.toml
โโโ Makefile
โโโ README.md
โโโ LICENSE
โ
โโโ config/
โ   โโโ default_config.yaml
โ   โโโ user_config.yaml.example
โ
โโโ formatforge/
โ   โโโ __init__.py
โ   โโโ exceptions.py
โ   โ
โ   โโโ models/
โ   โ   โโโ __init__.py
โ   โ   โโโ metadata.py              # S01-C2
โ   โ   โโโ scan_report.py           # S01-C2
โ   โ   โโโ conversion_result.py     # S01-C2
โ   โ
โ   โโโ config/
โ   โ   โโโ __init__.py
โ   โ   โโโ schema.py                # S01-C3
โ   โ   โโโ loader.py                # S01-C3
โ   โ
โ   โโโ utils/
โ   โ   โโโ __init__.py
โ   โ   โโโ logger.py                # S01-C6
โ   โ   โโโ file_utils.py            # S01-C6
โ   โ   โโโ text_utils.py            # S01-C6
โ   โ
โ   โโโ cli/
โ   โ   โโโ __init__.py
โ   โ   โโโ __main__.py              # S01-C4
โ   โ   โโโ interactive.py           # S11-C3
โ   โ   โโโ commands/
โ   โ       โโโ __init__.py
โ   โ       โโโ scan.py              # S02-C4
โ   โ       โโโ convert.py           # S11-C3
โ   โ       โโโ test_cmd.py          # S11-C3
โ   โ       โโโ deploy.py            # S11-C3
โ   โ       โโโ report.py            # S11-C3
โ   โ       โโโ run.py               # S11-C3
โ   โ       โโโ doctor.py            # S12-C3
โ   โ       โโโ init_components.py   # S12-C3
โ   โ
โ   โโโ core/
โ   โ   โโโ __init__.py
โ   โ   โโโ pipeline.py              # S12-C1
โ   โ   โ
โ   โ   โโโ scanner/
โ   โ   โ   โโโ __init__.py
โ   โ   โ   โโโ file_detector.py     # S02-C1
โ   โ   โ   โโโ structure_analyzer.py# S02-C2
โ   โ   โ   โโโ archive_handler.py   # S02-C3
โ   โ   โ   โโโ scanner.py           # S02-C4
โ   โ   โ
โ   โ   โโโ metadata/
โ   โ   โ   โโโ __init__.py
โ   โ   โ   โโโ extractor.py         # S10-C2
โ   โ   โ   โโโ slug_generator.py    # S10-C2
โ   โ   โ   โโโ validator.py         # S10-C2
โ   โ   โ
โ   โ   โโโ converters/
โ   โ   โ   โโโ __init__.py
โ   โ   โ   โโโ base.py              # S01-C5
โ   โ   โ   โโโ jsx_utils.py         # S06-C2
โ   โ   โ   โโโ md_to_mdx.py         # S06-C1
โ   โ   โ   โโโ html_to_mdx.py       # S07-C1
โ   โ   โ   โโโ html_elements.py     # S07-C2
โ   โ   โ   โโโ latex_parser.py      # S08-C1
โ   โ   โ   โโโ latex_to_mdx.py      # S08-C2,C3
โ   โ   โ   โโโ latex_metadata.py    # S08-C4
โ   โ   โ   โโโ latex_book_converter.py # S09-C1
โ   โ   โ   โโโ latex_cleaner.py     # S09-C2
โ   โ   โ
โ   โ   โโโ processors/
โ   โ   โ   โโโ __init__.py
โ   โ   โ   โโโ base.py              # S01-C5
โ   โ   โ   โโโ math_processor.py    # S04-C1
โ   โ   โ   โโโ code_processor.py    # S04-C2
โ   โ   โ   โโโ link_processor.py    # S04-C3
โ   โ   โ   โโโ footnote_processor.py# S04-C4
โ   โ   โ   โโโ bibliography_processor.py # S04-C4
โ   โ   โ   โโโ table_processor.py   # S05-C1
โ   โ   โ   โโโ image_processor.py   # S05-C2
โ   โ   โ   โโโ diagram_processor.py # S05-C3
โ   โ   โ   โโโ tikz_compiler.py     # S09-C3
โ   โ   โ   โโโ admonition_processor.py # S05-C4
โ   โ   โ   โโโ rtl_processor.py     # S03-C4
โ   โ   โ
โ   โ   โโโ persian/
โ   โ   โ   โโโ __init__.py
โ   โ   โ   โโโ zwnj_handler.py      # S03-C1
โ   โ   โ   โโโ bidi_handler.py      # S03-C2
โ   โ   โ   โโโ typography.py        # S03-C3
โ   โ   โ
โ   โ   โโโ quality/
โ   โ   โ   โโโ __init__.py
โ   โ   โ   โโโ structural_test.py   # S10-C1
โ   โ   โ   โโโ content_test.py      # S10-C1
โ   โ   โ   โโโ math_test.py         # S10-C1
โ   โ   โ   โโโ rtl_test.py          # S10-C1
โ   โ   โ   โโโ link_test.py         # S10-C1
โ   โ   โ   โโโ quality_score.py     # S10-C1
โ   โ   โ   โโโ preflight.py         # S10-C3
โ   โ   โ
โ   โ   โโโ deployer/
โ   โ       โโโ __init__.py
โ   โ       โโโ file_organizer.py    # S11-C1
โ   โ       โโโ asset_manager.py     # S11-C1
โ   โ       โโโ deployer.py          # S11-C1
โ   โ
โ   โโโ ai/
โ   โ   โโโ __init__.py
โ   โ   โโโ provider.py              # S10-C2
โ   โ   โโโ metadata_ai.py           # S10-C2
โ   โ
โ   โโโ reports/
โ   โ   โโโ __init__.py
โ   โ   โโโ central_log.py           # S11-C2
โ   โ   โโโ report_engine.py         # S11-C2
โ   โ
โ   โโโ templates/
โ       โโโ components/              # ูุงูุจ ฺฉุงููพูููุชโูุง
โ       โ   โโโ next/
โ       โ   โ   โโโ Theorem.jsx
โ       โ   โ   โโโ Definition.jsx
โ       โ   โ   โโโ Proof.jsx
โ       โ   โ   โโโ Admonition.jsx
โ       โ   โ   โโโ Figure.jsx
โ       โ   โ   โโโ MermaidDiagram.jsx
โ       โ   โ   โโโ Citation.jsx
โ       โ   โ   โโโ Bibliography.jsx
โ       โ   โ   โโโ CrossRef.jsx
โ       โ   โ   โโโ BilingualBlock.jsx
โ       โ   โ   โโโ styles/
โ       โ   โ       โโโ mdx-components.css
โ       โ   โ       โโโ rtl-overrides.css
โ       โ   โโโ astro/
โ       โ       โโโ ... (ูุดุงุจู)
โ       โโโ mdx/
โ           โโโ article.mdx.j2       # ูุงูุจ ููุงูู
โ           โโโ book_chapter.mdx.j2  # ูุงูุจ ูุตู ฺฉุชุงุจ
โ
โโโ tests/
โ   โโโ conftest.py
โ   โโโ test_files/                   # ูุงูโูุง ููููู ุชุณุช
โ   โ   โโโ sample-book.tex
โ   โ   โโโ sample-mermaid.md
โ   โ   โโโ sample-page.html
โ   โ   โโโ sample-page.rst
โ   โ   โโโ sample-page.adoc
โ   โ   โโโ figures/
โ   โ       โโโ placeholder.png
โ   โ
โ   โโโ test_models.py               # S01
โ   โโโ test_config.py               # S01
โ   โโโ test_file_utils.py           # S01
โ   โโโ test_text_utils.py           # S01
โ   โโโ test_file_detector.py        # S02
โ   โโโ test_structure_analyzer.py   # S02
โ   โโโ test_archive_handler.py      # S02
โ   โโโ test_scanner.py              # S02
โ   โโโ test_zwnj_handler.py         # S03
โ   โโโ test_bidi_handler.py         # S03
โ   โโโ test_typography.py           # S03
โ   โโโ test_rtl_processor.py        # S03
โ   โโโ test_math_processor.py       # S04
โ   โโโ test_code_processor.py       # S04
โ   โโโ test_link_processor.py       # S04
โ   โโโ test_footnote_processor.py   # S04
โ   โโโ test_bibliography_processor.py # S04
โ   โโโ test_table_processor.py      # S05
โ   โโโ test_image_processor.py      # S05
โ   โโโ test_diagram_processor.py    # S05
โ   โโโ test_admonition_processor.py # S05
โ   โโโ test_md_to_mdx.py           # S06
โ   โโโ test_jsx_utils.py           # S06
โ   โโโ test_html_to_mdx.py         # S07
โ   โโโ test_html_elements.py       # S07
โ   โโโ test_latex_parser.py        # S08
โ   โโโ test_latex_structure.py     # S08
โ   โโโ test_latex_environments.py  # S08
โ   โโโ test_latex_metadata.py      # S08
โ   โโโ test_latex_book.py          # S09
โ   โโโ test_latex_cleaner.py       # S09
โ   โโโ test_tikz_compiler.py       # S09
โ   โโโ test_quality.py             # S10
โ   โโโ test_metadata.py            # S10
โ   โโโ test_preflight.py           # S10
โ   โโโ test_deployer.py            # S11
โ   โโโ test_central_log.py         # S11
โ   โโโ test_pipeline.py            # S12
โ   โโโ test_doctor.py              # S12
โ   โ
โ   โโโ e2e/                         # ุชุณุชโูุง ุณุฑุชุงุณุฑ
โ       โโโ test_e2e_markdown.py     # S06
โ       โโโ test_e2e_html.py         # S07
โ       โโโ test_e2e_latex.py        # S09
โ       โโโ test_e2e_full.py         # S12
โ
โโโ docs/
    โโโ README.md
    โโโ PERSIAN_GUIDE.md
    โโโ CONVERSION_RULES.md
    โโโ COMPONENTS.md
    โโโ CONTRIBUTING.md
```

---

## ูุฑูุงูโูุง ุงุฌุฑุง ุงุณูพุฑูุชโูุง

```bash
# === ุดุฑูุน ูพุฑูฺู ===
mkdir formatforge && cd formatforge
git init
# ุณุงุฎุช ุณุงุฎุชุงุฑ ุงููู (S01-C1)

# === ูุฑ ุงุณูพุฑูุช ===
# 1. ุณุงุฎุช branch
git checkout -b sprint/S06-md-converter

# 2. ูพุงุฏูโุณุงุฒ (ุจุง LLM)
# ... ฺุชโูุง ุทุจู ุจุฑูุงูู ...

# 3. ุชุณุช
python -m pytest tests/ -v --tb=short

# 4. ูุฑุฌ
git checkout main
git merge sprint/S06-md-converter

# === ุจุฑุฑุณ ุณูุงูุช ===
# ุจุนุฏ ุงุฒ ูุฑ ุงุณูพุฑูุช:
python -m formatforge doctor
python -m pytest tests/ -v --cov=formatforge --cov-report=term-missing

# === ุชุณุช E2E ===
# ุจุนุฏ ุงุฒ S06, S07, S09, S12:
python -m pytest tests/e2e/ -v
```

---

## ุฎูุงุตู ููุง

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ           FormatForge โ ูุฏู ุงุฌุฑุง ููุง               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ
โ                                                          โ
โ  ๐ฆ ูุญุตูู: ุงุจุฒุงุฑ CLI ุชุจุฏู ุงุณูุงุฏ ุจู MDX ูุงุฑุณ          โ
โ  ๐ฏ ุงูููุช ูุงุฒ ฑ: LaTeX + Markdown + HTML              โ
โ                                                          โ
โ  ๐ ูุนูุงุฑ: ถ ูุฑุญูู (Pipeline)                          โ
โ     Scan โ Metadata โ Preflight โ Convert โ Test โ Deployโ
โ                                                          โ
โ  ๐ ุจุฑูุงูู: ฑฒ ุงุณูพุฑูุช ร ณ-ต ุฑูุฒ = ~ถ ููุชู            โ
โ  ๐ฌ ฺุชโูุง LLM: ~ถฐ ฺุช (ูุฑ ฺฉุฏุงู ~10K ุชูฺฉู)            โ
โ  ๐ ูุงูโูุง: ~ตต ูุงู Python + ~ตต ูุงู ุชุณุช           โ
โ                                                          โ
โ  ๐ ูฺฉุชู ฺฉูุฏ: System Prompt ุซุงุจุช ฒK ุชูฺฉู              โ
โ     + Context ูุงฺูู ฑ.ตK + Prompt ฐ.ตK = ~4K ูุฑูุฏ     โ
โ     โ ูุถุง ฺฉุงู ุจุฑุง ธK+ ุฎุฑูุฌ                         โ
โ                                                          โ
โ  โ Checkpoints:                                         โ
โ     S03: ูุงฺูู ูุงุฑุณ ฺฉุงูู                               โ
โ     S06: ุงููู ุชุจุฏูโฺฏุฑ (MDโMDX) โ ูุงุจู ุงุณุชูุงุฏู        โ
โ     S09: ุณู ุชุจุฏูโฺฏุฑ ุงุตู โ ูุญุตูู MVP                  โ
โ     S12: ูุญุตูู ฺฉุงูู                                      โ
โ                                                          โ
โ  โ ูุงููู ุทูุง:                                         โ
โ     ยซููโูุงุตูู ูุฑฺฏุฒ ุญุฐู ูุดูุฏยป                           โ
โ     ุดูุงุฑุด ZWNJ ูุจู/ุจุนุฏ ูุฑ ุชุจุฏู = ุจุฑุงุจุฑ                โ
โ                                                          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**ูพุฑุงููพุช ู ูุฏู ุงุฌุฑุง ฺฉุงูู ุดุฏ.** ุขูุงุฏู ุดุฑูุน ุงุณูพุฑูุช S01 ูุณุชุฏ โ ุงููู ฺุช: ุณุงุฎุชุงุฑ ูพุฑูฺู ู `pyproject.toml`. ๐

### Overlap Report

*1 overlap(s) detected:*

- **Overlap 1:** 100 chars, similarity 99%, Flagged

---

## Conversation 4
*(2 segments merged)*
*Model: claude-opus-4-6*

### Request

ูุทูุง ุดุฑูุน ฺฉู. ุงฺฏุฑ ููฺฉู ุงุณุช ุณุงุฎุชู ูุงูโูุง ู ูพูุดูโูุง ุจุง powershell  ุง ูุนุงุฏู ุขู ุจุงุดุฏ ฺฉู ุฎูุฏ ุจู ุฎูุฏ ุชุฑ ุจุงุดุฏ. 
ููููู

### Response

# ุงุณูพุฑูุช S01 โ ฺุช ฑ: ุณุงุฎุชุงุฑ ูพุฑูฺู ู ุฒุฑุณุงุฎุช

## ุงุณฺฉุฑูพุช PowerShell: ุณุงุฎุช ฺฉุงูู ุณุงุฎุชุงุฑ ูพุฑูฺู

```powershell
# ============================================================
#  S01-C1: FormatForge โ ุณุงุฎุช ุณุงุฎุชุงุฑ ูพุฑูฺู
#  ุงุฌุฑุง: .\init-project.ps1 [-ProjectRoot "C:\Projects\formatforge"]
# ============================================================

param(
    [string]$ProjectRoot = ".\formatforge"
)

$ErrorActionPreference = "Stop"
$Utf8Bom = [System.Text.UTF8Encoding]::new($true)

# --- ุฑูฺฏโูุง ---
function Write-Step  { param($m) Write-Host "  ๐ $m" -ForegroundColor Cyan }
function Write-File  { param($m) Write-Host "    ๐ $m" -ForegroundColor Green }
function Write-Title { param($m) Write-Host "`n$m" -ForegroundColor Yellow }

# --- ุชุงุจุน ุฐุฎุฑู ูุงู ---
function Save-File {
    param(
        [string]$RelPath,
        [string]$Content
    )
    $fullPath = Join-Path $ProjectRoot $RelPath
    $dir = Split-Path $fullPath -Parent
    if (-not (Test-Path $dir)) {
        New-Item -ItemType Directory -Force -Path $dir | Out-Null
    }
    [System.IO.File]::WriteAllText($fullPath, $Content, $Utf8Bom)
    Write-File $RelPath
}

# ============================================================
Write-Host @"

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ๐ง FormatForge โ S01-C1: ุณุงุฎุช ุณุงุฎุชุงุฑ ูพุฑูฺู  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

"@ -ForegroundColor Magenta

Write-Title "ฑ. ุณุงุฎุช ุณุงุฎุชุงุฑ ูพูุดูโูุง..."

# --- ุณุงุฎุชุงุฑ ูพูุดูโูุง ---
$directories = @(
    # Root
    "config"
    "docs"
    # Main package
    "formatforge"
    "formatforge/models"
    "formatforge/config"
    "formatforge/utils"
    "formatforge/cli"
    "formatforge/cli/commands"
    "formatforge/core"
    "formatforge/core/scanner"
    "formatforge/core/metadata"
    "formatforge/core/converters"
    "formatforge/core/processors"
    "formatforge/core/persian"
    "formatforge/core/quality"
    "formatforge/core/deployer"
    "formatforge/ai"
    "formatforge/reports"
    "formatforge/templates"
    "formatforge/templates/components/next"
    "formatforge/templates/components/next/styles"
    "formatforge/templates/components/astro"
    "formatforge/templates/mdx"
    # Tests
    "tests"
    "tests/test_files"
    "tests/test_files/figures"
    "tests/e2e"
)

foreach ($dir in $directories) {
    $fullDir = Join-Path $ProjectRoot $dir
    New-Item -ItemType Directory -Force -Path $fullDir | Out-Null
    Write-Step $dir
}

# ============================================================
Write-Title "ฒ. ุณุงุฎุช ูุงูโูุง ูพุฑูฺู..."
# ============================================================

# ----------------------------------------------------------
# pyproject.toml
# ----------------------------------------------------------
Save-File "pyproject.toml" @'
[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[project]
name = "formatforge"
version = "0.1.0"
description = "ุงุจุฒุงุฑ ุฌุงูุน ุชุจุฏู ุงุณูุงุฏ ฺูุฏูุฑูุช ุจู MDX โ ุจุง ูพุดุชุจุงู ฺฉุงูู ูุงุฑุณ"
readme = "README.md"
license = { text = "MIT" }
requires-python = ">=3.11"
authors = [
    { name = "Mahdi Salem", email = "ali@example.com" },
]
keywords = ["mdx", "latex", "markdown", "converter", "persian", "rtl"]
classifiers = [
    "Development Status :: 3 - Alpha",
    "Intended Audience :: Science/Research",
    "License :: OSI Approved :: MIT License",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",
    "Topic :: Text Processing :: Markup :: LaTeX",
    "Topic :: Text Processing :: Markup :: HTML",
    "Topic :: Text Processing :: Markup :: Markdown",
    "Natural Language :: Persian",
]

dependencies = [
    # CLI
    "click>=8.1",
    "rich>=13.7",
    # Data
    "pyyaml>=6.0",
    "pydantic>=2.5",
    "pydantic-settings>=2.1",
    # File detection
    "chardet>=5.2",
    # Conversion
    "beautifulsoup4>=4.12",
    "lxml>=5.1",
    "python-docx>=1.1",
    "pymupdf>=1.23",
    "pylatexenc>=2.10",
    # Image
    "pillow>=10.2",
    # Templates
    "jinja2>=3.1",
    # Logging
    "loguru>=0.7",
]

[project.optional-dependencies]
ai = [
    "openai>=1.35",
    "anthropic>=0.30",
]
visual = [
    "playwright>=1.44",
]
dev = [
    "pytest>=8.0",
    "pytest-cov>=5.0",
    "pytest-asyncio>=0.23",
    "ruff>=0.4",
    "mypy>=1.10",
    "pre-commit>=3.7",
]
all = ["formatforge[ai,visual,dev]"]

[project.scripts]
formatforge = "formatforge.cli.__main__:cli"

[tool.hatch.build.targets.wheel]
packages = ["formatforge"]

[tool.pytest.ini_options]
testpaths = ["tests"]
addopts = "-v --tb=short"
markers = [
    "slow: marks tests as slow",
    "e2e: end-to-end tests",
    "requires_xelatex: requires XeLaTeX installed",
    "requires_pandoc: requires Pandoc installed",
    "requires_node: requires Node.js installed",
]

[tool.ruff]
target-version = "py311"
line-length = 100

[tool.ruff.lint]
select = ["E", "F", "W", "I", "N", "UP", "B", "SIM"]

[tool.mypy]
python_version = "3.11"
warn_return_any = true
warn_unused_configs = true
disallow_untyped_defs = true
'@

# ----------------------------------------------------------
# .gitignore
# ----------------------------------------------------------
Save-File ".gitignore" @'
# Python
__pycache__/
*.py[cod]
*$py.class
*.egg-info/
dist/
build/
.eggs/
*.egg

# Virtual environment
.venv/
venv/
env/

# IDE
.vscode/
.idea/
*.swp
*.swo

# OS
.DS_Store
Thumbs.db
desktop.ini

# LaTeX
*.aux
*.log
*.synctex*
*.fls
*.fdb_latexmk
*.bbl
*.blg
*.bcf
*.run.xml
*.out
*.toc
*.lof
*.lot

# FormatForge
config/user_config.yaml
.formatforge/
*.temp/

# Test output
tests/output/
tests/temp/

# Coverage
htmlcov/
.coverage
coverage.xml
'@

# ----------------------------------------------------------
# Makefile
# ----------------------------------------------------------
Save-File "Makefile" @'
.PHONY: install dev test lint format clean doctor run

install:
	pip install -e .

dev:
	pip install -e ".[all]"

test:
	python -m pytest tests/ -v --tb=short

test-cov:
	python -m pytest tests/ -v --cov=formatforge --cov-report=term-missing

test-e2e:
	python -m pytest tests/e2e/ -v -m e2e

lint:
	ruff check formatforge/ tests/
	mypy formatforge/

format:
	ruff format formatforge/ tests/
	ruff check --fix formatforge/ tests/

clean:
	rm -rf build/ dist/ *.egg-info/ __pycache__/ .pytest_cache/ htmlcov/ .coverage
	find . -type d -name __pycache__ -exec rm -rf {} +

doctor:
	python -m formatforge doctor

run:
	python -m formatforge run
'@

# ----------------------------------------------------------
# formatforge/__init__.py
# ----------------------------------------------------------
Save-File "formatforge/__init__.py" @'
"""
FormatForge โ ุงุจุฒุงุฑ ุฌุงูุน ุชุจุฏู ุงุณูุงุฏ ฺูุฏูุฑูุช ุจู MDX
Comprehensive multi-format document converter to MDX with full Persian/RTL support.
"""

__version__ = "0.1.0"
__author__ = "Mahdi Salem"
'@

# ----------------------------------------------------------
# formatforge/exceptions.py
# ----------------------------------------------------------
Save-File "formatforge/exceptions.py" @'
"""
ุงุณุชุซูุงูุง ุณูุงุฑุด FormatForge
Custom exceptions for FormatForge.
"""


class FormatForgeError(Exception):
    """ุฎุทุง ูพุงู FormatForge โ Base error for all FormatForge exceptions."""
    pass


# โโโโโโโโโโโโโโโโ ุงุณฺฉู / Scanner โโโโโโโโโโโโโโโโ

class ScanError(FormatForgeError):
    """ุฎุทุง ุฏุฑ ูุฑุญูู ุงุณฺฉู โ Error during scanning phase."""
    pass


class UnsupportedFormatError(ScanError):
    """ูุฑูุช ูุงู ูพุดุชุจุงู ููโุดูุฏ โ File format is not supported."""

    def __init__(self, path: str, detected_format: str | None = None):
        self.path = path
        self.detected_format = detected_format
        fmt = f" (detected: {detected_format})" if detected_format else ""
        super().__init__(f"Unsupported file format: {path}{fmt}")


class EncodingError(ScanError):
    """ุฎุทุง encoding ูุงู โ File encoding error."""

    def __init__(self, path: str, encoding: str | None = None, detail: str = ""):
        self.path = path
        self.encoding = encoding
        msg = f"Encoding error in {path}"
        if encoding:
            msg += f" (detected: {encoding})"
        if detail:
            msg += f": {detail}"
        super().__init__(msg)


class FileNotFoundError_(ScanError):
    """ูุงู ุงูุช ูุดุฏ โ File not found (custom to avoid shadowing builtins)."""

    def __init__(self, path: str, context: str = ""):
        self.path = path
        msg = f"File not found: {path}"
        if context:
            msg += f" (referenced in: {context})"
        super().__init__(msg)


class DependencyMissingError(ScanError):
    """ูุงู ูุงุจุณุชู ุงูุช ูุดุฏ โ A dependency file is missing."""

    def __init__(self, missing_path: str, referenced_by: str):
        self.missing_path = missing_path
        self.referenced_by = referenced_by
        super().__init__(
            f"Missing dependency: {missing_path} (referenced by: {referenced_by})"
        )


# โโโโโโโโโโโโโโโโ ูุชุงุฏุชุง / Metadata โโโโโโโโโโโโโโโโ

class MetadataError(FormatForgeError):
    """ุฎุทุง ุฏุฑ ูุฑุญูู ูุชุงุฏุชุง โ Error during metadata phase."""
    pass


class MetadataValidationError(MetadataError):
    """ุงุนุชุจุงุฑุณูุฌ ูุชุงุฏุชุง ูุงูููู ุจูุฏ โ Metadata validation failed."""

    def __init__(self, field: str, message: str):
        self.field = field
        super().__init__(f"Metadata validation failed for '{field}': {message}")


class SlugConflictError(MetadataError):
    """Slug ุชฺฉุฑุงุฑ โ Slug already exists."""

    def __init__(self, slug: str, existing_doc: str):
        self.slug = slug
        self.existing_doc = existing_doc
        super().__init__(f"Slug '{slug}' already used by: {existing_doc}")


# โโโโโโโโโโโโโโโโ ุชุจุฏู / Conversion โโโโโโโโโโโโโโโโ

class ConversionError(FormatForgeError):
    """ุฎุทุง ุฏุฑ ูุฑุญูู ุชุจุฏู โ Error during conversion phase."""

    def __init__(self, message: str, source_file: str = "", line: int | None = None):
        self.source_file = source_file
        self.line = line
        loc = ""
        if source_file:
            loc += f" in {source_file}"
        if line is not None:
            loc += f" at line {line}"
        super().__init__(f"Conversion error{loc}: {message}")


class MathConversionError(ConversionError):
    """ุฎุทุง ุฏุฑ ุชุจุฏู ูุฑููู ุฑุงุถ โ Error converting math formula."""

    def __init__(self, formula: str, message: str, **kwargs):
        self.formula = formula
        super().__init__(f"Math: {message} | Formula: {formula[:80]}...", **kwargs)


class TikZCompilationError(ConversionError):
    """ุฎุทุง ุฏุฑ ฺฉุงููพุงู TikZ โ Error compiling TikZ to SVG."""

    def __init__(self, message: str, tikz_code: str = "", **kwargs):
        self.tikz_code = tikz_code
        super().__init__(f"TikZ compilation failed: {message}", **kwargs)


class TableConversionError(ConversionError):
    """ุฎุทุง ุฏุฑ ุชุจุฏู ุฌุฏูู โ Error converting table."""
    pass


class ImageProcessingError(ConversionError):
    """ุฎุทุง ุฏุฑ ูพุฑุฏุงุฒุด ุชุตูุฑ โ Error processing image."""

    def __init__(self, image_path: str, message: str, **kwargs):
        self.image_path = image_path
        super().__init__(f"Image '{image_path}': {message}", **kwargs)


# โโโโโโโโโโโโโโโโ ูุงุฑุณ / Persian โโโโโโโโโโโโโโโโ

class PersianProcessingError(FormatForgeError):
    """ุฎุทุง ุฏุฑ ูพุฑุฏุงุฒุด ูุชู ูุงุฑุณ โ Error processing Persian text."""
    pass


class ZWNJLossError(PersianProcessingError):
    """ููโูุงุตูู ุงุฒ ุฏุณุช ุฑูุชู โ ZWNJ characters were lost during processing."""

    def __init__(self, before_count: int, after_count: int, lost_positions: list[int] | None = None):
        self.before_count = before_count
        self.after_count = after_count
        self.lost_positions = lost_positions or []
        super().__init__(
            f"ZWNJ loss detected: {before_count} โ {after_count} "
            f"({before_count - after_count} lost)"
        )


# โโโโโโโโโโโโโโโโ ฺฉูุช / Quality โโโโโโโโโโโโโโโโ

class QualityError(FormatForgeError):
    """ุฎุทุง ุฏุฑ ุชุณุช ฺฉูุช โ Error during quality testing."""
    pass


class QualityBelowThresholdError(QualityError):
    """ุงูุชุงุฒ ฺฉูุช ุฒุฑ ุญุฏ ูุฌุงุฒ โ Quality score below threshold."""

    def __init__(self, score: int, threshold: int):
        self.score = score
        self.threshold = threshold
        super().__init__(f"Quality score {score} is below threshold {threshold}")


# โโโโโโโโโโโโโโโโ ุงุณุชูุฑุงุฑ / Deployment โโโโโโโโโโโโโโโโ

class DeploymentError(FormatForgeError):
    """ุฎุทุง ุฏุฑ ูุฑุญูู ุงุณุชูุฑุงุฑ โ Error during deployment phase."""
    pass


# โโโโโโโโโโโโโโโโ AI โโโโโโโโโโโโโโโโ

class AIError(FormatForgeError):
    """ุฎุทุง ุฏุฑ ูุงฺูู AI โ Error in AI module."""
    pass


class AIProviderNotConfiguredError(AIError):
    """ุชูุธูุงุช AI ุงูุฌุงู ูุดุฏู โ AI provider is not configured."""

    def __init__(self, provider: str):
        super().__init__(f"AI provider '{provider}' is not configured. Set API key in config.")


# โโโโโโโโโโโโโโโโ ูพฺฉุฑุจูุฏ / Config โโโโโโโโโโโโโโโโ

class ConfigError(FormatForgeError):
    """ุฎุทุง ุฏุฑ ุชูุธูุงุช โ Error in configuration."""
    pass


# โโโโโโโโโโโโโโโโ ุงุจุฒุงุฑ ุฎุงุฑุฌ / External Tools โโโโโโโโโโโโโโโโ

class ExternalToolError(FormatForgeError):
    """ุงุจุฒุงุฑ ุฎุงุฑุฌ ููุฌูุฏ ูุณุช ุง ุฎุทุง ุฏุงุฏ โ External tool error."""

    def __init__(self, tool: str, message: str, install_hint: str = ""):
        self.tool = tool
        self.install_hint = install_hint
        msg = f"External tool '{tool}': {message}"
        if install_hint:
            msg += f"\n  โ Install: {install_hint}"
        super().__init__(msg)
'@

# ----------------------------------------------------------
# formatforge/cli/__init__.py
# ----------------------------------------------------------
Save-File "formatforge/cli/__init__.py" @'
"""CLI package โ ุฑุงุจุท ุฎุท ูุฑูุงู FormatForge"""
'@

# ----------------------------------------------------------
# formatforge/cli/__main__.py
# ----------------------------------------------------------
Save-File "formatforge/cli/__main__.py" @'
"""
ููุทู ูุฑูุฏ CLI โ FormatForge Command Line Interface.
ุงุฌุฑุง: python -m formatforge [COMMAND]
"""

import click
from rich.console import Console
from rich.panel import Panel

from formatforge import __version__

console = Console()


class AliasedGroup(click.Group):
    """ฺฏุฑูู Click ุจุง ูพุดุชุจุงู ุงุฒ ูุฎูู ุฏุณุชูุฑุงุช"""

    def get_command(self, ctx: click.Context, cmd_name: str) -> click.Command | None:
        # Exact match
        rv = click.Group.get_command(self, ctx, cmd_name)
        if rv is not None:
            return rv
        # Prefix match
        matches = [x for x in self.list_commands(ctx) if x.startswith(cmd_name)]
        if not matches:
            return None
        elif len(matches) == 1:
            return click.Group.get_command(self, ctx, matches[0])
        else:
            ctx.fail(f"Ambiguous command '{cmd_name}'. Could be: {', '.join(sorted(matches))}")
            return None


@click.group(cls=AliasedGroup, invoke_without_command=True)
@click.version_option(__version__, prog_name="FormatForge")
@click.option("--verbose", "-v", is_flag=True, help="ููุงุด ุฌุฒุฆุงุช ุจุดุชุฑ")
@click.option("--config", "-c", type=click.Path(), help="ูุณุฑ ูุงู ุชูุธูุงุช")
@click.pass_context
def cli(ctx: click.Context, verbose: bool, config: str | None) -> None:
    """๐ FormatForge โ ุงุจุฒุงุฑ ุฌุงูุน ุชุจุฏู ุงุณูุงุฏ ุจู MDX

    ุชุจุฏู LaTeX, Markdown, HTML ู ุณุงุฑ ูุฑูุชโูุง ุจู MDX
    ุจุง ูพุดุชุจุงู ฺฉุงูู ุงุฒ ุฒุจุงู ูุงุฑุณ ู ูุญุชูุง ุฏูุฒุจุงูู.
    """
    ctx.ensure_object(dict)
    ctx.obj["verbose"] = verbose
    ctx.obj["config_path"] = config

    if ctx.invoked_subcommand is None:
        _show_welcome()


def _show_welcome() -> None:
    """ููุงุด ูพุงู ุฎูุดโุขูุฏฺฏู"""
    console.print(
        Panel.fit(
            f"[bold blue]FormatForge[/bold blue] v{__version__}\n\n"
            "[dim]ุงุจุฒุงุฑ ุฌุงูุน ุชุจุฏู ุงุณูุงุฏ ฺูุฏูุฑูุช ุจู MDX[/dim]\n"
            "[dim]ุจุง ูพุดุชุจุงู ฺฉุงูู ูุงุฑุณ / RTL / ููโูุงุตูู[/dim]\n\n"
            "ุจุฑุง ุฑุงูููุง: [green]formatforge --help[/green]\n"
            "ุจุฑุฑุณ ุณูุงูุช: [green]formatforge doctor[/green]\n"
            "ุดุฑูุน ุณุฑุน:  [green]formatforge run ./input/[/green]",
            title="๐ FormatForge",
            border_style="blue",
        )
    )


# โโโโโโโโโโโโโโโโ ุฏุณุชูุฑุงุช โโโโโโโโโโโโโโโโ

@cli.command()
@click.argument("input_path", type=click.Path(exists=True))
@click.option("--recursive", "-r", is_flag=True, help="ุงุณฺฉู ุจุงุฒฺฏุดุช ูพูุดูโูุง")
@click.pass_context
def scan(ctx: click.Context, input_path: str, recursive: bool) -> None:
    """๐ ุงุณฺฉู ู ุดูุงุณุง ูุฑูุฏ

    ุจุฑุฑุณ ูุงู(ูุง)ุ ุชุดุฎุต ูุฑูุชุ encodingุ ุณุงุฎุชุงุฑ ู ูุงุจุณุชฺฏโูุง.
    """
    from formatforge.cli.commands.scan import run_scan
    run_scan(input_path, recursive=recursive, verbose=ctx.obj["verbose"])


@cli.command()
@click.argument("input_path", type=click.Path(exists=True))
@click.option("--output", "-o", type=click.Path(), help="ูุณุฑ ุฎุฑูุฌ")
@click.option("--format", "-f", "fmt", type=str, help="ูุฑูุช ูุฑูุฏ (auto-detect)")
@click.option("--quality-min", type=int, default=80, help="ุญุฏุงูู ุงูุชุงุฒ ฺฉูุช")
@click.option("--interactive/--batch", default=True, help="ุญุงูุช ุชุนุงูู/ุฏุณุชูโุง")
@click.option("--auto-fix/--no-auto-fix", default=False, help="ุงุตูุงุญ ุฎูุฏฺฉุงุฑ ูุดฺฉูุงุช")
@click.pass_context
def convert(
    ctx: click.Context,
    input_path: str,
    output: str | None,
    fmt: str | None,
    quality_min: int,
    interactive: bool,
    auto_fix: bool,
) -> None:
    """๐ ุชุจุฏู ูุงู(ูุง) ุจู MDX

    ุชุจุฏู LaTeX, Markdown, HTML ู ุณุงุฑ ูุฑูุชโูุง ุจู MDX.
    """
    from formatforge.cli.commands.convert import run_convert
    run_convert(
        input_path,
        output=output,
        fmt=fmt,
        quality_min=quality_min,
        interactive=interactive,
        auto_fix=auto_fix,
        verbose=ctx.obj["verbose"],
    )


@cli.command("test")
@click.argument("path", type=click.Path(exists=True))
@click.option("--recursive", "-r", is_flag=True, help="ุชุณุช ุจุงุฒฺฏุดุช")
@click.option("--visual/--no-visual", default=False, help="ุชุณุช ุจุตุฑ (ูุงุฒ ุจู Playwright)")
@click.option("--report-format", type=click.Choice(["text", "json", "html"]), default="text")
@click.pass_context
def test_cmd(ctx: click.Context, path: str, recursive: bool, visual: bool, report_format: str) -> None:
    """๐งช ุชุณุช ฺฉูุช ุฎุฑูุฌ MDX

    ุจุฑุฑุณ ุณุงุฎุชุงุฑุ ูุญุชูุงุ ุฑุงุถุ ูุงุฑุณ/RTL ู ููฺฉโูุง.
    """
    from formatforge.cli.commands.test_cmd import run_test
    run_test(path, recursive=recursive, visual=visual, report_format=report_format, verbose=ctx.obj["verbose"])


@cli.command()
@click.argument("source", type=click.Path(exists=True))
@click.option("--target", "-t", type=click.Path(), required=True, help="ูุณุฑ ููุตุฏ (ูุจโุณุงุช)")
@click.option("--git-commit/--no-git-commit", default=False, help="Git commit ุฎูุฏฺฉุงุฑ")
@click.option("--open-editor/--no-open-editor", default=False, help="ุจุงุฒ ฺฉุฑุฏู ุฏุฑ ูุฑุงุดฺฏุฑ")
@click.pass_context
def deploy(ctx: click.Context, source: str, target: str, git_commit: bool, open_editor: bool) -> None:
    """๐ ุงุณุชูุฑุงุฑ ุฎุฑูุฌ ุฏุฑ ูุจโุณุงุช

    ฺฉูพ ูุงูโูุง MDX ู asset ูุง ุจู ูุณุฑ ููุตุฏ.
    """
    from formatforge.cli.commands.deploy import run_deploy
    run_deploy(source, target, git_commit=git_commit, open_editor=open_editor, verbose=ctx.obj["verbose"])


@cli.command()
@click.option("--last", "-n", type=int, default=10, help="ุชุนุฏุงุฏ ุขุฎุฑู ุชุจุฏูโูุง")
@click.option("--stats", is_flag=True, help="ููุงุด ุขูุงุฑ ุชุฌูุน")
@click.option("--search", "-s", type=str, help="ุฌุณุชุฌู ุฏุฑ ุชุจุฏูโูุง")
@click.option("--export", "export_fmt", type=click.Choice(["yaml", "json", "csv"]), help="ุฎุฑูุฌ ฺฏุฒุงุฑุด")
@click.option("--output", "-o", type=click.Path(), help="ูุณุฑ ูุงู ุฎุฑูุฌ")
@click.pass_context
def report(ctx: click.Context, last: int, stats: bool, search: str | None, export_fmt: str | None, output: str | None) -> None:
    """๐ ฺฏุฒุงุฑุด ูุฑฺฉุฒ ุชุจุฏูโูุง

    ูุดุงูุฏู ุชุงุฑุฎฺูุ ุขูุงุฑ ู ุฌุณุชุฌู ุฏุฑ ุชุจุฏูโูุง ุงูุฌุงูโุดุฏู.
    """
    from formatforge.cli.commands.report import run_report
    run_report(last=last, stats=stats, search=search, export_fmt=export_fmt, output=output, verbose=ctx.obj["verbose"])


@cli.command()
@click.argument("input_path", type=click.Path(exists=True))
@click.option("--output", "-o", type=click.Path(), help="ูุณุฑ ุฎุฑูุฌ")
@click.option("--target", "-t", type=click.Path(), help="ูุณุฑ ุงุณุชูุฑุงุฑ (ูุจโุณุงุช)")
@click.option("--quality-min", type=int, default=80, help="ุญุฏุงูู ุงูุชุงุฒ ฺฉูุช")
@click.option("--interactive/--batch", default=True, help="ุญุงูุช ุชุนุงูู/ุฏุณุชูโุง")
@click.option("--auto-fix/--no-auto-fix", default=False, help="ุงุตูุงุญ ุฎูุฏฺฉุงุฑ")
@click.pass_context
def run(
    ctx: click.Context,
    input_path: str,
    output: str | None,
    target: str | None,
    quality_min: int,
    interactive: bool,
    auto_fix: bool,
) -> None:
    """โก ุงุฌุฑุง ฺฉุงูู ุฎุท ูููู (scan โ convert โ test โ deploy)

    ุฏุณุชูุฑ all-in-one: ุชูุงู ูุฑุงุญู ุฑุง ุจู ุชุฑุชุจ ุงุฌุฑุง ูโฺฉูุฏ.
    """
    from formatforge.cli.commands.run import run_pipeline
    run_pipeline(
        input_path,
        output=output,
        target=target,
        quality_min=quality_min,
        interactive=interactive,
        auto_fix=auto_fix,
        verbose=ctx.obj["verbose"],
    )


@cli.command()
@click.pass_context
def doctor(ctx: click.Context) -> None:
    """๐ฉบ ุจุฑุฑุณ ุณูุงูุช ุณุณุชู

    ุจุฑุฑุณ ูุตุจ ุจูุฏู ุชูุงู ูุงุจุณุชฺฏโูุง ู ุงุจุฒุงุฑูุง ุฎุงุฑุฌ.
    """
    from formatforge.cli.commands.doctor import run_doctor
    run_doctor(verbose=ctx.obj["verbose"])


@cli.command("init-components")
@click.option("--framework", type=click.Choice(["next", "astro", "gatsby"]), default="next")
@click.option("--output", "-o", type=click.Path(), required=True, help="ูุณุฑ ุฎุฑูุฌ ฺฉุงููพูููุชโูุง")
@click.option("--typescript/--javascript", default=True, help="TypeScript ุง JavaScript")
@click.pass_context
def init_components(ctx: click.Context, framework: str, output: str, typescript: bool) -> None:
    """๐งฉ ุชููุฏ ฺฉุงููพูููุชโูุง MDX ุจุฑุง ูุจโุณุงุช

    ุณุงุฎุช Theorem, Definition, Proof, Admonition, MermaidDiagram ู ุณุงุฑ ฺฉุงููพูููุชโูุง.
    """
    from formatforge.cli.commands.init_components import run_init_components
    run_init_components(framework=framework, output=output, typescript=typescript, verbose=ctx.obj["verbose"])


# โโโโโโโโโโโโโโโโ ููุทู ูุฑูุฏ โโโโโโโโโโโโโโโโ

def main() -> None:
    """ููุทู ูุฑูุฏ ุงุตู"""
    cli(obj={})


if __name__ == "__main__":
    main()
'@

# ----------------------------------------------------------
# CLI Command Stubs (ุงุณฺฉูุช ุฏุณุชูุฑุงุช)
# ----------------------------------------------------------

$commandStubs = @{
    "formatforge/cli/commands/__init__.py" = '"""CLI commands package โ ุฏุณุชูุฑุงุช ุฎุท ูุฑูุงู"""'

    "formatforge/cli/commands/scan.py" = @'
"""
ุฏุณุชูุฑ scan โ ุงุณฺฉู ู ุดูุงุณุง ูุฑูุฏ
Scan command: detect format, encoding, structure, dependencies.
"""

from rich.console import Console

console = Console()


def run_scan(input_path: str, *, recursive: bool = False, verbose: bool = False) -> None:
    """ุงุฌุฑุง ุงุณฺฉู ูุฑูุฏ"""
    console.print(f"[bold blue]๐ ุงุณฺฉู:[/bold blue] {input_path}")
    console.print("[dim]  (ูพุงุฏูโุณุงุฒ ุฏุฑ ุงุณูพุฑูุช S02)[/dim]")
    # TODO: S02 โ Scanner implementation
'@

    "formatforge/cli/commands/convert.py" = @'
"""
ุฏุณุชูุฑ convert โ ุชุจุฏู ูุงู(ูุง) ุจู MDX
Convert command: transform documents to MDX format.
"""

from rich.console import Console

console = Console()


def run_convert(
    input_path: str,
    *,
    output: str | None = None,
    fmt: str | None = None,
    quality_min: int = 80,
    interactive: bool = True,
    auto_fix: bool = False,
    verbose: bool = False,
) -> None:
    """ุงุฌุฑุง ุชุจุฏู"""
    console.print(f"[bold blue]๐ ุชุจุฏู:[/bold blue] {input_path}")
    console.print("[dim]  (ูพุงุฏูโุณุงุฒ ุฏุฑ ุงุณูพุฑูุช S06-S09)[/dim]")
    # TODO: S06-S09 โ Converter implementations
'@

    "formatforge/cli/commands/test_cmd.py" = @'
"""
ุฏุณุชูุฑ test โ ุชุณุช ฺฉูุช ุฎุฑูุฌ MDX
Test command: validate MDX output quality.
"""

from rich.console import Console

console = Console()


def run_test(
    path: str,
    *,
    recursive: bool = False,
    visual: bool = False,
    report_format: str = "text",
    verbose: bool = False,
) -> None:
    """ุงุฌุฑุง ุชุณุช ฺฉูุช"""
    console.print(f"[bold blue]๐งช ุชุณุช:[/bold blue] {path}")
    console.print("[dim]  (ูพุงุฏูโุณุงุฒ ุฏุฑ ุงุณูพุฑูุช S10)[/dim]")
    # TODO: S10 โ Quality tests
'@

    "formatforge/cli/commands/deploy.py" = @'
"""
ุฏุณุชูุฑ deploy โ ุงุณุชูุฑุงุฑ ุฎุฑูุฌ ุฏุฑ ูุจโุณุงุช
Deploy command: copy MDX files and assets to website directory.
"""

from rich.console import Console

console = Console()


def run_deploy(
    source: str,
    target: str,
    *,
    git_commit: bool = False,
    open_editor: bool = False,
    verbose: bool = False,
) -> None:
    """ุงุฌุฑุง ุงุณุชูุฑุงุฑ"""
    console.print(f"[bold blue]๐ ุงุณุชูุฑุงุฑ:[/bold blue] {source} โ {target}")
    console.print("[dim]  (ูพุงุฏูโุณุงุฒ ุฏุฑ ุงุณูพุฑูุช S11)[/dim]")
    # TODO: S11 โ Deployer
'@

    "formatforge/cli/commands/report.py" = @'
"""
ุฏุณุชูุฑ report โ ฺฏุฒุงุฑุด ูุฑฺฉุฒ ุชุจุฏูโูุง
Report command: view conversion history and statistics.
"""

from rich.console import Console

console = Console()


def run_report(
    *,
    last: int = 10,
    stats: bool = False,
    search: str | None = None,
    export_fmt: str | None = None,
    output: str | None = None,
    verbose: bool = False,
) -> None:
    """ุงุฌุฑุง ฺฏุฒุงุฑุด"""
    console.print("[bold blue]๐ ฺฏุฒุงุฑุด ูุฑฺฉุฒ[/bold blue]")
    console.print("[dim]  (ูพุงุฏูโุณุงุฒ ุฏุฑ ุงุณูพุฑูุช S11)[/dim]")
    # TODO: S11 โ Central log & reports
'@

    "formatforge/cli/commands/run.py" = @'
"""
ุฏุณุชูุฑ run โ ุงุฌุฑุง ฺฉุงูู ุฎุท ูููู
Run command: execute full pipeline (scan โ convert โ test โ deploy).
"""

from rich.console import Console

console = Console()


def run_pipeline(
    input_path: str,
    *,
    output: str | None = None,
    target: str | None = None,
    quality_min: int = 80,
    interactive: bool = True,
    auto_fix: bool = False,
    verbose: bool = False,
) -> None:
    """ุงุฌุฑุง ฺฉุงูู ุฎุท ูููู"""
    console.print(f"[bold blue]โก ุงุฌุฑุง ฺฉุงูู:[/bold blue] {input_path}")
    console.print("[dim]  (ูพุงุฏูโุณุงุฒ ุฏุฑ ุงุณูพุฑูุช S12)[/dim]")
    # TODO: S12 โ Full pipeline
'@

    "formatforge/cli/commands/doctor.py" = @'
"""
ุฏุณุชูุฑ doctor โ ุจุฑุฑุณ ุณูุงูุช ุณุณุชู
Doctor command: check all dependencies and external tools.
"""

import shutil
import subprocess
import sys

from rich.console import Console
from rich.table import Table

console = Console()


def _check_command(name: str, version_flag: str = "--version") -> tuple[bool, str]:
    """ุจุฑุฑุณ ูุฌูุฏ ฺฉ ุงุจุฒุงุฑ ุฎุท ูุฑูุงู"""
    path = shutil.which(name)
    if not path:
        return False, "not found"
    try:
        result = subprocess.run(
            [name, version_flag],
            capture_output=True,
            text=True,
            timeout=10,
        )
        version = result.stdout.strip().split("\n")[0][:60]
        if not version:
            version = result.stderr.strip().split("\n")[0][:60]
        return True, version or "found"
    except Exception:
        return True, f"found at {path}"


def _check_python_package(name: str) -> tuple[bool, str]:
    """ุจุฑุฑุณ ูุฌูุฏ ฺฉ ูพฺฉุฌ Python"""
    try:
        mod = __import__(name.replace("-", "_"))
        version = getattr(mod, "__version__", "installed")
        return True, str(version)
    except ImportError:
        return False, "not installed"


def run_doctor(*, verbose: bool = False) -> None:
    """ุจุฑุฑุณ ุณูุงูุช ุณุณุชู"""
    console.print("\n[bold blue]๐ฉบ FormatForge Doctor[/bold blue]\n")

    # โโ Python โโ
    console.print("[bold]Python:[/bold]")
    py_ver = f"{sys.version_info.major}.{sys.version_info.minor}.{sys.version_info.micro}"
    py_ok = sys.version_info >= (3, 11)
    icon = "โ" if py_ok else "โ"
    console.print(f"  {icon} Python {py_ver} {'(โฅ3.11 โ)' if py_ok else '(need โฅ3.11)'}")

    # โโ ุงุจุฒุงุฑูุง ุฎุงุฑุฌ โโ
    console.print("\n[bold]ุงุจุฒุงุฑูุง ุฎุงุฑุฌ:[/bold]")

    tools = [
        ("pandoc",      "--version",  "winget install JohnMacFarlane.Pandoc",      True),
        ("xelatex",     "--version",  "Install TeX Live: tug.org/texlive",         True),
        ("biber",       "--version",  "Included in TeX Live",                      False),
        ("dvisvgm",     "--version",  "Included in TeX Live",                      False),
        ("node",        "--version",  "winget install OpenJS.NodeJS",              True),
        ("mmdc",        "--version",  "npm install -g @mermaid-js/mermaid-cli",    False),
        ("magick",      "--version",  "winget install ImageMagick.ImageMagick",    False),
        ("svgo",        "--version",  "npm install -g svgo",                       False),
        ("tesseract",   "--version",  "winget install UB-Mannheim.TesseractOCR",   False),
    ]

    table = Table(show_header=True, header_style="bold")
    table.add_column("ูุถุนุช", width=4, justify="center")
    table.add_column("ุงุจุฒุงุฑ", width=12)
    table.add_column("ูุณุฎู / ูุถุนุช", width=40)
    table.add_column("ุถุฑูุฑ", width=6, justify="center")

    all_required_ok = True
    for name, flag, hint, required in tools:
        found, info = _check_command(name, flag)
        icon = "โ" if found else ("โ" if required else "โ๏ธ")
        req_str = "ุจูู" if required else "ุฎุฑ"
        if not found:
            info = f"[red]not found[/red] โ {hint}"
            if required:
                all_required_ok = False
        table.add_row(icon, name, info, req_str)

    console.print(table)

    # โโ ูพฺฉุฌโูุง Python โโ
    console.print("\n[bold]ูพฺฉุฌโูุง Python:[/bold]")

    packages = [
        ("click", True),
        ("rich", True),
        ("pydantic", True),
        ("yaml", True),
        ("bs4", True),
        ("lxml", True),
        ("docx", False),
        ("fitz", False),
        ("PIL", True),
        ("jinja2", True),
        ("chardet", True),
        ("loguru", True),
    ]

    pkg_table = Table(show_header=True, header_style="bold")
    pkg_table.add_column("ูุถุนุช", width=4, justify="center")
    pkg_table.add_column("ูพฺฉุฌ", width=20)
    pkg_table.add_column("ูุณุฎู", width=20)

    for name, required in packages:
        found, ver = _check_python_package(name)
        icon = "โ" if found else ("โ" if required else "โ๏ธ")
        pkg_table.add_row(icon, name, ver if found else "[red]missing[/red]")

    console.print(pkg_table)

    # โโ ูุชุฌู โโ
    console.print()
    if all_required_ok:
        console.print("[bold green]โ ุชูุงู ุงุจุฒุงุฑูุง ุถุฑูุฑ ูุตุจ ูุณุชูุฏ.[/bold green]")
    else:
        console.print("[bold red]โ ุจุฑุฎ ุงุจุฒุงุฑูุง ุถุฑูุฑ ูุตุจ ูุณุชูุฏ.[/bold red]")
        console.print("   ูุทูุงู ุงุจุฒุงุฑูุง ูุดุฎุตโุดุฏู ุฑุง ูุตุจ ฺฉูุฏ.")

    console.print()
'@

    "formatforge/cli/commands/init_components.py" = @'
"""
ุฏุณุชูุฑ init-components โ ุชููุฏ ฺฉุงููพูููุชโูุง MDX
Init-components command: generate MDX components for website.
"""

from rich.console import Console

console = Console()


def run_init_components(
    *,
    framework: str = "next",
    output: str = "./components/mdx",
    typescript: bool = True,
    verbose: bool = False,
) -> None:
    """ุชููุฏ ฺฉุงููพูููุชโูุง MDX"""
    console.print(f"[bold blue]๐งฉ ุชููุฏ ฺฉุงููพูููุชโูุง:[/bold blue] {framework} โ {output}")
    console.print("[dim]  (ูพุงุฏูโุณุงุฒ ุฏุฑ ุงุณูพุฑูุช S12)[/dim]")
    # TODO: S12 โ Component generation
'@
}

foreach ($entry in $commandStubs.GetEnumerator()) {
    Save-File $entry.Key $entry.Value
}

# ----------------------------------------------------------
# __init__.py ูุงูโูุง ุฎุงู ุจุฑุง ูพฺฉุฌโูุง
# ----------------------------------------------------------
$initFiles = @(
    "formatforge/models/__init__.py"
    "formatforge/config/__init__.py"
    "formatforge/utils/__init__.py"
    "formatforge/core/__init__.py"
    "formatforge/core/scanner/__init__.py"
    "formatforge/core/metadata/__init__.py"
    "formatforge/core/converters/__init__.py"
    "formatforge/core/processors/__init__.py"
    "formatforge/core/persian/__init__.py"
    "formatforge/core/quality/__init__.py"
    "formatforge/core/deployer/__init__.py"
    "formatforge/ai/__init__.py"
    "formatforge/reports/__init__.py"
    "formatforge/templates/__init__.py"
    "tests/__init__.py"
    "tests/e2e/__init__.py"
)

foreach ($f in $initFiles) {
    $pkgName = (Split-Path (Split-Path $f -Parent) -Leaf)
    Save-File $f """""$pkgName package"""""
}

# ----------------------------------------------------------
# tests/conftest.py
# ----------------------------------------------------------
Save-File "tests/conftest.py" @'
"""
Pytest configuration and shared fixtures.
ุชูุธูุงุช ู fixture ูุง ูุดุชุฑฺฉ ุชุณุช.
"""

import os
from pathlib import Path

import pytest


# โโโโโโโโโโโโ ูุณุฑูุง โโโโโโโโโโโโ

@pytest.fixture
def test_files_dir() -> Path:
    """ูุณุฑ ูพูุดู ูุงูโูุง ุชุณุช"""
    return Path(__file__).parent / "test_files"


@pytest.fixture
def sample_latex(test_files_dir: Path) -> Path:
    """ูุณุฑ ูุงู LaTeX ููููู"""
    return test_files_dir / "sample-book.tex"


@pytest.fixture
def sample_markdown(test_files_dir: Path) -> Path:
    """ูุณุฑ ูุงู Markdown ููููู"""
    return test_files_dir / "sample-mermaid.md"


@pytest.fixture
def sample_html(test_files_dir: Path) -> Path:
    """ูุณุฑ ูุงู HTML ููููู"""
    return test_files_dir / "sample-page.html"


@pytest.fixture
def tmp_output(tmp_path: Path) -> Path:
    """ูพูุดู ุฎุฑูุฌ ูููุช"""
    out = tmp_path / "output"
    out.mkdir()
    return out


# โโโโโโโโโโโโ ูุชูู ููููู โโโโโโโโโโโโ

@pytest.fixture
def persian_text_with_zwnj() -> str:
    """ูุชู ูุงุฑุณ ุจุง ููโูุงุตูู"""
    return "ุงู ฺฉ ูุชู ููููู ุงุณุช. ูโุฎูุงูู ฺฉุชุงุจโูุง ู ููุงููโูุง ุฎูุฏ ุฑุง ุชุจุฏู ฺฉูู."


@pytest.fixture
def persian_text_without_zwnj() -> str:
    """ูุชู ูุงุฑุณ ุจุฏูู ููโูุงุตูู (ุบูุท)"""
    return "ุงู ฺฉ ูุชู ููููู ุงุณุช. ู ุฎูุงูู ฺฉุชุงุจ ูุง ู ููุงูู ูุง ุฎูุฏ ุฑุง ุชุจุฏู ฺฉูู."


@pytest.fixture
def latex_math_samples() -> dict[str, str]:
    """ููููู ูุฑูููโูุง ุฑุงุถ LaTeX"""
    return {
        "inline": r"$\neg(p \land q) \equiv (\neg p) \lor (\neg q)$",
        "display": r"$$\sum_{k=0}^{\infty} \frac{x^k}{k!} = e^x$$",
        "equation": (
            r"\begin{equation}" "\n"
            r"  \int_{-\infty}^{+\infty} e^{-x^2}\,dx = \sqrt{\pi}" "\n"
            r"  \label{eq:gaussian}" "\n"
            r"\end{equation}"
        ),
        "align": (
            r"\begin{align}" "\n"
            r"  \nabla \times \mathbf{E} &= -\frac{\partial \mathbf{B}}{\partial t} \label{eq:faraday} \\" "\n"
            r"  \nabla \times \mathbf{B} &= \mu_0 \mathbf{J} \label{eq:ampere}" "\n"
            r"\end{align}"
        ),
        "cases": (
            r"$$|x| = \begin{cases}" "\n"
            r"  x  & \text{ุงฺฏุฑ } x \geq 0 \\" "\n"
            r"  -x & \text{ุงฺฏุฑ } x < 0" "\n"
            r"\end{cases}$$"
        ),
        "matrix": (
            r"$$A = \begin{pmatrix}" "\n"
            r"  a_{11} & a_{12} \\" "\n"
            r"  a_{21} & a_{22}" "\n"
            r"\end{pmatrix}$$"
        ),
    }


@pytest.fixture
def mermaid_samples() -> dict[str, str]:
    """ููููู ูููุฏุงุฑูุง Mermaid"""
    return {
        "flowchart": (
            "```mermaid\n"
            "flowchart TD\n"
            '    A["ุดุฑูุน"] --> B{"ุดุฑุท"}\n'
            '    B -->|"ุจูู"| C["ูพุงุงู"]\n'
            '    B -->|"ุฎุฑ"| A\n'
            "```"
        ),
        "sequence": (
            "```mermaid\n"
            "sequenceDiagram\n"
            "    participant U as ฺฉุงุฑุจุฑ\n"
            "    participant S as ุณุฑูุฑ\n"
            "    U->>S: ุฏุฑุฎูุงุณุช\n"
            "    S-->>U: ูพุงุณุฎ\n"
            "```"
        ),
    }
'@

# ----------------------------------------------------------
# tests/test_files/ โ ูุงู placeholder
# ----------------------------------------------------------
Save-File "tests/test_files/README.md" @'
# ูุงูโูุง ุชุณุช

ูุงูโูุง ููููู ุฒุฑ ุจุงุฏ ุฏุฑ ุงู ูพูุดู ูุฑุงุฑ ุจฺฏุฑูุฏ:

- `sample-book.tex` โ ูุงู LaTeX ุฌุงูุน ูุงุฑุณ-ุงูฺฏูุณ
- `sample-mermaid.md` โ ูุงู Markdown ุจุง ูููุฏุงุฑูุง Mermaid
- `sample-page.html` โ ูุงู HTML ุฌุงูุน
- `sample-page.rst` โ ูุงู reStructuredText (ุงุฎุชุงุฑ)
- `sample-page.adoc` โ ูุงู AsciiDoc (ุงุฎุชุงุฑ)

> ุงู ูุงูโูุง ุฑุง ุงุฒ ฺุชโูุง ูุจู ฺฉูพ ฺฉูุฏ.
'@

# ----------------------------------------------------------
# config/default_config.yaml
# ----------------------------------------------------------
Save-File "config/default_config.yaml" @'
# ============================================================
#  FormatForge โ ุชูุธูุงุช ูพุดโูุฑุถ
#  Default Configuration
# ============================================================

general:
  language: "fa"
  verbose: false
  color: true
  confirm_before_convert: true
  confirm_before_deploy: true
  auto_fix_warnings: false
  temp_dir: "~/.formatforge/temp/"
  log_dir: "~/.formatforge/logs/"
  report_file: "~/.formatforge/central_log.yaml"

scanner:
  max_file_size_mb: 100
  supported_formats:
    - latex
    - html
    - markdown
    - docx
    - pdf
    - rst
    - asciidoc
    - epub
    - notebook
  ignore_patterns:
    - "*.aux"
    - "*.log"
    - "*.synctex*"
    - "*.fls"
    - "*.fdb_latexmk"
    - ".git/"
    - "node_modules/"
    - "__pycache__/"

metadata:
  default_author:
    name: ""
    email: ""
  default_lang: "fa"
  default_dir: "rtl"
  slug_max_length: 60
  ai_provider: "none"
  ai_model: ""
  require_fields:
    - title
    - slug
    - date
    - lang
    - dir

conversion:
  math:
    engine: "katex"
    throw_on_error: false
  diagrams:
    tikz_to: "svg"
    tikz_dpi: 300
    mermaid_to: "component"
    mermaid_theme: "base"
  images:
    optimize: true
    convert_to_webp: true
    max_width: 1200
    quality: 85
    svg_optimize: true
  code:
    add_line_numbers: false
    default_language: "text"
  tables:
    complex_to_html: true
    simple_to_markdown: true
  persian:
    preserve_zwnj: true
    fix_arabic_yeh: true
    fix_arabic_keh: true
    fix_spacing: true
    numerals: "keep"
    quotation_marks: "guillemet"
  mdx:
    component_style: "import"
    mdx_version: 3

testing:
  run_structural: true
  run_content: true
  run_math: true
  run_persian: true
  run_links: true
  run_visual: false
  min_quality_score: 80

deployment:
  create_backup: true
  overwrite_existing: "ask"
  post_deploy:
    open_in_editor: false
    editor_command: "code"
    git_commit: false

reporting:
  format: "yaml"
  keep_history: true
  max_history: 1000
'@

# ----------------------------------------------------------
# README.md
# ----------------------------------------------------------
Save-File "README.md" @'
# ๐ FormatForge

**ุงุจุฒุงุฑ ุฌุงูุน ุชุจุฏู ุงุณูุงุฏ ฺูุฏูุฑูุช ุจู MDX โ ุจุง ูพุดุชุจุงู ฺฉุงูู ูุงุฑุณ**

> Comprehensive multi-format document converter to MDX with full Persian/RTL support.

## โจ ูฺฺฏโูุง

- ๐ ูพุดุชุจุงู ุงุฒ LaTeX, Markdown, HTML, DOCX, PDF, RST, AsciiDoc
- ๐ข ุชุจุฏู ฺฉุงูู ูุฑูููโูุง ุฑุงุถ (KaTeX)
- ๐ ุชุจุฏู ูููุฏุงุฑูุง (TikZ โ SVG, Mermaid โ Component)
- ๐ฎ๐ท ูพุดุชุจุงู ฺฉุงูู ูุงุฑุณ: RTL, ููโูุงุตูู (ZWNJ), ุชุงูพูฺฏุฑุงู
- ๐ ูุญุชูุง ุฏูุฒุจุงูู (ูุงุฑุณ + ุงูฺฏูุณ)
- ๐งช ุชุณุช ฺฉูุช ุฎูุฏฺฉุงุฑ
- ๐ฆ ุงุณุชูุฑุงุฑ ุฏุฑ ูุจโุณุงุช (Next.js, Astro, Gatsby)

## ๐ ุดุฑูุน ุณุฑุน

```bash
# ูุตุจ
pip install -e ".[all]"

# ุจุฑุฑุณ ุณูุงูุช
formatforge doctor

# ุชุจุฏู
formatforge convert ./article.tex --output ./output/

# ุงุฌุฑุง ฺฉุงูู
formatforge run ./input/ --output ./output/ --target ./website/content/
```

## ๐ ูุถุนุช ุชูุณุนู

- [ ] S01: ุฒุฑุณุงุฎุช โ
- [ ] S02: ุงุณฺฉูุฑ
- [ ] S03: ูุงฺูู ูุงุฑุณ
- [ ] S04-S05: ูพุฑุฏุงุฒุดฺฏุฑูุง
- [ ] S06: Markdown โ MDX
- [ ] S07: HTML โ MDX
- [ ] S08-S09: LaTeX โ MDX
- [ ] S10: ุชุณุช ฺฉูุช
- [ ] S11: ุงุณุชูุฑุงุฑ ู ฺฏุฒุงุฑุด
- [ ] S12: ฺฉูพุงุฑฺูโุณุงุฒ

## ๐ ูุฌูุฒ

MIT License
'@

# ----------------------------------------------------------
# progress.yaml
# ----------------------------------------------------------
Save-File "progress.yaml" @'
# FormatForge โ ูพุดุฑูุช ุชูุณุนู
# ุจุนุฏ ุงุฒ ูุฑ ฺุช ุจุฑูุฒุฑุณุงู ุดูุฏ

current_sprint: S01
current_chat: 1

completed:
  - sprint: S01
    chat: 1
    date: ""
    files:
      - pyproject.toml
      - formatforge/__init__.py
      - formatforge/exceptions.py
      - formatforge/cli/__main__.py
      - formatforge/cli/commands/*.py (stubs)
      - config/default_config.yaml
      - tests/conftest.py
    status: "done"
    notes: "Project structure created"

next:
  sprint: S01
  chat: 2
  target: "Pydantic models (metadata, scan_report, conversion_result)"
'@

# ============================================================
Write-Title "ณ. ุจุฑุฑุณ ููุง..."
# ============================================================

# ุดูุงุฑุด ูุงูโูุง
$fileCount = (Get-ChildItem $ProjectRoot -Recurse -File).Count
$dirCount  = (Get-ChildItem $ProjectRoot -Recurse -Directory).Count

# ุจุฑุฑุณ encoding
Write-Host "`n๐ ุจุฑุฑุณ encoding:" -ForegroundColor Yellow
$sampleFiles = @(
    "formatforge/__init__.py",
    "formatforge/exceptions.py",
    "formatforge/cli/__main__.py",
    "config/default_config.yaml"
)
foreach ($f in $sampleFiles) {
    $fullPath = Join-Path $ProjectRoot $f
    if (Test-Path $fullPath) {
        $bytes = [System.IO.File]::ReadAllBytes($fullPath)
        $hasBom = ($bytes.Length -ge 3 -and $bytes[0] -eq 0xEF -and $bytes[1] -eq 0xBB -and $bytes[2] -eq 0xBF)
        $icon = if ($hasBom) { "โ" } else { "โ๏ธ" }
        Write-Host "  $icon $f" -ForegroundColor $(if ($hasBom) { "Green" } else { "Yellow" })
    }
}

# ============================================================
Write-Host @"

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  โ ุณุงุฎุชุงุฑ ูพุฑูฺู FormatForge ุณุงุฎุชู ุดุฏ!                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ
โ                                                          โ
โ  ๐ ูพูุดูโูุง: $dirCount                                     โ
โ  ๐ ูุงูโูุง: $fileCount                                     โ
โ  ๐ ูุณุฑ: $ProjectRoot
โ                                                          โ
โ  ูุฑุงุญู ุจุนุฏ:                                             โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                   โ
โ  1. cd $ProjectRoot                          โ
โ  2. python -m venv .venv                                โ
โ  3. .venv\Scripts\Activate.ps1                          โ
โ  4. pip install -e ".[dev]"                             โ
โ  5. formatforge doctor                                  โ
โ  6. pytest tests/ -v                                    โ
โ                                                          โ
โ  ฺุช ุจุนุฏ: S01-C2 (ูุฏูโูุง Pydantic)                     โ
โ                                                          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

"@ -ForegroundColor Cyan
```

---

## ุฏุณุชูุฑุงุช ุจุนุฏ ุงุฒ ุงุฌุฑุง ุงุณฺฉุฑูพุช

```powershell
# ฑ. ุงุฌุฑุง ุงุณฺฉุฑูพุช
.\init-project.ps1 -ProjectRoot "C:\Projects\formatforge"

# ฒ. ูุฑูุฏ ุจู ูพุฑูฺู
cd C:\Projects\formatforge

# ณ. ุณุงุฎุช ูุญุท ูุฌุงุฒ
python -m venv .venv
.venv\Scripts\Activate.ps1

# ด. ูุตุจ ูุงุจุณุชฺฏโูุง
pip install -e ".[dev]"

# ต. ุจุฑุฑุณ ุณูุงูุช
python -m formatforge doctor

# ถ. ุชุณุช CLI
python -m formatforge --help
python -m formatforge --version

# ท. ุงุฌุฑุง ุชุณุชโูุง (ูุนูุงู ุฎุงู โ ุจุงุฏ ูพุงุณ ุดููุฏ)
pytest tests/ -v

# ธ. Git init
git init
git add .
git commit -m "feat: S01-C1 project structure and CLI skeleton"
```

---

## ุฎุฑูุฌ ููุฑุฏ ุงูุชุธุงุฑ `formatforge doctor`

```
๐ฉบ FormatForge Doctor

Python:
  โ Python 3.12.4 (โฅ3.11 โ)

ุงุจุฒุงุฑูุง ุฎุงุฑุฌ:
  โโโโโโโโฌโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโ
  โ ูุถุนุชโ ุงุจุฒุงุฑ    โ ูุณุฎู / ูุถุนุช                    โ ุถุฑูุฑโ
  โโโโโโโโผโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโผโโโโโโโค
  โ  โ  โ pandoc   โ pandoc 3.2                      โ ุจูู  โ
  โ  โ  โ xelatex  โ XeTeX 3.141592653...            โ ุจูู  โ
  โ  โ  โ biber    โ biber version 2.19              โ ุฎุฑ  โ
  โ  ...                                                     โ
  โโโโโโโโดโโโโโโโโโโโดโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโดโโโโโโโ

โ ุชูุงู ุงุจุฒุงุฑูุง ุถุฑูุฑ ูุตุจ ูุณุชูุฏ.
```

---

## ุฎุฑูุฌ ููุฑุฏ ุงูุชุธุงุฑ `formatforge --help`

```
Usage: formatforge [OPTIONS] COMMAND [ARGS]...

  ๐ FormatForge โ ุงุจุฒุงุฑ ุฌุงูุน ุชุจุฏู ุงุณูุงุฏ ุจู MDX

Options:
  --version          Show the version and exit.
  -v, --verbose      ููุงุด ุฌุฒุฆุงุช ุจุดุชุฑ
  -c, --config PATH  ูุณุฑ ูุงู ุชูุธูุงุช
  --help             Show this message and exit.

Commands:
  convert          ๐ ุชุจุฏู ูุงู(ูุง) ุจู MDX
  deploy           ๐ ุงุณุชูุฑุงุฑ ุฎุฑูุฌ ุฏุฑ ูุจโุณุงุช
  doctor           ๐ฉบ ุจุฑุฑุณ ุณูุงูุช ุณุณุชู
  init-components  ๐งฉ ุชููุฏ ฺฉุงููพูููุชโูุง MDX ุจุฑุง ูุจโุณุงุช
  report           ๐ ฺฏุฒุงุฑุด ูุฑฺฉุฒ ุชุจุฏูโูุง
  run              โก ุงุฌุฑุง ฺฉุงูู ุฎุท ูููู
  scan             ๐ ุงุณฺฉู ู ุดูุงุณุง ูุฑูุฏ
  test             ๐งช ุชุณุช ฺฉูุช ุฎุฑูุฌ MDX
```

---

**S01-C1 ฺฉุงูู ุดุฏ.** โ

**ฺุช ุจุนุฏ (S01-C2):** ูุฏูโูุง Pydantic โ `models/metadata.py`, `models/scan_report.py`, `models/conversion_result.py`

ุขูุงุฏูโุงุฏ ุงุฏุงูู ุฏููุ

# ุงุณูพุฑูุช S01 โ ฺุช ฒ: ูุฏูโูุง Pydantic

```powershell
# ============================================================
#  S01-C2: FormatForge โ ูุฏูโูุง ุฏุงุฏู (Pydantic)
#  ุงุฌุฑุง: .\s01-c2-models.ps1 [-ProjectRoot ".\formatforge"]
# ============================================================

param(
    [string]$ProjectRoot = ".\formatforge"
)

$ErrorActionPreference = "Stop"
$Utf8Bom = [System.Text.UTF8Encoding]::new($true)

function Save-File {
    param([string]$RelPath, [string]$Content)
    $fullPath = Join-Path $ProjectRoot $RelPath
    $dir = Split-Path $fullPath -Parent
    if (-not (Test-Path $dir)) {
        New-Item -ItemType Directory -Force -Path $dir | Out-Null
    }
    [System.IO.File]::WriteAllText($fullPath, $Content, $Utf8Bom)
    Write-Host "  โ $RelPath" -ForegroundColor Green
}

Write-Host @"

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ๐ฆ S01-C2: ูุฏูโูุง Pydantic                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

"@ -ForegroundColor Magenta

# ============================================================
# 1. models/enums.py โ ุดูุงุฑุดโูุง (Enums)
# ============================================================
Save-File "formatforge/models/enums.py" @'
"""
ุดูุงุฑุดโูุง ูุดุชุฑฺฉ FormatForge
Shared enumerations used across all models.
"""

from enum import Enum


class DocumentFormat(str, Enum):
    """ูุฑูุชโูุง ุณูุฏ ูพุดุชุจุงูโุดุฏู โ Supported document formats."""
    LATEX = "latex"
    MARKDOWN = "markdown"
    HTML = "html"
    DOCX = "docx"
    PDF = "pdf"
    RST = "rst"
    ASCIIDOC = "asciidoc"
    EPUB = "epub"
    NOTEBOOK = "notebook"
    UNKNOWN = "unknown"

    @classmethod
    def from_extension(cls, ext: str) -> "DocumentFormat":
        """ุชุดุฎุต ูุฑูุช ุงุฒ ูพุณููุฏ ูุงู"""
        ext = ext.lower().lstrip(".")
        mapping = {
            "tex": cls.LATEX, "ltx": cls.LATEX, "sty": cls.LATEX, "cls": cls.LATEX,
            "md": cls.MARKDOWN, "mdx": cls.MARKDOWN, "markdown": cls.MARKDOWN,
            "html": cls.HTML, "htm": cls.HTML, "xhtml": cls.HTML,
            "docx": cls.DOCX,
            "pdf": cls.PDF,
            "rst": cls.RST, "rest": cls.RST,
            "adoc": cls.ASCIIDOC, "asciidoc": cls.ASCIIDOC, "asc": cls.ASCIIDOC,
            "epub": cls.EPUB,
            "ipynb": cls.NOTEBOOK,
        }
        return mapping.get(ext, cls.UNKNOWN)


class DocumentLanguage(str, Enum):
    """ุฒุจุงู ุณูุฏ โ Document language."""
    PERSIAN = "fa"
    ENGLISH = "en"
    BILINGUAL = "fa-en"
    UNKNOWN = "unknown"


class DocumentDirection(str, Enum):
    """ุฌูุช ูุชู โ Text direction."""
    RTL = "rtl"
    LTR = "ltr"


class DocumentType(str, Enum):
    """ููุน ุณูุฏ โ Document type."""
    ARTICLE = "article"
    BOOK = "book"
    CHAPTER = "chapter"
    PROOF = "proof"
    LECTURE_NOTE = "lecture-note"
    TUTORIAL = "tutorial"
    UNKNOWN = "unknown"


class StructureType(str, Enum):
    """ููุน ุณุงุฎุชุงุฑ ูุฌููุนู ุงุณูุงุฏ โ Structure type of document collection."""
    SINGLE_DOC = "single_doc"
    INDEPENDENT_ARTICLES = "independent_articles"
    MULTI_CHAPTER_BOOK = "multi_chapter_book"
    RELATED_COLLECTION = "related_collection"
    UNKNOWN = "unknown"


class DocumentRole(str, Enum):
    """ููุด ูุงู ุฏุฑ ูุฌููุนู โ Role of file within collection."""
    MAIN_ENTRY = "main_entry"
    CHAPTER = "chapter"
    APPENDIX = "appendix"
    STANDALONE = "standalone"
    BIBLIOGRAPHY = "bibliography"
    STYLE = "style"
    ASSET = "asset"
    UNKNOWN = "unknown"


class ConversionStatus(str, Enum):
    """ูุถุนุช ุชุจุฏู โ Conversion status."""
    SUCCESS = "success"
    PARTIAL = "partial"
    FAILED = "failed"
    SKIPPED = "skipped"


class IssueSeverity(str, Enum):
    """ุดุฏุช ูุดฺฉู โ Issue severity level."""
    ERROR = "error"
    WARNING = "warning"
    INFO = "info"
    HINT = "hint"


class QualityGrade(str, Enum):
    """ุฏุฑุฌู ฺฉูุช โ Quality grade."""
    EXCELLENT = "excellent"     # 90-100
    GOOD = "good"               # 75-89
    FAIR = "fair"               # 50-74
    POOR = "poor"               # 0-49

    @classmethod
    def from_score(cls, score: int) -> "QualityGrade":
        if score >= 90:
            return cls.EXCELLENT
        elif score >= 75:
            return cls.GOOD
        elif score >= 50:
            return cls.FAIR
        else:
            return cls.POOR
'@

# ============================================================
# 2. models/metadata.py โ ูุชุงุฏุชุง ุณูุฏ
# ============================================================
Save-File "formatforge/models/metadata.py" @'
"""
ูุฏู ูุชุงุฏุชุง ุณูุฏ โ Document Metadata Model.
ุดุงูู ุชูุงู ุงุทูุงุนุงุช frontmatter ู SEO ููุฑุฏ ูุงุฒ ุจุฑุง MDX.
"""

from __future__ import annotations

import re
from datetime import datetime

from pydantic import BaseModel, Field, field_validator, model_validator

from formatforge.models.enums import (
    DocumentDirection,
    DocumentFormat,
    DocumentLanguage,
    DocumentType,
)

# โโโโโโโโโโโโ ุซุงุจุชโูุง โโโโโโโโโโโโ

ZWNJ = "\u200c"
SLUG_PATTERN = re.compile(r"^[a-z0-9]+(?:-[a-z0-9]+)*$")
SLUG_MAX_LENGTH = 60


# โโโโโโโโโโโโ ูุฏูโูุง ูุฑุน โโโโโโโโโโโโ


class AuthorInfo(BaseModel):
    """ุงุทูุงุนุงุช ููุณูุฏู โ Author information."""

    name: str = Field(..., min_length=1, description="ูุงู ููุณูุฏู (ูุงุฑุณ)")
    name_en: str | None = Field(None, description="ูุงู ููุณูุฏู (ุงูฺฏูุณ)")
    email: str | None = Field(None, description="ุงูู")
    url: str | None = Field(None, description="ูุจโุณุงุช")
    affiliation: str | None = Field(None, description="ูุงุจุณุชฺฏ ุณุงุฒูุงู")


class SeriesInfo(BaseModel):
    """ุงุทูุงุนุงุช ูุฌููุนู โ Series information (for multi-chapter books)."""

    name: str = Field(..., description="ูุงู ูุฌููุนู")
    slug: str = Field(..., description="Slug ูุฌููุนู")
    order: int = Field(..., ge=0, description="ุชุฑุชุจ ุฏุฑ ูุฌููุนู")
    total: int | None = Field(None, ge=1, description="ุชุนุฏุงุฏ ฺฉู ุงุฌุฒุง")


class AssetReference(BaseModel):
    """ุงุฑุฌุงุน ุจู ูุงู ูุงุจุณุชู โ Asset file reference."""

    path: str = Field(..., description="ูุณุฑ ูุงู")
    type: str = Field(..., description="ููุน ูุงู (image/png, image/svg, etc.)")
    alt_text: str | None = Field(None, description="ูุชู ุฌุงฺฏุฒู (ุจุฑุง ุชุตุงูุฑ)")
    original_path: str | None = Field(None, description="ูุณุฑ ุงุตู ูุจู ุงุฒ ุชุจุฏู")


# โโโโโโโโโโโโ ูุฏู ุงุตู โโโโโโโโโโโโ


class DocumentMetadata(BaseModel):
    """
    ูุชุงุฏุชุง ฺฉุงูู ฺฉ ุณูุฏ โ Complete document metadata.
    ุงู ูุฏู ูุณุชููุงู ุจู frontmatter ูุงู MDX ุชุจุฏู ูโุดูุฏ.

    Full metadata schema for a document. This model maps directly
    to the MDX frontmatter output.
    """

    # โโโ ุงุฌุจุงุฑ (Required) โโโ
    title: str = Field(
        ...,
        min_length=1,
        max_length=200,
        description="ุนููุงู ุณูุฏ (ูุงุฑุณ)",
    )
    slug: str = Field(
        ...,
        min_length=1,
        max_length=SLUG_MAX_LENGTH,
        description="ูุณุฑ URL (ููุท a-z, 0-9, -)",
    )
    date: str = Field(
        ...,
        description="ุชุงุฑุฎ ุงูุชุดุงุฑ (ISO 8601: YYYY-MM-DD)",
    )
    lang: DocumentLanguage = Field(
        DocumentLanguage.PERSIAN,
        description="ุฒุจุงู ุงุตู ุณูุฏ",
    )
    dir: DocumentDirection = Field(
        DocumentDirection.RTL,
        description="ุฌูุช ุงุตู ูุชู",
    )

    # โโโ ููุณูุฏู โโโ
    author: AuthorInfo | None = Field(None, description="ุงุทูุงุนุงุช ููุณูุฏู")

    # โโโ ุนููุงู ุงูฺฏูุณ โโโ
    title_en: str | None = Field(None, max_length=200, description="ุนููุงู ุงูฺฏูุณ")

    # โโโ ุฏุณุชูโุจูุฏ โโโ
    type: DocumentType = Field(
        DocumentType.ARTICLE,
        description="ููุน ุณูุฏ",
    )
    tags: list[str] = Field(default_factory=list, description="ุจุฑฺุณุจโูุง (ูุงุฑุณ)")
    tags_en: list[str] = Field(default_factory=list, description="ุจุฑฺุณุจโูุง (ุงูฺฏูุณ)")
    categories: list[str] = Field(default_factory=list, description="ุฏุณุชูโุจูุฏโูุง")
    series: SeriesInfo | None = Field(None, description="ุงุทูุงุนุงุช ูุฌููุนู")

    # โโโ ูุญุชูุง โโโ
    description: str = Field(
        "",
        max_length=500,
        description="ุฎูุงุตู (ูุงุฑุณุ ุญุฏุงฺฉุซุฑ ตฐฐ ฺฉุงุฑุงฺฉุชุฑ)",
    )
    description_en: str | None = Field(None, max_length=500, description="ุฎูุงุตู ุงูฺฏูุณ")
    abstract: str | None = Field(None, description="ฺฺฉุฏู ููุตู")
    keywords: list[str] = Field(default_factory=list, description="ฺฉููุงุช ฺฉูุฏ")
    toc: bool = Field(True, description="ููุงุด ููุฑุณุช ูุทุงูุจ")
    math: bool = Field(False, description="ุขุง ุดุงูู ุฑุงุถ ุงุณุช")
    mermaid: bool = Field(False, description="ุขุง ุดุงูู ูููุฏุงุฑ Mermaid ุงุณุช")
    code_highlight: bool = Field(False, description="ุขุง ุดุงูู ฺฉุฏ ุงุณุช")

    # โโโ ูุงูโูุง โโโ
    source_format: DocumentFormat = Field(
        DocumentFormat.UNKNOWN,
        description="ูุฑูุช ุงุตู",
    )
    source_file: str = Field("", description="ูุงู ูุงู ุงุตู")
    assets: list[AssetReference] = Field(
        default_factory=list,
        description="ูุงูโูุง ูุงุจุณุชู",
    )
    featured_image: str | None = Field(None, description="ุชุตูุฑ ุดุงุฎุต")

    # โโโ SEO ู ูุจ โโโ
    canonical: str | None = Field(None, description="URL ฺฉุงูููฺฉุงู")
    no_index: bool = Field(False, description="ุนุฏู ุงูุฏฺฉุณ ุชูุณุท ููุชูุฑ ุฌุณุชุฌู")
    og_image: str | None = Field(None, description="ุชุตูุฑ Open Graph")

    # โโโ ุชุจุฏู โโโ
    converted_at: str | None = Field(None, description="ุฒูุงู ุชุจุฏู (ISO 8601)")
    converter_version: str | None = Field(None, description="ูุณุฎู FormatForge")
    quality_score: int | None = Field(None, ge=0, le=100, description="ุงูุชุงุฒ ฺฉูุช")
    conversion_notes: list[str] = Field(
        default_factory=list,
        description="ุงุฏุฏุงุดุชโูุง ุชุจุฏู",
    )

    # โโโ ุงุนุชุจุงุฑุณูุฌ (Validators) โโโ

    @field_validator("slug")
    @classmethod
    def validate_slug(cls, v: str) -> str:
        """ุจุฑุฑุณ ูุฑูุช slug โ Validate slug format (a-z, 0-9, hyphens only)."""
        v = v.strip().lower()
        if not SLUG_PATTERN.match(v):
            raise ValueError(
                f"Slug ูุงูุนุชุจุฑ: '{v}'. ููุท ุญุฑูู ฺฉูฺฺฉ ูุงุชูุ ุงุนุฏุงุฏ ู ุฎุทโุชุฑู ูุฌุงุฒ ุงุณุช."
            )
        return v

    @field_validator("date")
    @classmethod
    def validate_date(cls, v: str) -> str:
        """ุจุฑุฑุณ ูุฑูุช ุชุงุฑุฎ โ Validate ISO 8601 date format."""
        v = v.strip()
        try:
            datetime.fromisoformat(v)
        except ValueError:
            try:
                datetime.strptime(v, "%Y-%m-%d")
            except ValueError:
                raise ValueError(f"ุชุงุฑุฎ ูุงูุนุชุจุฑ: '{v}'. ูุฑูุช ููุฑุฏ ูุงุฒ: YYYY-MM-DD")
        return v

    @field_validator("title")
    @classmethod
    def validate_title(cls, v: str) -> str:
        """ุจุฑุฑุณ ุนููุงู โ Title should not be empty after stripping."""
        v = v.strip()
        if not v:
            raise ValueError("ุนููุงู ููโุชูุงูุฏ ุฎุงู ุจุงุดุฏ")
        return v

    @model_validator(mode="after")
    def set_direction_from_language(self) -> "DocumentMetadata":
        """ุชูุธู ุฎูุฏฺฉุงุฑ ุฌูุช ุจุฑ ุงุณุงุณ ุฒุจุงู โ Auto-set direction from language."""
        if self.lang == DocumentLanguage.ENGLISH and self.dir == DocumentDirection.RTL:
            # ุงฺฏุฑ ุฒุจุงู ุงูฺฏูุณ ุงุณุช ูู RTL ุชูุธู ุดุฏูุ ุงุตูุงุญ ููโฺฉูู
            # ููฺฉู ุงุณุช ุนูุฏ ุจุงุดุฏ
            pass
        return self

    # โโโ ูุชุฏูุง ฺฉูฺฉ โโโ

    def has_zwnj(self) -> bool:
        """ุขุง ุนููุงู ุดุงูู ููโูุงุตูู ุงุณุชุ"""
        return ZWNJ in self.title

    def to_frontmatter_dict(self) -> dict:
        """ุชุจุฏู ุจู ุฏฺฉุดูุฑ frontmatter โ Convert to frontmatter dict for MDX."""
        data = {
            "title": self.title,
            "slug": self.slug,
            "date": self.date,
            "lang": self.lang.value,
            "dir": self.dir.value,
        }

        if self.title_en:
            data["titleEn"] = self.title_en
        if self.author:
            data["author"] = self.author.model_dump(exclude_none=True)
        if self.type != DocumentType.UNKNOWN:
            data["type"] = self.type.value
        if self.tags:
            data["tags"] = self.tags
        if self.tags_en:
            data["tagsEn"] = self.tags_en
        if self.categories:
            data["categories"] = self.categories
        if self.series:
            data["series"] = self.series.model_dump(exclude_none=True)
        if self.description:
            data["description"] = self.description
        if self.description_en:
            data["descriptionEn"] = self.description_en
        if self.math:
            data["math"] = True
        if self.mermaid:
            data["mermaid"] = True
        if self.code_highlight:
            data["codeHighlight"] = True
        if self.toc:
            data["toc"] = True
        if self.featured_image:
            data["featuredImage"] = self.featured_image
        if self.source_format != DocumentFormat.UNKNOWN:
            data["sourceFormat"] = self.source_format.value
        if self.converted_at:
            data["convertedAt"] = self.converted_at
        if self.converter_version:
            data["converterVersion"] = self.converter_version
        if self.quality_score is not None:
            data["qualityScore"] = self.quality_score

        return data

    def to_frontmatter_yaml(self) -> str:
        """ุชุจุฏู ุจู ุฑุดุชู YAML frontmatter โ Convert to YAML frontmatter string."""
        import yaml

        data = self.to_frontmatter_dict()
        yaml_str = yaml.dump(
            data,
            default_flow_style=False,
            allow_unicode=True,
            sort_keys=False,
            width=120,
        )
        return f"---\n{yaml_str}---\n"

    @classmethod
    def create_minimal(
        cls,
        title: str,
        slug: str,
        date: str | None = None,
    ) -> "DocumentMetadata":
        """ุณุงุฎุช ููููู ุญุฏุงูู โ Create minimal metadata instance."""
        if date is None:
            date = datetime.now().strftime("%Y-%m-%d")
        return cls(title=title, slug=slug, date=date)
'@

# ============================================================
# 3. models/scan_report.py โ ฺฏุฒุงุฑุด ุงุณฺฉู
# ============================================================
Save-File "formatforge/models/scan_report.py" @'
"""
ูุฏู ฺฏุฒุงุฑุด ุงุณฺฉู โ Scan Report Model.
ูุชุฌู ูุฑุญูู ุงุณฺฉู ู ุดูุงุณุง ูุฑูุฏ.
"""

from __future__ import annotations

from datetime import datetime

from pydantic import BaseModel, Field, computed_field

from formatforge.models.enums import (
    DocumentFormat,
    DocumentLanguage,
    DocumentRole,
    IssueSeverity,
    StructureType,
)


# โโโโโโโโโโโโ ูุฏูโูุง ูุฑุน โโโโโโโโโโโโ


class EncodingInfo(BaseModel):
    """ุงุทูุงุนุงุช encoding ูุงู โ File encoding information."""

    name: str = Field("utf-8", description="ูุงู encoding")
    has_bom: bool = Field(False, description="ุขุง BOM ุฏุงุฑุฏ")
    confidence: float = Field(1.0, ge=0.0, le=1.0, description="ุถุฑุจ ุงุทููุงู")


class ScanIssue(BaseModel):
    """ูุดฺฉู ุดูุงุณุงโุดุฏู โ Detected issue during scanning."""

    severity: IssueSeverity = Field(..., description="ุดุฏุช ูุดฺฉู")
    file: str = Field("", description="ูุงู ูุฑุจูุทู")
    line: int | None = Field(None, description="ุดูุงุฑู ุฎุท (ุงุฎุชุงุฑ)")
    message: str = Field(..., description="ูพุงู ูุดฺฉู")
    suggestion: str = Field("", description="ูพุดููุงุฏ ุงุตูุงุญ")
    auto_fixable: bool = Field(False, description="ุขุง ูุงุจู ุงุตูุงุญ ุฎูุฏฺฉุงุฑ ุงุณุช")


class ImageReference(BaseModel):
    """ุงุฑุฌุงุน ุชุตูุฑ โ Image reference found in document."""

    path: str = Field(..., description="ูุณุฑ ุชุตูุฑ")
    exists: bool = Field(True, description="ุขุง ูุงู ูุฌูุฏ ุฏุงุฑุฏ")
    referenced_by: list[str] = Field(default_factory=list, description="ูุงูโูุง ุงุฑุฌุงุนโุฏููุฏู")


class DependencyInfo(BaseModel):
    """ุงุทูุงุนุงุช ูุงุจุณุชฺฏ โ Dependency file information."""

    path: str = Field(..., description="ูุณุฑ ูุงู ูุงุจุณุชู")
    type: str = Field(..., description="ููุน ูุงุจุณุชฺฏ (input, include, bibliography, image)")
    exists: bool = Field(True, description="ุขุง ูุฌูุฏ ุฏุงุฑุฏ")
    referenced_by: str = Field("", description="ูุงู ุงุฑุฌุงุนโุฏููุฏู")


class ScannedDocument(BaseModel):
    """ุงุทูุงุนุงุช ฺฉ ุณูุฏ ุงุณฺฉูโุดุฏู โ Information about a scanned document."""

    id: str = Field(..., description="ุดูุงุณู ููุญุตุฑุจูโูุฑุฏ")
    path: str = Field(..., description="ูุณุฑ ูุณุจ ูุงู")
    format: DocumentFormat = Field(..., description="ูุฑูุช ุดูุงุณุงโุดุฏู")
    encoding: EncodingInfo = Field(default_factory=EncodingInfo, description="ุงุทูุงุนุงุช encoding")
    language: DocumentLanguage = Field(
        DocumentLanguage.UNKNOWN,
        description="ุฒุจุงู ุดูุงุณุงโุดุฏู",
    )
    role: DocumentRole = Field(DocumentRole.STANDALONE, description="ููุด ูุงู")
    parent: str | None = Field(None, description="ุดูุงุณู ุณูุฏ ูุงูุฏ (ุจุฑุง ูุตูโูุง)")
    size_bytes: int = Field(0, ge=0, description="ุญุฌู ูุงู (ุจุงุช)")
    estimated_pages: int | None = Field(None, description="ุชุนุฏุงุฏ ุชูุฑุจ ุตูุญุงุช")

    # ูุงุจุณุชฺฏโูุง
    dependencies: list[str] = Field(
        default_factory=list,
        description="ูุณุฑ ูุงูโูุง include/input ุดุฏู",
    )
    images_referenced: list[str] = Field(
        default_factory=list,
        description="ูุณุฑ ุชุตุงูุฑ ุงุฑุฌุงุนโุดุฏู",
    )

    # ูฺฺฏโูุง ูุญุชูุง
    has_math: bool = Field(False, description="ุดุงูู ูุฑููู ุฑุงุถ")
    has_code: bool = Field(False, description="ุดุงูู ุจููฺฉ ฺฉุฏ")
    has_tables: bool = Field(False, description="ุดุงูู ุฌุฏูู")
    has_bibliography: bool = Field(False, description="ุดุงูู ฺฉุชุงุจโูุงูู")
    has_tikz: bool = Field(False, description="ุดุงูู ูููุฏุงุฑ TikZ")
    has_mermaid: bool = Field(False, description="ุดุงูู ูููุฏุงุฑ Mermaid")

    # ุขูุงุฑ ุณุฑุน
    zwnj_count: int = Field(0, ge=0, description="ุชุนุฏุงุฏ ููโูุงุตููโูุง")
    word_count_approx: int = Field(0, ge=0, description="ุชุนุฏุงุฏ ุชูุฑุจ ฺฉููุงุช")

    @computed_field
    @property
    def size_human(self) -> str:
        """ุญุฌู ูุงู ุจู ุดฺฉู ุฎูุงูุง"""
        if self.size_bytes < 1024:
            return f"{self.size_bytes} B"
        elif self.size_bytes < 1024 * 1024:
            return f"{self.size_bytes / 1024:.1f} KB"
        else:
            return f"{self.size_bytes / (1024 * 1024):.1f} MB"


class ScannedAsset(BaseModel):
    """ุงุทูุงุนุงุช ูุงู ูุงุจุณุชู (ุชุตูุฑุ ูููุช ู...) โ Scanned asset file."""

    path: str = Field(..., description="ูุณุฑ ูุณุจ")
    type: str = Field(..., description="MIME type")
    size_bytes: int = Field(0, ge=0, description="ุญุฌู (ุจุงุช)")
    referenced_by: list[str] = Field(
        default_factory=list,
        description="ุดูุงุณู ุงุณูุงุฏ ฺฉู ุจู ุขู ุงุฑุฌุงุน ุฏุงุฑูุฏ",
    )


# โโโโโโโโโโโโ ูุฏู ุงุตู โโโโโโโโโโโโ


class ScanReport(BaseModel):
    """
    ฺฏุฒุงุฑุด ฺฉุงูู ุงุณฺฉู โ Complete scan report.
    ุฎุฑูุฌ ูุฑุญูู ฑ (Stage 1) ุฎุท ูููู ุชุจุฏู.
    """

    # ุดูุงุณู ู ุฒูุงู
    scan_id: str = Field(..., description="ุดูุงุณู ุงุณฺฉู")
    timestamp: str = Field(
        default_factory=lambda: datetime.now().isoformat(),
        description="ุฒูุงู ุงุณฺฉู (ISO 8601)",
    )

    # ูุฑูุฏ
    input_path: str = Field(..., description="ูุณุฑ ูุฑูุฏ")
    input_type: str = Field(
        "file",
        description="ููุน ูุฑูุฏ (file, directory, archive, url, clipboard)",
    )

    # ุณุงุฎุชุงุฑ
    structure: StructureType = Field(
        StructureType.UNKNOWN,
        description="ููุน ุณุงุฎุชุงุฑ ุดูุงุณุงโุดุฏู",
    )

    # ุงุณูุงุฏ ู ูุงูโูุง
    documents: list[ScannedDocument] = Field(
        default_factory=list,
        description="ูุณุช ุงุณูุงุฏ ุดูุงุณุงโุดุฏู",
    )
    assets: list[ScannedAsset] = Field(
        default_factory=list,
        description="ูุณุช ูุงูโูุง ูุงุจุณุชู",
    )
    all_dependencies: list[DependencyInfo] = Field(
        default_factory=list,
        description="ฺฏุฑุงู ูุงุจุณุชฺฏ ฺฉุงูู",
    )

    # ูุดฺฉูุงุช
    issues: list[ScanIssue] = Field(
        default_factory=list,
        description="ูุดฺฉูุงุช ุดูุงุณุงโุดุฏู",
    )

    # ุชุฃุฏ
    confirmation_required: bool = Field(True, description="ุขุง ุชุฃุฏ ฺฉุงุฑุจุฑ ูุงุฒู ุงุณุช")

    # โโโ ููุฏูุง ูุญุงุณุจูโุง โโโ

    @computed_field
    @property
    def total_files(self) -> int:
        """ุชุนุฏุงุฏ ฺฉู ูุงูโูุง"""
        return len(self.documents) + len(self.assets)

    @computed_field
    @property
    def total_documents(self) -> int:
        """ุชุนุฏุงุฏ ุงุณูุงุฏ"""
        return len(self.documents)

    @computed_field
    @property
    def total_assets(self) -> int:
        """ุชุนุฏุงุฏ ูุงูโูุง ูุงุจุณุชู"""
        return len(self.assets)

    @computed_field
    @property
    def total_size_bytes(self) -> int:
        """ุญุฌู ฺฉู"""
        doc_size = sum(d.size_bytes for d in self.documents)
        asset_size = sum(a.size_bytes for a in self.assets)
        return doc_size + asset_size

    @computed_field
    @property
    def error_count(self) -> int:
        """ุชุนุฏุงุฏ ุฎุทุงูุง"""
        return sum(1 for i in self.issues if i.severity == IssueSeverity.ERROR)

    @computed_field
    @property
    def warning_count(self) -> int:
        """ุชุนุฏุงุฏ ูุดุฏุงุฑูุง"""
        return sum(1 for i in self.issues if i.severity == IssueSeverity.WARNING)

    @computed_field
    @property
    def primary_format(self) -> DocumentFormat:
        """ูุฑูุช ุงุตู (ุดุงุนโุชุฑู)"""
        if not self.documents:
            return DocumentFormat.UNKNOWN
        formats = [d.format for d in self.documents]
        return max(set(formats), key=formats.count)

    @computed_field
    @property
    def primary_language(self) -> DocumentLanguage:
        """ุฒุจุงู ุงุตู"""
        if not self.documents:
            return DocumentLanguage.UNKNOWN
        langs = [d.language for d in self.documents if d.language != DocumentLanguage.UNKNOWN]
        if not langs:
            return DocumentLanguage.UNKNOWN
        return max(set(langs), key=langs.count)

    # โโโ ูุชุฏูุง โโโ

    def get_document_by_id(self, doc_id: str) -> ScannedDocument | None:
        """ุฏุฑุงูุช ุณูุฏ ุจุง ุดูุงุณู"""
        for doc in self.documents:
            if doc.id == doc_id:
                return doc
        return None

    def get_main_document(self) -> ScannedDocument | None:
        """ุฏุฑุงูุช ุณูุฏ ุงุตู (main_entry)"""
        for doc in self.documents:
            if doc.role == DocumentRole.MAIN_ENTRY:
                return doc
        # ุงฺฏุฑ main_entry ูุจูุฏุ ุงููู standalone
        for doc in self.documents:
            if doc.role == DocumentRole.STANDALONE:
                return doc
        return self.documents[0] if self.documents else None

    def get_chapters(self) -> list[ScannedDocument]:
        """ุฏุฑุงูุช ูุตูโูุง (ูุฑุชุจ)"""
        chapters = [d for d in self.documents if d.role == DocumentRole.CHAPTER]
        return sorted(chapters, key=lambda d: d.path)

    def get_missing_dependencies(self) -> list[DependencyInfo]:
        """ุฏุฑุงูุช ูุงุจุณุชฺฏโูุง ฺฏูุดุฏู"""
        return [d for d in self.all_dependencies if not d.exists]

    def get_auto_fixable_issues(self) -> list[ScanIssue]:
        """ุฏุฑุงูุช ูุดฺฉูุงุช ูุงุจู ุงุตูุงุญ ุฎูุฏฺฉุงุฑ"""
        return [i for i in self.issues if i.auto_fixable]

    def has_critical_issues(self) -> bool:
        """ุขุง ูุดฺฉู ุจุญุฑุงู ูุฌูุฏ ุฏุงุฑุฏ"""
        return self.error_count > 0

    @classmethod
    def create(cls, scan_id: str, input_path: str, input_type: str = "file") -> "ScanReport":
        """ุณุงุฎุช ููููู ุฎุงู โ Create empty report."""
        return cls(scan_id=scan_id, input_path=input_path, input_type=input_type)
'@

# ============================================================
# 4. models/conversion_result.py โ ูุชุฌู ุชุจุฏู
# ============================================================
Save-File "formatforge/models/conversion_result.py" @'
"""
ูุฏู ูุชุฌู ุชุจุฏู โ Conversion Result Model.
ุฎุฑูุฌ ูุฑุญูู ณ (Stage 3) ู ูุฑุงุญู ุจุนุฏ ุฎุท ูููู.
"""

from __future__ import annotations

from datetime import datetime

from pydantic import BaseModel, Field, computed_field

from formatforge.models.enums import (
    ConversionStatus,
    DocumentFormat,
    IssueSeverity,
    QualityGrade,
)
from formatforge.models.metadata import DocumentMetadata


# โโโโโโโโโโโโ ูุฏูโูุง ุขูุงุฑ โโโโโโโโโโโโ


class ElementCounts(BaseModel):
    """ุดูุงุฑุด ุนูุงุตุฑ ุณูุฏ โ Element counts for content comparison."""

    headings: int = Field(0, ge=0, description="ุชุนุฏุงุฏ ุนูุงูู")
    paragraphs: int = Field(0, ge=0, description="ุชุนุฏุงุฏ ูพุงุฑุงฺฏุฑุงูโูุง")
    math_inline: int = Field(0, ge=0, description="ุชุนุฏุงุฏ ูุฑูููโูุง inline")
    math_display: int = Field(0, ge=0, description="ุชุนุฏุงุฏ ูุฑูููโูุง display")
    images: int = Field(0, ge=0, description="ุชุนุฏุงุฏ ุชุตุงูุฑ")
    tables: int = Field(0, ge=0, description="ุชุนุฏุงุฏ ุฌุฏุงูู")
    code_blocks: int = Field(0, ge=0, description="ุชุนุฏุงุฏ ุจููฺฉโูุง ฺฉุฏ")
    lists: int = Field(0, ge=0, description="ุชุนุฏุงุฏ ูุณุชโูุง")
    footnotes: int = Field(0, ge=0, description="ุชุนุฏุงุฏ ูพุงููุดุชโูุง")
    citations: int = Field(0, ge=0, description="ุชุนุฏุงุฏ ุงุฑุฌุงุนุงุช")
    cross_refs: int = Field(0, ge=0, description="ุชุนุฏุงุฏ ุงุฑุฌุงุนุงุช ูุชูุงุทุน")
    links_internal: int = Field(0, ge=0, description="ุชุนุฏุงุฏ ููฺฉโูุง ุฏุงุฎู")
    links_external: int = Field(0, ge=0, description="ุชุนุฏุงุฏ ููฺฉโูุง ุฎุงุฑุฌ")
    admonitions: int = Field(0, ge=0, description="ุชุนุฏุงุฏ ุฌุนุจูโูุง ูฺู")
    diagrams_tikz: int = Field(0, ge=0, description="ุชุนุฏุงุฏ ูููุฏุงุฑูุง TikZ")
    diagrams_mermaid: int = Field(0, ge=0, description="ุชุนุฏุงุฏ ูููุฏุงุฑูุง Mermaid")
    words_approx: int = Field(0, ge=0, description="ุชุนุฏุงุฏ ุชูุฑุจ ฺฉููุงุช")
    zwnj_count: int = Field(0, ge=0, description="ุชุนุฏุงุฏ ููโูุงุตููโูุง")

    @computed_field
    @property
    def total_math(self) -> int:
        """ูุฌููุน ูุฑูููโูุง"""
        return self.math_inline + self.math_display

    @computed_field
    @property
    def total_diagrams(self) -> int:
        """ูุฌููุน ูููุฏุงุฑูุง"""
        return self.diagrams_tikz + self.diagrams_mermaid

    @computed_field
    @property
    def total_links(self) -> int:
        """ูุฌููุน ููฺฉโูุง"""
        return self.links_internal + self.links_external


class ConversionStats(BaseModel):
    """ุขูุงุฑ ุชุจุฏู โ Conversion statistics."""

    source_counts: ElementCounts = Field(
        default_factory=ElementCounts,
        description="ุดูุงุฑุด ุนูุงุตุฑ ูุฑูุฏ",
    )
    output_counts: ElementCounts = Field(
        default_factory=ElementCounts,
        description="ุดูุงุฑุด ุนูุงุตุฑ ุฎุฑูุฌ",
    )
    duration_seconds: float = Field(0.0, ge=0, description="ูุฏุช ุชุจุฏู (ุซุงูู)")
    output_size_bytes: int = Field(0, ge=0, description="ุญุฌู ุฎุฑูุฌ MDX (ุจุงุช)")
    assets_size_bytes: int = Field(0, ge=0, description="ุญุฌู ูุงูโูุง ูุงุจุณุชู (ุจุงุช)")

    @computed_field
    @property
    def total_output_size(self) -> int:
        """ุญุฌู ฺฉู ุฎุฑูุฌ"""
        return self.output_size_bytes + self.assets_size_bytes

    @computed_field
    @property
    def zwnj_preserved(self) -> bool:
        """ุขุง ููโูุงุตููโูุง ุญูุธ ุดุฏูโุงูุฏ"""
        return self.source_counts.zwnj_count == self.output_counts.zwnj_count

    @computed_field
    @property
    def zwnj_diff(self) -> int:
        """ุงุฎุชูุงู ุชุนุฏุงุฏ ููโูุงุตูู"""
        return self.source_counts.zwnj_count - self.output_counts.zwnj_count

    def element_ratio(self, element: str) -> float:
        """ูุณุจุช ุนูุตุฑ ุฎุฑูุฌ ุจู ูุฑูุฏ (1.0 = ฺฉุงูู)"""
        src = getattr(self.source_counts, element, 0)
        out = getattr(self.output_counts, element, 0)
        if src == 0:
            return 1.0 if out == 0 else 0.0
        return min(out / src, 1.0)


# โโโโโโโโโโโโ ูุดฺฉูุงุช ุชุจุฏู โโโโโโโโโโโโ


class ConversionIssue(BaseModel):
    """ูุดฺฉู ุดูุงุณุงโุดุฏู ุฏุฑ ุชุจุฏู โ Issue found during conversion."""

    severity: IssueSeverity = Field(..., description="ุดุฏุช")
    stage: str = Field("conversion", description="ูุฑุญูู (conversion, test, deploy)")
    source_file: str = Field("", description="ูุงู ูุจุฏุฃ")
    source_line: int | None = Field(None, description="ุฎุท ูุจุฏุฃ")
    message: str = Field(..., description="ูพุงู")
    suggestion: str = Field("", description="ูพุดููุงุฏ ุงุตูุงุญ")
    auto_fixed: bool = Field(False, description="ุขุง ุฎูุฏฺฉุงุฑ ุงุตูุงุญ ุดุฏ")
    element_type: str = Field("", description="ููุน ุนูุตุฑ (math, table, image, ...)")


# โโโโโโโโโโโโ ูุงู ุฎุฑูุฌ โโโโโโโโโโโโ


class OutputFile(BaseModel):
    """ุงุทูุงุนุงุช ูุงู ุฎุฑูุฌ โ Output file information."""

    path: str = Field(..., description="ูุณุฑ ุฎุฑูุฌ")
    type: str = Field("mdx", description="ููุน: mdx, svg, png, webp, json")
    size_bytes: int = Field(0, ge=0, description="ุญุฌู (ุจุงุช)")
    is_main: bool = Field(False, description="ุขุง ูุงู MDX ุงุตู ุงุณุช")
    source_path: str | None = Field(None, description="ูุณุฑ ูุงู ูุจุฏุฃ")


# โโโโโโโโโโโโ ฺฏุฒุงุฑุด ฺฉูุช โโโโโโโโโโโโ


class QualityReport(BaseModel):
    """ฺฏุฒุงุฑุด ุชุณุช ฺฉูุช โ Quality test report."""

    # ุงูุชุงุฒูุง ุฌุฒุฆ (ูุฑ ฺฉุฏุงู 0-100)
    structural_score: int = Field(0, ge=0, le=100, description="ุงูุชุงุฒ ุณุงุฎุชุงุฑ")
    content_score: int = Field(0, ge=0, le=100, description="ุงูุชุงุฒ ูุญุชูุง")
    math_score: int = Field(0, ge=0, le=100, description="ุงูุชุงุฒ ุฑุงุถ")
    persian_score: int = Field(0, ge=0, le=100, description="ุงูุชุงุฒ ูุงุฑุณ/RTL")
    link_score: int = Field(0, ge=0, le=100, description="ุงูุชุงุฒ ููฺฉโูุง")
    visual_score: int | None = Field(None, ge=0, le=100, description="ุงูุชุงุฒ ุจุตุฑ (ุงุฎุชุงุฑ)")

    # ุฌุฒุฆุงุช
    tests_passed: int = Field(0, ge=0, description="ุชุนุฏุงุฏ ุชุณุชโูุง ูููู")
    tests_failed: int = Field(0, ge=0, description="ุชุนุฏุงุฏ ุชุณุชโูุง ูุงูููู")
    tests_skipped: int = Field(0, ge=0, description="ุชุนุฏุงุฏ ุชุณุชโูุง ูุงุฏุฏูโฺฏุฑูุชูโุดุฏู")

    # ูุดฺฉูุงุช
    issues: list[ConversionIssue] = Field(
        default_factory=list,
        description="ูุดฺฉูุงุช ฺฉูุช",
    )

    @computed_field
    @property
    def total_score(self) -> int:
        """ุงูุชุงุฒ ฺฉู (ูุฒู) โ Weighted total quality score."""
        # ูุฒูโูุง: ุณุงุฎุชุงุฑ 25%, ูุญุชูุง 25%, ุฑุงุถ 20%, ูุงุฑุณ 20%, ููฺฉ 10%
        score = (
            self.structural_score * 0.25
            + self.content_score * 0.25
            + self.math_score * 0.20
            + self.persian_score * 0.20
            + self.link_score * 0.10
        )
        return round(score)

    @computed_field
    @property
    def grade(self) -> QualityGrade:
        """ุฏุฑุฌู ฺฉูุช"""
        return QualityGrade.from_score(self.total_score)

    @computed_field
    @property
    def total_tests(self) -> int:
        """ุชุนุฏุงุฏ ฺฉู ุชุณุชโูุง"""
        return self.tests_passed + self.tests_failed + self.tests_skipped

    def passes_threshold(self, threshold: int = 80) -> bool:
        """ุขุง ุงุฒ ุญุฏ ูุฌุงุฒ ุนุจูุฑ ูโฺฉูุฏ"""
        return self.total_score >= threshold


# โโโโโโโโโโโโ ูุชุฌู ุชุจุฏู ุงุตู โโโโโโโโโโโโ


class ConversionResult(BaseModel):
    """
    ูุชุฌู ฺฉุงูู ุชุจุฏู ฺฉ ุณูุฏ โ Complete conversion result for one document.
    ุฎุฑูุฌ ูุฑุญูู ณ (Stage 3).
    """

    # ุดูุงุณู ู ูุถุนุช
    conversion_id: str = Field(..., description="ุดูุงุณู ุชุจุฏู")
    status: ConversionStatus = Field(..., description="ูุถุนุช ุชุจุฏู")
    timestamp: str = Field(
        default_factory=lambda: datetime.now().isoformat(),
        description="ุฒูุงู ุชุจุฏู",
    )

    # ูุฑูุฏ
    source_path: str = Field(..., description="ูุณุฑ ูุงู ูุฑูุฏ")
    source_format: DocumentFormat = Field(..., description="ูุฑูุช ูุฑูุฏ")

    # ุฎุฑูุฌ
    output_files: list[OutputFile] = Field(
        default_factory=list,
        description="ูุงูโูุง ุฎุฑูุฌ",
    )
    mdx_content: str | None = Field(
        None,
        description="ูุญุชูุง MDX ุชููุฏุดุฏู (ุจุฑุง ุชฺฉโูุงู)",
        exclude=True,  # ุงุฒ ุณุฑุงูุงุฒ JSON/YAML ูุณุชุซู
    )

    # ูุชุงุฏุชุง
    metadata: DocumentMetadata | None = Field(None, description="ูุชุงุฏุชุง ุงุณุชุฎุฑุงุฌโุดุฏู")

    # ุขูุงุฑ
    stats: ConversionStats = Field(
        default_factory=ConversionStats,
        description="ุขูุงุฑ ุชุจุฏู",
    )

    # ฺฉูุช
    quality: QualityReport | None = Field(None, description="ฺฏุฒุงุฑุด ฺฉูุช")

    # ูุดฺฉูุงุช
    issues: list[ConversionIssue] = Field(
        default_factory=list,
        description="ูุดฺฉูุงุช ุชุจุฏู",
    )

    # โโโ ููุฏูุง ูุญุงุณุจูโุง โโโ

    @computed_field
    @property
    def is_success(self) -> bool:
        """ุขุง ุชุจุฏู ูููู ุจูุฏ"""
        return self.status == ConversionStatus.SUCCESS

    @computed_field
    @property
    def error_count(self) -> int:
        """ุชุนุฏุงุฏ ุฎุทุงูุง"""
        return sum(1 for i in self.issues if i.severity == IssueSeverity.ERROR)

    @computed_field
    @property
    def warning_count(self) -> int:
        """ุชุนุฏุงุฏ ูุดุฏุงุฑูุง"""
        return sum(1 for i in self.issues if i.severity == IssueSeverity.WARNING)

    @computed_field
    @property
    def quality_score(self) -> int:
        """ุงูุชุงุฒ ฺฉูุช (0-100)"""
        if self.quality:
            return self.quality.total_score
        return 0

    @computed_field
    @property
    def main_output_file(self) -> str | None:
        """ูุณุฑ ูุงู MDX ุงุตู"""
        for f in self.output_files:
            if f.is_main:
                return f.path
        return self.output_files[0].path if self.output_files else None

    # โโโ ูุชุฏูุง โโโ

    def add_issue(
        self,
        severity: IssueSeverity,
        message: str,
        *,
        source_file: str = "",
        source_line: int | None = None,
        suggestion: str = "",
        auto_fixed: bool = False,
        element_type: str = "",
    ) -> None:
        """ุงุถุงูู ฺฉุฑุฏู ูุดฺฉู"""
        self.issues.append(
            ConversionIssue(
                severity=severity,
                message=message,
                source_file=source_file,
                source_line=source_line,
                suggestion=suggestion,
                auto_fixed=auto_fixed,
                element_type=element_type,
            )
        )

    def add_output_file(
        self,
        path: str,
        type: str = "mdx",
        size_bytes: int = 0,
        is_main: bool = False,
        source_path: str | None = None,
    ) -> None:
        """ุงุถุงูู ฺฉุฑุฏู ูุงู ุฎุฑูุฌ"""
        self.output_files.append(
            OutputFile(
                path=path,
                type=type,
                size_bytes=size_bytes,
                is_main=is_main,
                source_path=source_path,
            )
        )

    @classmethod
    def create_success(
        cls,
        conversion_id: str,
        source_path: str,
        source_format: DocumentFormat,
    ) -> "ConversionResult":
        """ุณุงุฎุช ูุชุฌู ูููู โ Create successful result."""
        return cls(
            conversion_id=conversion_id,
            status=ConversionStatus.SUCCESS,
            source_path=source_path,
            source_format=source_format,
        )

    @classmethod
    def create_failure(
        cls,
        conversion_id: str,
        source_path: str,
        source_format: DocumentFormat,
        error_message: str,
    ) -> "ConversionResult":
        """ุณุงุฎุช ูุชุฌู ูุงูููู โ Create failed result."""
        result = cls(
            conversion_id=conversion_id,
            status=ConversionStatus.FAILED,
            source_path=source_path,
            source_format=source_format,
        )
        result.add_issue(IssueSeverity.ERROR, error_message)
        return result


# โโโโโโโโโโโโ ูุชุงุฌ ุฏุณุชูโุง โโโโโโโโโโโโ


class BatchConversionResult(BaseModel):
    """ูุชุฌู ุชุจุฏู ุฏุณุชูโุง โ Batch conversion result for multiple documents."""

    batch_id: str = Field(..., description="ุดูุงุณู ุฏุณุชู")
    timestamp: str = Field(
        default_factory=lambda: datetime.now().isoformat(),
        description="ุฒูุงู ุดุฑูุน",
    )
    results: list[ConversionResult] = Field(
        default_factory=list,
        description="ูุชุงุฌ ุชฺฉโุชฺฉ ุชุจุฏูโูุง",
    )
    total_duration_seconds: float = Field(0.0, ge=0, description="ูุฏุช ฺฉู")

    @computed_field
    @property
    def total(self) -> int:
        return len(self.results)

    @computed_field
    @property
    def success_count(self) -> int:
        return sum(1 for r in self.results if r.is_success)

    @computed_field
    @property
    def failure_count(self) -> int:
        return sum(1 for r in self.results if r.status == ConversionStatus.FAILED)

    @computed_field
    @property
    def avg_quality_score(self) -> int:
        scores = [r.quality_score for r in self.results if r.quality_score > 0]
        return round(sum(scores) / len(scores)) if scores else 0

    @computed_field
    @property
    def all_zwnj_preserved(self) -> bool:
        """ุขุง ุชูุงู ููโูุงุตููโูุง ุฏุฑ ุชูุงู ุงุณูุงุฏ ุญูุธ ุดุฏู"""
        return all(r.stats.zwnj_preserved for r in self.results)
'@

# ============================================================
# 5. models/__init__.py โ ุจุงุฒุตุงุฏุฑุงุช
# ============================================================
Save-File "formatforge/models/__init__.py" @'
"""
ูุฏูโูุง ุฏุงุฏู FormatForge โ Data models.
ุชูุงู ูุฏูโูุง Pydantic ุงุฒ ุงูุฌุง ูุงุจู import ูุณุชูุฏ.
"""

from formatforge.models.enums import (
    ConversionStatus,
    DocumentDirection,
    DocumentFormat,
    DocumentLanguage,
    DocumentRole,
    DocumentType,
    IssueSeverity,
    QualityGrade,
    StructureType,
)
from formatforge.models.metadata import (
    AssetReference,
    AuthorInfo,
    DocumentMetadata,
    SeriesInfo,
)
from formatforge.models.scan_report import (
    DependencyInfo,
    EncodingInfo,
    ImageReference,
    ScanIssue,
    ScanReport,
    ScannedAsset,
    ScannedDocument,
)
from formatforge.models.conversion_result import (
    BatchConversionResult,
    ConversionIssue,
    ConversionResult,
    ConversionStats,
    ElementCounts,
    OutputFile,
    QualityReport,
)

__all__ = [
    # Enums
    "ConversionStatus",
    "DocumentDirection",
    "DocumentFormat",
    "DocumentLanguage",
    "DocumentRole",
    "DocumentType",
    "IssueSeverity",
    "QualityGrade",
    "StructureType",
    # Metadata
    "AssetReference",
    "AuthorInfo",
    "DocumentMetadata",
    "SeriesInfo",
    # Scan
    "DependencyInfo",
    "EncodingInfo",
    "ImageReference",
    "ScanIssue",
    "ScanReport",
    "ScannedAsset",
    "ScannedDocument",
    # Conversion
    "BatchConversionResult",
    "ConversionIssue",
    "ConversionResult",
    "ConversionStats",
    "ElementCounts",
    "OutputFile",
    "QualityReport",
]
'@

# ============================================================
# 6. tests/test_models.py โ ุชุณุชโูุง
# ============================================================
Save-File "tests/test_models.py" @'
"""
ุชุณุชโูุง ูุฏูโูุง Pydantic โ Tests for data models.
"""

import pytest
from pydantic import ValidationError

from formatforge.models import (
    AuthorInfo,
    ConversionResult,
    ConversionStats,
    DocumentDirection,
    DocumentFormat,
    DocumentLanguage,
    DocumentMetadata,
    DocumentType,
    ElementCounts,
    ConversionStatus,
    IssueSeverity,
    QualityGrade,
    QualityReport,
    ScanReport,
    ScannedDocument,
    ScanIssue,
    SeriesInfo,
    StructureType,
    BatchConversionResult,
)


# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# ุชุณุช Enums
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ


class TestDocumentFormat:
    """ุชุณุช ุดูุงุฑุด ูุฑูุชโูุง"""

    def test_from_extension_latex(self):
        assert DocumentFormat.from_extension(".tex") == DocumentFormat.LATEX
        assert DocumentFormat.from_extension("tex") == DocumentFormat.LATEX
        assert DocumentFormat.from_extension(".TEX") == DocumentFormat.LATEX

    def test_from_extension_markdown(self):
        assert DocumentFormat.from_extension(".md") == DocumentFormat.MARKDOWN
        assert DocumentFormat.from_extension(".mdx") == DocumentFormat.MARKDOWN

    def test_from_extension_html(self):
        assert DocumentFormat.from_extension(".html") == DocumentFormat.HTML
        assert DocumentFormat.from_extension(".htm") == DocumentFormat.HTML

    def test_from_extension_unknown(self):
        assert DocumentFormat.from_extension(".xyz") == DocumentFormat.UNKNOWN

    def test_from_extension_all_formats(self):
        known = {
            ".tex": DocumentFormat.LATEX,
            ".md": DocumentFormat.MARKDOWN,
            ".html": DocumentFormat.HTML,
            ".docx": DocumentFormat.DOCX,
            ".pdf": DocumentFormat.PDF,
            ".rst": DocumentFormat.RST,
            ".adoc": DocumentFormat.ASCIIDOC,
            ".epub": DocumentFormat.EPUB,
            ".ipynb": DocumentFormat.NOTEBOOK,
        }
        for ext, expected in known.items():
            assert DocumentFormat.from_extension(ext) == expected, f"Failed for {ext}"


class TestQualityGrade:
    """ุชุณุช ุฏุฑุฌูโุจูุฏ ฺฉูุช"""

    def test_excellent(self):
        assert QualityGrade.from_score(95) == QualityGrade.EXCELLENT
        assert QualityGrade.from_score(90) == QualityGrade.EXCELLENT
        assert QualityGrade.from_score(100) == QualityGrade.EXCELLENT

    def test_good(self):
        assert QualityGrade.from_score(85) == QualityGrade.GOOD
        assert QualityGrade.from_score(75) == QualityGrade.GOOD

    def test_fair(self):
        assert QualityGrade.from_score(60) == QualityGrade.FAIR
        assert QualityGrade.from_score(50) == QualityGrade.FAIR

    def test_poor(self):
        assert QualityGrade.from_score(30) == QualityGrade.POOR
        assert QualityGrade.from_score(0) == QualityGrade.POOR


# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# ุชุณุช DocumentMetadata
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ


class TestDocumentMetadata:
    """ุชุณุช ูุฏู ูุชุงุฏุชุง"""

    def test_create_minimal(self):
        """ุณุงุฎุช ููููู ุญุฏุงูู"""
        meta = DocumentMetadata.create_minimal(
            title="ูุงููู ุฏููุฑฺฏุงู",
            slug="de-morgans-laws",
        )
        assert meta.title == "ูุงููู ุฏููุฑฺฏุงู"
        assert meta.slug == "de-morgans-laws"
        assert meta.lang == DocumentLanguage.PERSIAN
        assert meta.dir == DocumentDirection.RTL

    def test_create_full(self):
        """ุณุงุฎุช ููููู ฺฉุงูู"""
        meta = DocumentMetadata(
            title="ูุจุงู ููุทู ุฑุงุถ",
            title_en="Foundations of Mathematical Logic",
            slug="foundations-math-logic",
            date="2025-07-13",
            lang=DocumentLanguage.BILINGUAL,
            dir=DocumentDirection.RTL,
            author=AuthorInfo(name="ููุฏ ุณุงูู", name_en="Mahdi Salem"),
            type=DocumentType.BOOK,
            tags=["ููุทู", "ุฑุงุถ"],
            tags_en=["logic", "mathematics"],
            description="ุจุฑุฑุณ ูุจุงู ููุทู ุฑุงุถ ู ุงุซุจุงุชโูุง ุตูุฑ",
            math=True,
            code_highlight=True,
            source_format=DocumentFormat.LATEX,
        )
        assert meta.title_en == "Foundations of Mathematical Logic"
        assert meta.math is True
        assert meta.type == DocumentType.BOOK

    def test_slug_validation_valid(self):
        """Slug ูุนุชุจุฑ"""
        meta = DocumentMetadata.create_minimal(
            title="ุชุณุช", slug="valid-slug-123"
        )
        assert meta.slug == "valid-slug-123"

    def test_slug_validation_invalid_uppercase(self):
        """Slug ุจุง ุญุฑูู ุจุฒุฑฺฏ โ ุฎุทุง"""
        with pytest.raises(ValidationError):
            DocumentMetadata.create_minimal(title="ุชุณุช", slug="Invalid-Slug")

    def test_slug_validation_invalid_space(self):
        """Slug ุจุง ูุงุตูู โ ุฎุทุง"""
        with pytest.raises(ValidationError):
            DocumentMetadata.create_minimal(title="ุชุณุช", slug="has space")

    def test_slug_validation_invalid_persian(self):
        """Slug ุจุง ุญุฑูู ูุงุฑุณ โ ุฎุทุง"""
        with pytest.raises(ValidationError):
            DocumentMetadata.create_minimal(title="ุชุณุช", slug="ุชุณุช-slug")

    def test_date_validation_valid(self):
        """ุชุงุฑุฎ ูุนุชุจุฑ"""
        meta = DocumentMetadata.create_minimal(
            title="ุชุณุช", slug="test", date="2025-07-13"
        )
        assert meta.date == "2025-07-13"

    def test_date_validation_invalid(self):
        """ุชุงุฑุฎ ูุงูุนุชุจุฑ โ ุฎุทุง"""
        with pytest.raises(ValidationError):
            DocumentMetadata(
                title="ุชุณุช", slug="test", date="ูุงูุนุชุจุฑ"
            )

    def test_empty_title_rejected(self):
        """ุนููุงู ุฎุงู โ ุฎุทุง"""
        with pytest.raises(ValidationError):
            DocumentMetadata(title="", slug="test", date="2025-01-01")

    def test_zwnj_in_title(self):
        """ููโูุงุตูู ุฏุฑ ุนููุงู ุดูุงุณุง ูโุดูุฏ"""
        meta = DocumentMetadata.create_minimal(
            title="ฺฉุชุงุจโูุง ููุทู",  # ุดุงูู ZWNJ
            slug="logic-books",
        )
        assert meta.has_zwnj() is True

    def test_no_zwnj_in_title(self):
        """ุนููุงู ุจุฏูู ููโูุงุตูู"""
        meta = DocumentMetadata.create_minimal(
            title="ููุทู",
            slug="logic",
        )
        assert meta.has_zwnj() is False

    def test_to_frontmatter_dict(self):
        """ุชุจุฏู ุจู ุฏฺฉุดูุฑ frontmatter"""
        meta = DocumentMetadata(
            title="ุชุณุช",
            slug="test",
            date="2025-07-13",
            math=True,
            tags=["ููุทู"],
        )
        d = meta.to_frontmatter_dict()
        assert d["title"] == "ุชุณุช"
        assert d["slug"] == "test"
        assert d["lang"] == "fa"
        assert d["dir"] == "rtl"
        assert d["math"] is True
        assert d["tags"] == ["ููุทู"]

    def test_to_frontmatter_yaml(self):
        """ุชุจุฏู ุจู YAML frontmatter"""
        meta = DocumentMetadata.create_minimal(title="ุชุณุช", slug="test")
        yaml_str = meta.to_frontmatter_yaml()
        assert yaml_str.startswith("---\n")
        assert yaml_str.endswith("---\n")
        assert "title:" in yaml_str
        assert "slug:" in yaml_str

    def test_series_info(self):
        """ุงุทูุงุนุงุช ูุฌููุนู"""
        meta = DocumentMetadata(
            title="ูุตู ฑ",
            slug="ch01",
            date="2025-01-01",
            series=SeriesInfo(
                name="ูุจุงู ููุทู",
                slug="logic-foundations",
                order=1,
                total=5,
            ),
        )
        assert meta.series is not None
        assert meta.series.order == 1
        assert meta.series.total == 5


# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# ุชุณุช ScanReport
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ


class TestScanReport:
    """ุชุณุช ูุฏู ฺฏุฒุงุฑุด ุงุณฺฉู"""

    def test_create_empty(self):
        """ุณุงุฎุช ฺฏุฒุงุฑุด ุฎุงู"""
        report = ScanReport.create("scan_001", "/path/to/input")
        assert report.scan_id == "scan_001"
        assert report.total_files == 0
        assert report.total_documents == 0

    def test_with_documents(self):
        """ฺฏุฒุงุฑุด ุจุง ุงุณูุงุฏ"""
        report = ScanReport.create("scan_002", "/path", "directory")
        report.documents.append(
            ScannedDocument(
                id="doc_001",
                path="main.tex",
                format=DocumentFormat.LATEX,
                size_bytes=5000,
                has_math=True,
                zwnj_count=42,
            )
        )
        report.documents.append(
            ScannedDocument(
                id="doc_002",
                path="chapter01.tex",
                format=DocumentFormat.LATEX,
                size_bytes=12000,
            )
        )
        assert report.total_documents == 2
        assert report.primary_format == DocumentFormat.LATEX
        assert report.total_size_bytes == 17000

    def test_get_main_document(self):
        """ูพุฏุง ฺฉุฑุฏู ุณูุฏ ุงุตู"""
        from formatforge.models.enums import DocumentRole

        report = ScanReport.create("scan_003", "/path")
        report.documents.append(
            ScannedDocument(
                id="doc_001", path="main.tex",
                format=DocumentFormat.LATEX,
                role=DocumentRole.MAIN_ENTRY,
            )
        )
        report.documents.append(
            ScannedDocument(
                id="doc_002", path="ch01.tex",
                format=DocumentFormat.LATEX,
                role=DocumentRole.CHAPTER,
            )
        )
        main = report.get_main_document()
        assert main is not None
        assert main.id

---
